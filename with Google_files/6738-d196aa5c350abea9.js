"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6738],{69232:function(e,n,t){t.d(n,{W:function(){return c}});var r=t(47457),i=t(91012),o=t(49929),s=t(52322),c=function(e){var n=e.length,t=e.idealLength,c=e.maxLength;return(0,s.jsxs)(i.x,{fontSize:"xs",color:n>=c?"red.400":"gray.500",children:[n>=c&&(0,s.jsx)(o.G,{icon:r.e7})," ",n,"/",t]})}},56317:function(e,n,t){t.d(n,{r:function(){return nX}});var r=t(7099),i=t(55452),o=t(20010),s=t(56915),c=t(48273),a=t(40110),l=t(80353),d=t(11919),u=t(45650),f=t(49929),h=t(55966),p=t(2784),x=t(13720),m=t(12741),j=t(20412),v=t(60577),g=t(87254),b=t(2167),C=t(71354),y=t(50390),O=t(81927),w=t(94659),k=t(53738),S=t(91012),E=t(72360),I=t(66724),P=t(18751),D=t(23313),A=t(8388),T=t(51331),_=t(49922),R=t(82483),z=t(32333),L=t(10710),M="gray.700",N=t(95235),G=t(82269),Z=t(48322),F=t(52322),U=["error","refetch"];function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),!0).forEach(function(n){(0,N.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var B=function(e){var n=e.error,t=e.refetch,r=(0,G.Z)(e,U);return(0,F.jsx)(k.xu,H(H({px:6,py:4},r),{},{children:(0,F.jsxs)(E.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,F.jsx)(Z.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,F.jsx)(I.C,{mt:4,mb:2,fontSize:"md",children:(0,F.jsx)(i.cC,{id:"uNQm3r"})}),(0,F.jsx)(P.X,{maxWidth:"md",children:n.message}),(0,F.jsx)(u.z,{mt:4,onClick:function(){return t()},children:(0,F.jsx)(i.cC,{id:"6gRgw8"})})]})}))},V=t(19664),q=t(97269),K=t(92619),Y=t(85982),Q=t(64827),X=function(){return g.ag._({id:"QbrUIo"})},J=function(){return g.ag._({id:"FbBkvL"})},$=function(e){var n=e.isAnalyticsLoading,t=e.hasError,r=e.view,o=e.setView,s=e.description;return t?(0,F.jsx)(K.x,{children:(0,F.jsx)(i.cC,{id:"ZlwDi6"})}):(0,F.jsxs)(d.k,{direction:"column",flex:1,children:[(0,F.jsx)(K.x,{children:n?(0,F.jsx)(ee,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(i.cC,{id:"ZlwDi6"}),(0,F.jsxs)(w.g,{align:"stretch",spacing:4,children:[(0,F.jsx)(S.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,F.jsxs)(Y.E,{children:[(0,F.jsx)(Y.U,{children:(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:q.M,"aria-label":X()}),variant:"ghost",fontWeight:"600",bg:"deckView"===r?"trueblue.50":"transparent",color:"deckView"===r?"trueblue.500":M,onClick:function(){return o("deckView")},children:X()})}),(0,F.jsx)(Y.U,{children:(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:V.AG,"aria-label":J()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===r?"trueblue.50":"transparent",color:"cardEngagement"===r?"trueblue.500":M,onClick:function(){return o("cardEngagement")},children:J()})})]})]})]})}),(0,F.jsx)(Q.o,{})]})},ee=function(){return(0,F.jsxs)(w.g,{align:"stretch",spacing:4,children:[(0,F.jsx)(O.O,{h:12,width:"30%"}),(0,F.jsx)(O.O,{h:4,width:"80%"})]})},en=t(74373),et=t(68871),er=t(8283),ei=t(98875),eo=t(46358),es=t(62141),ec=t(98621),ea=t.n(ec),el=t(74542),ed=function(e){var n=e.degree,t=e.alpha,r=e.startColor,i=void 0===r?"#ECC94B":r,o=e.endColor,s=void 0===o?"#38A169":o;if(Number.isNaN(n))return ea()("#e5e0df").toHex8String();var c=ea()(i).toHsl(),a=ea()(s).toHsl();return ea()({h:(0,el.t7)(c.h,a.h,n),s:(0,el.t7)(c.s,a.s,n),l:(0,el.t7)(c.l,a.l,n),a:void 0===t?1:t}).toHex8String()},eu=function(e,n){return e.reduce(function(e,t){return e[t.cardId]=t[n],e},{})},ef=function e(n,t){var r,i=0;for(var o in n)i+=(null!==(r=t[o])&&void 0!==r?r:0)+e(n[o],t);return i},eh=function(e,n){var t,r=0;for(var i in e)r=Math.max((null!==(t=n[i])&&void 0!==t?t:0)+ef(e[i],n),r);return r},ep=t(81333),ex=t(56623),em=t(51068),ej=t(67784),ev=t(93319),eg=t(67887),eb=t(49747),eC=t(34717),ey=t(8635),eO=t(43227),ew=t(34860),ek=t(23769),eS=t(13813),eE=t(16844),eI=t(62349),eP=t.n(eI);function eD(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eA(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eD(Object(t),!0).forEach(function(n){(0,N.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eD(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eT=function(e){var n=e.cardsViewed,t=e.totalCards,r=ed({degree:n/t}),o=t>0;return(0,F.jsxs)(er.U,{spacing:3,children:[(0,F.jsxs)(d.k,{flex:1,position:"relative",children:[(0,F.jsx)(eE.E,{h:4,flex:1,borderRadius:"sm",value:n,max:o?t:void 0,bg:"gray.200",sx:{"> div":{bg:r}}}),o&&n===t&&(0,F.jsx)(eR,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,F.jsx)(S.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:o?"".concat(n,"/").concat(t):(0,F.jsx)(i.cC,{id:"8Va3Pt"})})]})},e_=function(e){var n=e.cardCount,t=(0,p.useMemo)(function(){return eP()(1,n)},[n]);return(0,F.jsxs)(er.U,{spacing:3,filter:"blur(3px)",children:[(0,F.jsx)(d.k,{flex:1,position:"relative",children:(0,F.jsx)(eE.E,{h:4,flex:1,borderRadius:"sm",value:t,max:n,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,F.jsxs)(S.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[t,"/",n]})]})},eR=function(e){var n=(0,ek.Z)({},e);return(0,F.jsx)(k.Cd,eA(eA({bg:"green.500",size:"18px",border:"2px solid white",color:"white"},n),{},{children:(0,F.jsx)(f.G,{icon:eS.LE,"aria-label":g.ag._({id:"y886Ns"}),size:"xs"})}))};function ez(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eL(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ez(Object(t),!0).forEach(function(n){(0,N.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ez(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eM=function(e){var n,t=e.cards,r=e.isColorized,i=void 0!==r&&r,o=e.scaleToMax,s=void 0!==o&&o,c=e.includeChildren,a=e.showViewersPercent,l=void 0!==a&&a,d=e.leftLabel,u=e.rightLabel,f=e.tooltipLabel,x=e.cardLookupTable,j=e.onAnalyticsPanelClose,v=(n=c?eh(t,x):Math.max.apply(Math,(0,m.Z)(Object.values(x))),function(e){return(0,el.t7)(0,100,e/n)}),g=(0,p.useCallback)(function(e){return v(e)},[v]);return(0,F.jsxs)(k.xu,{mt:6,mb:4,children:[(0,F.jsxs)(er.U,{mb:3,children:[(0,F.jsx)(er.U,{children:(0,F.jsx)(h.NZ,{children:d})}),(0,F.jsx)(ev.L,{}),(0,F.jsx)(er.U,{children:(0,F.jsx)(h.kH,{placement:"top",label:f,children:(0,F.jsx)(er.U,{children:(0,F.jsx)(h.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:u})})})})]}),(0,F.jsx)(k.xu,{width:"100%",children:Object.entries(t).map(function(e){var n,t=(0,ep.Z)(e,2),r=t[0],o=t[1];return(0,F.jsx)(eN,{id:r,childCards:o,percentage:null!==(n=x[r])&&void 0!==n?n:0,calculatePercentageScale:g,isColorized:i,cardLookupTable:x,scaleToMax:s,includeChildren:c,showViewersPercent:l,onAnalyticsPanelClose:j},r)})})]})},eN=function e(n){var t=n.id,r=n.cardLookupTable,o=n.childCards,s=n.percentage,c=n.calculatePercentageScale,a=n.isColorized,l=n.scaleToMax,u=n.includeChildren,x=n.showViewersPercent,m=n.onAnalyticsPanelClose,j=(0,ei.ye)("screenshotsEnabled"),v=(0,p.useState)(!1),g=v[0],b=v[1],y=(0,ew.Ux)({placement:"top",gutter:12,enterDelay:200}),O=y.referenceRef,w=y.popperRef,E=y.isHovering,I=y.getPopperProps,P=y.onMouseOver,D=y.onMouseOut,A=(0,p.useCallback)(function(){b(!g)},[g]),T=(0,p.useCallback)(function(){(0,eO.D)({cardId:t}),m()},[t,m]),_=(0,ey.c)(t),R=(0,ey.T)({cardId:t}).title,z=Object.values(o).length>0,L=0===s,M=u?s+ef(o,r):s,N=g?M:0,G=l?c(M):Math.min(100,N),Z=g?s:M,U=l?c(Z):Math.min(100,Z),W={startColor:"#F6AD55",endColor:"#68D391"},H=a?ed(eL({degree:G/100},W)):"trueblue.50",B=a?ed(eL({degree:U/100},W)):"trueblue.100";return(0,F.jsxs)(C.K,{children:[(0,F.jsxs)(d.k,{direction:"column",onMouseOver:P,onMouseOut:D,children:[(0,F.jsxs)(d.k,{ref:O,h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,F.jsxs)(er.U,{pos:"absolute",zIndex:1,children:[z&&(0,F.jsx)(eg.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,F.jsx)(f.G,{icon:ej._t}),transform:g?"rotate(90deg)":"",onClick:A,_focus:{shadow:"none"}}),!z&&(0,F.jsx)(d.k,{w:6,justifyContent:"center",alignItems:"center",children:L?(0,F.jsx)(h.kH,{label:(0,F.jsx)(i.cC,{id:"s+PDNe"}),children:(0,F.jsx)(k.xu,{color:"blackAlpha.500",children:(0,F.jsx)(f.G,{icon:em.Aq,size:"sm"})})}):(0,F.jsx)(k.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,F.jsx)(f.G,{icon:ex.nZ,size:"sm"})})}),(0,F.jsx)(S.x,{color:L?"blackAlpha.500":void 0,noOfLines:1,children:R||(0,F.jsx)(i.cC,{id:"wja8aL"})})]}),(0,F.jsxs)(k.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,F.jsx)(k.xu,{position:"absolute",h:"100%",bg:L?"blackAlpha.200":H,w:"".concat(G,"%")}),(0,F.jsx)(k.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:L?"blackAlpha.300":B,w:"".concat(U,"%")})]}),a&&100===s&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ev.L,{}),(0,F.jsx)(eR,{alignSelf:"center",zIndex:1})]})]}),E&&(0,F.jsx)(h.qh,eL({ref:w,src:j?null==_?void 0:_.previewUrl:eC.Z.src,fallbackSrc:eC.Z.src,shouldShow:E,onClick:T,tooltip:(0,F.jsx)(i.cC,{id:"3YmIR6"}),label:x?(0,F.jsx)(i.cC,{id:"wmqtMZ",values:{percentage:s}}):void 0},I()))]}),(0,F.jsx)(k.xu,{pl:8,children:z&&Object.entries(o).map(function(n){var t,i=(0,ep.Z)(n,2),o=i[0],s=i[1];return(0,F.jsx)(eb.U,{in:g,children:(0,F.jsx)(e,{id:o,childCards:s,percentage:null!==(t=r[o])&&void 0!==t?t:0,cardLookupTable:r,calculatePercentageScale:c,scaleToMax:l,isColorized:a,includeChildren:u,showViewersPercent:x,onAnalyticsPanelClose:m})},o)})})]})},eG=function(){return(0,F.jsx)(C.K,{spacing:2,children:(0,F.jsx)(i.cC,{id:"QXJTby",components:{0:(0,F.jsx)(S.x,{}),1:(0,F.jsx)(S.x,{}),2:(0,F.jsx)(S.x,{})}})})},eZ=function(e){var n=e.timeInMS;return void 0===n?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)(i.cC,{id:"yXHI9B",values:{timeInSeconds:n/1e3}})},eF=function(e){var n=e.docId,t=e.viewerFilter,r=e.currentViewerFilterCount,o=e.onAnalyticsPanelClose,s=(0,eo.qr)().getState(),c=(0,es.X9)(s),a=(0,D.IrH)({variables:{docId:n}}),l=a.data,d=a.error,h=a.loading,x=a.refetch,m=(0,p.useState)("viewTimePercent"),j=m[0],v=m[1],g="viewTimePercent"===j?{chartDescription:(0,F.jsx)(i.cC,{id:"dpTE1c",values:{viewerCount:r}}),leftLabel:(0,F.jsx)(i.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(i.cC,{id:"8R7bfR"})}:{chartDescription:(0,F.jsx)(i.cC,{id:"b2VMTo",values:{viewerCount:r}}),leftLabel:(0,F.jsx)(i.cC,{id:"kTgCTO"}),rightLabel:(0,F.jsx)(i.cC,{id:"AKDcmS"})},b=g.chartDescription,C=g.rightLabel,y=g.leftLabel,O="viewersOnly"===t?"viewers":"everyone",w=(0,ei.ye)("cardViewedThreshold"),S=(0,p.useMemo)(function(){var e;return(null==l?void 0:null===(e=l.docCardsStats)||void 0===e?void 0:e[O])||[]},[null==l?void 0:l.docCardsStats,O]),E=(0,p.useMemo)(function(){return eu(S,j)},[S,j]),I=(0,p.useCallback)(function(){return v("viewTimePercent")},[]),P=(0,p.useCallback)(function(){return v("viewersPercent")},[]);return(0,F.jsxs)(k.xu,{children:[(0,F.jsxs)(er.U,{my:4,children:[(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:et.SZ,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===j?"trueblue.50":"transparent",color:"viewTimePercent"===j?"trueblue.500":M,onClick:I,children:(0,F.jsx)(i.cC,{id:"XyvAeS"})}),(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:en.jG,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===j?"trueblue.50":"transparent",color:"viewersPercent"===j?"trueblue.500":M,onClick:P,children:(0,F.jsx)(i.cC,{id:"vXtpAZ"})})]}),(0,F.jsx)(eW,{description:b}),d&&(0,F.jsx)(B,{error:d,refetch:x}),h&&!d&&(0,F.jsx)(eU,{}),!h&&!d&&(0,F.jsx)(eM,{cards:c.tree,cardLookupTable:E,scaleToMax:"viewTimePercent"===j,isColorized:"viewersPercent"===j,includeChildren:"viewTimePercent"===j,showViewersPercent:"viewersPercent"===j,rightLabel:C,leftLabel:y,tooltipLabel:"viewTimePercent"===j?(0,F.jsx)(eG,{}):(0,F.jsx)(eZ,{timeInMS:w}),onAnalyticsPanelClose:o})]})},eU=function(e){var n=e.includeDescription;return(0,F.jsx)(d.k,{direction:"column",mt:6,mb:4,children:(0,F.jsxs)(w.g,{align:"stretch",children:[void 0!==n&&n&&(0,F.jsx)(O.O,{h:5,mb:3,w:"70%"}),(0,m.Z)([,,,,,]).map(function(e,n){return(0,F.jsx)(O.O,{h:8},n)})]})})},eW=function(e){var n=e.description;return(0,F.jsx)(S.x,{color:M,children:n})},eH=t(89364),eB=t(73851),eV=t(36258),eq=t(19875),eK=t(77525),eY=t(74642),eQ=t(35319),eX=t(27912),eJ=t(12221),e$=t(13061),e0=t(65903),e1=t.n(e0),e2=t(829),e5=t.n(e2),e3=t(75085),e4=t(81188),e6=["name","profileImg","email","isCreator","isContributor","isAnonymous"];function e8(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e9(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e8(Object(t),!0).forEach(function(n){(0,N.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e8(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e7=function(e){var n=e.uniqueViewers,t=e.docCreatedDate,r=(0,ei.ye)("cardViewedThreshold");return(0,F.jsx)(eB.h,{children:(0,F.jsxs)(eV.Tr,{children:[(0,F.jsx)(ne,{label:(0,F.jsx)(i.cC,{id:"LZHJAq",values:{uniqueViewers:n}}),tooltip:(0,F.jsx)(i.cC,{id:"aaiIlJ",values:{docCreatedDate:t}}),width:"40%"}),(0,F.jsx)(ne,{label:(0,F.jsx)(i.cC,{id:"pRGfP3"}),width:"35%"}),(0,F.jsx)(ne,{label:(0,F.jsx)(i.cC,{id:"QfqHuz"}),tooltip:(0,F.jsx)(eZ,{timeInMS:r}),width:"25%"})]})})},ne=function(e){var n=e.label,t=e.width,r=e.tooltip,i=(0,F.jsx)(eq.Th,{w:t,children:(0,F.jsx)(S.x,{display:"inline",borderBottom:r?"0.125em dashed":void 0,borderBottomColor:r?"gray.400":void 0,children:n})});return r?(0,F.jsx)(h.kH,{placement:"top",label:r,children:i}):i},nn=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],nt=function(e){var n=e.viewers,t=e.currentViewerFilterCount,r=e.docCreatedDate,i=e.creatorId,o=e.contributors,s=e.cardCount,c=e.handleTableRowClick,a=e.hasIndividualAnalytics,l=(0,L.SE)().user,d=a?n:e5()(n,function(e){var n;return[(null===(n=e.user)||void 0===n?void 0:n.id)===(null==l?void 0:l.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,F.jsx)(eK.x,{children:(0,F.jsxs)(eY.i,{colorScheme:"blackAlpha",children:[(0,F.jsx)(e7,{uniqueViewers:t,docCreatedDate:r}),(0,F.jsx)(eQ.p,{children:d.map(function(e,t){var r=e.user,d=e.lastOpened,u=e.visitorId,f=(null==r?void 0:r.id)===i,h=o.some(function(e){return e.user.id===(null==r?void 0:r.id)}),p=r?r.displayName+(r.id===(null==l?void 0:l.id)?" "+g.ag._({id:"dDUgzP"}):"")||"":g.ag._({id:"VmjbJY"}),x=d?e1()((0,e4.P9)(d)):g.ag._({id:"/JO3xr"}),m={name:p,id:(null==r?void 0:r.id)||u||"",email:null==r?void 0:r.email,isCreator:f,isContributor:h,profileImg:null==r?void 0:r.profileImageUrl,lastOpened:x},j=t===n.length-1,v=(null==r?void 0:r.id)===(null==l?void 0:l.id),b=!a&&!v;return(0,F.jsxs)(eV.Tr,{cursor:"pointer",onClick:function(){return c(m)},_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,F.jsx)(eX.Td,{borderBottom:j?"0 none":void 0,children:(0,F.jsx)(nr,{name:p,email:null==r?void 0:r.email,profileImg:null==r?void 0:r.profileImageUrl,isContributor:h,isCreator:f,isAnonymous:!r})}),(0,F.jsx)(eX.Td,{borderBottom:j?"0 none":void 0,children:b?(0,F.jsx)(S.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:nn[t%nn.length]}):(0,F.jsx)(S.x,{fontSize:"sm",children:x})}),(0,F.jsx)(eX.Td,{borderBottom:j?"0 none":void 0,children:b?(0,F.jsx)(e_,{cardCount:s}):(0,F.jsx)(eT,{cardsViewed:e.cardsViewed||0,totalCards:s||0})})]},(null==r?void 0:r.id)||u)})})]})})},nr=function(e){var n=e.name,t=e.profileImg,r=e.email,o=e.isCreator,s=void 0!==o&&o,c=e.isContributor,a=e.isAnonymous,l=(0,G.Z)(e,e6);return(0,F.jsxs)(er.U,e9(e9({},l),{},{children:[(0,F.jsx)(eJ.q,{size:"sm",name:n,src:t}),(0,F.jsxs)(C.K,{spacing:.5,children:[(0,F.jsxs)(S.x,{children:[n,void 0!==a&&a&&(0,F.jsx)(h.Yq,{label:(0,F.jsx)(i.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}}),ml:2})]}),(0,F.jsxs)(er.U,{mt:1,children:[(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:void 0===r?"":r}),(s||void 0!==c&&c)&&(0,F.jsx)(e$.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:s?(0,F.jsx)(i.cC,{id:"UE2beD"}):(0,F.jsx)(i.cC,{id:"3L51iw"})})]})]})]}))},ni=function(e){var n,t,r,o,s=e.user,c=e.onBackClick,l=e.docId,d=e.onAnalyticsPanelClose,f=(0,eo.qr)().getState(),h=(0,es.X9)(f),x=(0,D.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),m=x.data,j=x.error,v=x.loading,g=x.refetch,C=null!==(n=null==m?void 0:null===(t=m.docCardsStats)||void 0===t?void 0:null===(r=t.everyone)||void 0===r?void 0:r.length)&&void 0!==n?n:0,y=null==m?void 0:null===(o=m.docCardsStats)||void 0===o?void 0:o.cardCount,O=(0,p.useMemo)(function(){var e;return(null==m?void 0:null===(e=m.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==m?void 0:m.docCardsStats]),w=(0,p.useMemo)(function(){return eu(O,"viewTimePercent")},[O]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(K.x,{children:(0,F.jsx)(u.z,{"aria-label":"Back",leftIcon:(0,F.jsx)(eH.R,{}),variant:"ghost",onClick:c,children:(0,F.jsx)(i.cC,{id:"iH8pgl"})})}),(0,F.jsx)(Q.o,{}),(0,F.jsx)(a.i,{}),(0,F.jsx)(b.f,{children:(0,F.jsxs)(k.xu,{children:[(0,F.jsx)(no,{user:s,showLastOpened:!0}),y&&(0,F.jsx)(eW,{description:(0,F.jsx)(i.cC,{id:"YJOrjl",values:{cardsViewed:C,totalCards:y}})}),v&&!j&&(0,F.jsx)(eU,{includeDescription:!0}),j&&(0,F.jsx)(B,{error:j,refetch:g}),!j&&!v&&(0,F.jsx)(eM,{cards:h.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,F.jsx)(i.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(i.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,F.jsx)(eG,{}),onAnalyticsPanelClose:d})]})})]})},no=function(e){var n=e.user,t=e.showLastOpened;return(0,F.jsxs)(er.U,{align:"center",my:6,children:[(0,F.jsx)(nr,{name:n.name,profileImg:n.profileImg,email:n.email,isCreator:n.isCreator,isContributor:n.isContributor,width:t?"50%":void 0}),t&&(0,F.jsxs)(w.g,{align:"flex-start",spacing:0,children:[(0,F.jsx)(h.NZ,{children:(0,F.jsx)(i.cC,{id:"pRGfP3"})}),(0,F.jsx)(S.x,{children:n.lastOpened})]})]})},ns=t(87567),nc=t(47299),na=t(81295),nl=t(26673),nd=t(9088),nu=t(30893),nf=t(40771),nh=t(63849),np=t(2575),nx=function(e,n,t){return"everyone"===e?g.ag._({id:"1IE7uf",values:{everyone:n}}):"viewersOnly"===e?g.ag._({id:"r/tA4Y",values:{viewersOnly:t}}):g.ag._({id:"V9JX7d"})},nm={everyone:na.Nd,viewersOnly:nc.Md,accessLinkOnly:ns.uW},nj=function(e){var n=e.selected,t=e.handleMenuItemChange,r=e.everyoneCount,o=e.viewersOnlyCount;return(0,F.jsxs)(nd.v,{children:[(0,F.jsx)(nu.j,{leftIcon:(0,F.jsx)(f.G,{size:"xs",icon:nm[n]}),as:u.z,size:"md",rightIcon:(0,F.jsx)(f.G,{size:"xs",icon:nl.pt}),children:nx(n,r,o)}),(0,F.jsx)(nf.q,{zIndex:2,maxW:"380px",children:(0,F.jsxs)(nh._,{defaultValue:n,value:n,onChange:function(e){Array.isArray(e)||t(e)},children:[(0,F.jsx)(np.i,{value:"everyone",isDisabled:0===r,children:(0,F.jsxs)(d.k,{align:"center",children:[(0,F.jsx)(f.G,{icon:nm.everyone,size:"xs"}),(0,F.jsxs)(k.xu,{ml:3,children:[(0,F.jsx)(S.x,{children:nx("everyone",r,o)}),(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:(0,F.jsx)(i.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})})]})]})}),(0,F.jsx)(np.i,{value:"viewersOnly",isDisabled:0===o,children:(0,F.jsxs)(d.k,{align:"center",children:[(0,F.jsx)(f.G,{icon:nm.viewersOnly,size:"xs"}),(0,F.jsxs)(k.xu,{ml:3,children:[(0,F.jsx)(S.x,{children:nx("viewersOnly",r,o)}),(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:(0,F.jsx)(i.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})})]})]})}),!1]})})]})},nv=t(46102),ng=t(6802),nb=t(70258),nC=t(80237),ny=t(59309),nO=t(2574),nw=t(92638),nk=t(33951),nS=t(10897),nE=t(14582),nI=t(75715),nP=t(96492),nD=t(14141),nA=t(40837),nT=["chartTitle","TooltipInner","showZero","shouldRoundYValues","showMaxAndMiddle","data","barColor","customTooltipStyles","onClick"];function n_(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nR(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n_(Object(t),!0).forEach(function(n){(0,N.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nz={top:55,right:20,bottom:40,left:24},nL=function(e){return Math.round(e).toString()},nM={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1.5)",paddingLeft:"var(--chakra-space-1.5)",paddingTop:"var(--chakra-space-0.5)",paddingBottom:"var(--chakra-space-0.5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},nN="var(--chakra-colors-gray-500)",nG="var(--chakra-colors-gray-200)",nZ=function(e){var n,t=e.width,r=e.height,i=e.margin,o=void 0===i?nz:i,s=e.chartData,c=e.TooltipInner,a=e.showZero,l=e.shouldRoundYValues,d=e.showMaxAndMiddle,u=e.barColor,f=e.customTooltipStyles,h=e.onClick,x=void 0===h?function(){}:h,j=(0,nP.Z)(),v=j.showTooltip,g=j.tooltipOpen,b=j.tooltipLeft,C=j.tooltipTop,y=j.tooltipData,O=j.hideTooltip,w=(0,p.useRef)(),S=(0,p.useRef)();(0,p.useEffect)(function(){return function(){w.current&&clearTimeout(w.current),S.current&&clearTimeout(S.current)}},[]);var E=s.map(function(e){return e.y}),I=Math.max.apply(Math,(0,m.Z)(E)),P=[I,Math.round(I/2)],D=(n=d?P:E,Math.max.apply(Math,(0,m.Z)(n.map(function(e){return(0,nI.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0})))),A=o.left+D,T=t-A-o.right,_=r-o.top-o.bottom,R=nR(nR(nR({},nD.j),nM),f),z=(0,p.useMemo)(function(){return(0,nw.Z)({range:[0,T],domain:s.map(function(e){return e.x}),padding:.3})},[T,s]),L=(0,p.useMemo)(function(){return(0,nk.Z)({range:[_,0],round:!0,domain:[0,I]})},[_,I]),M=a?L(Math.min.apply(Math,(0,m.Z)(E.filter(function(e){return 0!==e})))):_,N=a&&_-M>6;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k.xu,{children:(0,F.jsxs)("svg",{width:t,height:r,children:[(0,F.jsx)("rect",{x:0,y:0,rx:4,width:t,height:r,fill:"var(--chakra-colors-gray-100)"}),(0,F.jsx)(ny.Z,{top:o.top,left:A,children:s.map(function(e){var n,t,r=e.y,i=e.x,o="bar-".concat(i,"-").concat(r),s=z.bandwidth(),c=_-(null!==(n=L(r))&&void 0!==n?n:0),l=N&&0===c?6:c,d=null!==(t=z(i))&&void 0!==t?t:0,f=_-l;return(0,F.jsxs)(ny.Z,{children:[(0,F.jsx)(nS.Z,{x:d,y:f,width:s,height:l,radius:5,topLeft:!0,topRight:!0,fill:a&&0===r?nG:u,onMouseLeave:function(){w.current=window.setTimeout(function(){O()},300)},onMouseMove:function(n){w.current&&clearTimeout(w.current);var t=(0,nC.Z)(n);v({tooltipData:e,tooltipTop:null==t?void 0:t.y,tooltipLeft:null==t?void 0:t.x})},onClick:function(n){return x(n,e)}}),(0,F.jsx)(nE.Z,{x:d,y:0,width:s,height:Math.max(0,_-l),opacity:0,onMouseLeave:function(){S.current=window.setTimeout(function(){O()},300)},onMouseMove:function(n){S.current&&clearTimeout(S.current);var t=(0,nC.Z)(n);v({tooltipData:e,tooltipTop:null==t?void 0:t.y,tooltipLeft:null==t?void 0:t.x})}})]},o)})}),(0,F.jsx)(ng.Z,{top:o.top,left:A,scale:L,stroke:nG,strokeWidth:2,tickValues:d?P:void 0,numTicks:d?void 0:2,hideZero:!0,tickFormat:l?nL:void 0,tickLength:6,tickStroke:nG,tickLabelProps:function(){return{fill:nN,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4}}}),(0,F.jsx)(nb.Z,{top:_+o.top,left:A,scale:z,stroke:nG,numTicks:4,tickStroke:nG,tickLabelProps:function(){return{fill:nN,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}},strokeWidth:2,tickLength:6})]})}),g&&y&&(0,F.jsx)(nA.Z,{top:C,left:b,style:R,children:(0,F.jsx)(c,{x:y.x,y:y.y})})]})},nF=function(e){var n=e.chartTitle,t=e.TooltipInner,r=e.showZero,i=void 0===r||r,o=e.shouldRoundYValues,s=void 0===o||o,c=e.showMaxAndMiddle,a=void 0===c||c,l=e.data,d=e.barColor,u=void 0===d?"var(--chakra-colors-trueblue-200)":d,f=e.customTooltipStyles,h=e.onClick,p=void 0===h?function(){}:h,x=(0,G.Z)(e,nT);return(0,F.jsxs)(k.xu,nR(nR({position:"relative",height:"300px"},x),{},{children:[(0,F.jsx)(S.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:n}),(0,F.jsx)(nO.Z,{children:function(e){var n=e.width,r=e.height;return n<10?null:(0,F.jsx)(nZ,{width:n,height:r,showZero:i,chartData:l,barColor:u,customTooltipStyles:f,onClick:p,TooltipInner:t,shouldRoundYValues:s,showMaxAndMiddle:a})}})]}))},nU=function(e,n){var t="LLL d",r=new Date;r.setDate(r.getDate()-n+1);for(var i=[],o=0;o<n;o++)!function(n){var o=new Date(r);o.setDate(o.getDate()+n);var s=(0,nv.Z)(o,{representation:"date"}),c=e.find(function(e){return e.date===s});c?i.push({x:(0,A.p6)(c.date,t),y:c.uniqueVisitors?c.uniqueVisitors:0}):i.push({x:(0,A.p6)(s,t),y:0})}(o);return i},nW=function(e){var n=nU(e.viewData,e.dayCount);return(0,F.jsx)(nF,{data:n,my:3,chartTitle:(0,F.jsx)(i.cC,{id:"mSEibf"}),TooltipInner:nH})},nH=function(e){var n=e.x,t=e.y;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S.x,{children:n}),(0,F.jsx)(S.x,{children:(0,F.jsx)(i.cC,{id:"6MKtHx",values:{y:t}})})]})},nB=function(e,n,t){if(!t)return 0;var r,i,o,s=null!==(r=t.uniqueViewers)&&void 0!==r?r:0,c=null!==(i=null===(o=e.editors)||void 0===o?void 0:o.length)&&void 0!==i?i:0;return"everyone"===n?s:"viewersOnly"===n?Math.max(0,s-c):0},nV=function(e){var n,t,r,o=e.doc,s=e.handleSharePanelOpen,c=e.onAnalyticsPanelClose,l=(0,D.xls)({variables:{memoId:o.id},skip:!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),f=l.loading,h=l.data,x=l.error,m=l.refetch,j=(0,L.SE)().user,v=(0,p.useState)("deckView"),O=v[0],w=v[1],k=(0,p.useState)(null),S=k[0],E=k[1],I=(0,p.useState)("everyone"),P=I[0],M=I[1],N=(0,A.p6)(o.createdTime,"PPP"),G=o.title||(0,F.jsx)(i.cC,{id:"wja8aL"}),Z=(null==h?void 0:h.memoStats.viewers)||[],U=(null==h?void 0:null===(t=h.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,W=(n=null==h?void 0:h.memoStats)&&n.dailyViews?"everyone"===P?n.dailyViews.everyone?n.dailyViews.everyone:[]:"viewersOnly"===P&&n.dailyViews.viewers?n.dailyViews.viewers:[]:[],H=(0,T.Y)("individual_analytics",o.organization),V=(0,R.zc)().openUpsellModal,q=W.every(function(e){return 0===e.uniqueVisitors}),K=Z.filter(function(e){var n;return"everyone"===P||!(null!==(n=o.editors)&&void 0!==n&&n.some(function(n){var t,r;return(null===(t=e.user)||void 0===t?void 0:t.id)===(null===(r=n.user)||void 0===r?void 0:r.id)}))}),Y=nB(o,P,null==h?void 0:h.memoStats),Q=(0,p.useCallback)(function(e){M(e)},[]),ee=(0,p.useCallback)(function(e){w(e)},[]),en=(0,p.useCallback)(function(e){if(!H&&e.id!==(null==j?void 0:j.id)){V({segmentEvent:z.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}E(e)},[V,H,j]),et=(0,p.useCallback)(function(){E(null)},[]),er=void 0!==x;return(0,F.jsxs)(F.Fragment,{children:[S&&(0,F.jsx)(ni,{user:S,onBackClick:et,docId:o.id,onAnalyticsPanelClose:c}),!S&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($,{hasError:er,isAnalyticsLoading:f,setView:ee,view:O,description:(0,F.jsx)(i.cC,{id:"uEtUah",values:{docTitle:G,docCreatedDate:N}})}),er&&(0,F.jsx)(B,{error:x,refetch:m}),!er&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(a.i,{}),(0,F.jsxs)(b.f,{children:[f&&(0,F.jsx)(nq,{}),!f&&Z.length<=1&&(0,F.jsx)(nK,{handleSharePanelOpen:s}),!f&&(0,F.jsxs)(C.K,{direction:"column",mt:4,spacing:4,children:[(0,F.jsxs)(d.k,{direction:"row",justify:"space-between",align:"center",children:[(0,F.jsx)(y.X,{as:"h2",size:"md",children:"cardEngagement"===O?J():X()}),(0,F.jsx)(nj,{selected:P,handleMenuItemChange:Q,everyoneCount:nB(o,"everyone",null==h?void 0:h.memoStats),viewersOnlyCount:nB(o,"viewersOnly",null==h?void 0:h.memoStats)})]}),"deckView"===O&&q&&(0,F.jsx)(nY,{handleSharePanelOpen:s,dayCount:U}),"deckView"===O&&!q&&(0,F.jsx)(nW,{viewData:W,dayCount:U}),"cardEngagement"===O&&(0,F.jsx)(eF,{docId:o.id,viewerFilter:P,currentViewerFilterCount:Y,onAnalyticsPanelClose:c}),(0,F.jsx)(nt,{creatorId:(null===(r=o.createdBy)||void 0===r?void 0:r.id)||"",viewers:K,currentViewerFilterCount:Y,docCreatedDate:N,contributors:o.editors||[],cardCount:(null==h?void 0:h.memoStats.cardCount)||0,handleTableRowClick:en,hasIndividualAnalytics:H}),K.length>3&&!H&&(0,F.jsx)(u.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:function(){return V({segmentEvent:z.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS})},children:(0,F.jsx)(i.cC,{id:"BKBX4n",values:{0:K.length-3}})}),!H&&(0,F.jsx)(_.m,{segmentEvent:z.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:g.ag._({id:"GYgPBy"})})]})]})]})]})]})},nq=function(){return(0,F.jsxs)(d.k,{direction:"column",py:2,children:[(0,F.jsx)(O.O,{h:10,width:"40%",mb:4}),(0,F.jsx)(O.O,{h:40,mb:4}),(0,F.jsx)(w.g,{align:"stretch",children:(0,m.Z)([,,,]).map(function(e,n){return(0,F.jsx)(O.O,{h:12},n)})})]})},nK=function(e){var n=e.handleSharePanelOpen;return(0,F.jsx)(d.k,{p:3,px:4,mt:2,bg:"gray.100",color:M,borderRadius:"base",children:(0,F.jsxs)(d.k,{align:"baseline",fontSize:"sm",children:[(0,F.jsx)(k.xu,{pr:2,children:(0,F.jsx)(f.G,{icon:v.IL,"aria-label":"user-icon",size:"sm"})}),(0,F.jsx)(S.x,{children:(0,F.jsx)(i.cC,{id:"FNMh4I",components:{0:(0,F.jsx)(S.x,{as:"button",onClick:n,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},nY=function(e){var n=e.handleSharePanelOpen,t=e.dayCount;return(0,F.jsxs)(E.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,F.jsx)(k.Cd,{size:"30px",bg:"gray.500",children:(0,F.jsx)(f.G,{icon:j.Im,color:"white"})}),(0,F.jsx)(I.C,{mt:4,mb:2,fontSize:"md",children:(0,F.jsx)(i.cC,{id:"2OzAI5"})}),t>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(P.X,{maxWidth:"sm",children:(0,F.jsx)(i.cC,{id:"qQLmo7",values:{dayCount:t}})}),(0,F.jsx)(u.z,{mt:4,onClick:n,children:(0,F.jsx)(i.cC,{id:"IXzWG0"})})]})]})},nQ=function(e){var n,t,r,o,s,c,l=e.doc,d=e.onAnalyticsPanelClose,u=(0,eo.qr)().getState(),f=(0,es.X9)(u),h=(0,L.SE)().user,x=(0,D.IrH)({variables:{docId:l.id,userId:null==h?void 0:h.id},skip:!(null!=h&&h.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),m=x.data,j=x.error,v=x.loading,g=x.refetch,C=null!==(n=null==m?void 0:null===(t=m.docCardsStats)||void 0===t?void 0:null===(r=t.everyone)||void 0===r?void 0:r.length)&&void 0!==n?n:0,y=null==m?void 0:null===(o=m.docCardsStats)||void 0===o?void 0:o.cardCount,O=(0,p.useMemo)(function(){var e;return(null==m?void 0:null===(e=m.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==m?void 0:m.docCardsStats]),w=(0,p.useMemo)(function(){return eu(O,"viewTimePercent")},[O]);if(!h)return null;var I=h.id===(null===(s=l.createdBy)||void 0===s?void 0:s.id),P=null===(c=l.editors)||void 0===c?void 0:c.some(function(e){return e.user.id===h.id}),A={name:h.displayName,id:h.id,profileImg:h.profileImageUrl,email:h.email,isContributor:P,isCreator:I};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(K.x,{children:[(0,F.jsx)(i.cC,{id:"ZlwDi6"}),(0,F.jsx)(S.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,F.jsx)(i.cC,{id:"wja8aL"})})]}),(0,F.jsx)(Q.o,{}),(0,F.jsx)(a.i,{}),(0,F.jsx)(b.f,{children:(0,F.jsxs)(k.xu,{children:[(0,F.jsx)(no,{user:A}),void 0!==y&&(0,F.jsx)(eW,{description:(0,F.jsx)(i.cC,{id:"YJOrjl",values:{cardsViewed:C,totalCards:y}})}),v&&!j&&(0,F.jsx)(eU,{includeDescription:!0}),j&&(0,F.jsx)(B,{error:j,refetch:g,px:0}),!j&&!v&&(0,F.jsx)(eM,{cards:f.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,F.jsx)(i.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(i.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,F.jsx)(eG,{}),onAnalyticsPanelClose:d}),(0,F.jsxs)(E.b,{children:[(0,F.jsx)(Z.z,{}),(0,F.jsx)(i.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:e3.N6,GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})]})]})})]})},nX=function(e){var n=e.doc,t=e.mode,m=e.isAnalyticsPanelOpen,j=e.onAnalyticsPanelClose,v=e.onSharePanelOpen,g=(0,x.i)({base:"sm",md:"2xl",lg:"4xl"}),b=(0,p.useCallback)(function(){v&&(v(),j())},[v,j]);return(0,F.jsx)(h.Wk,{isDark:!1,children:(0,F.jsxs)(o.u_,{onClose:j,isOpen:m,size:g,blockScrollOnMount:!1,children:[(0,F.jsx)(s.Z,{}),(0,F.jsxs)(c.h,{children:["full"===t?(0,F.jsx)(nV,{doc:n,handleSharePanelOpen:b,onAnalyticsPanelClose:j}):(0,F.jsx)(nQ,{doc:n,onAnalyticsPanelClose:j}),(0,F.jsx)(a.i,{my:4}),(0,F.jsx)(l.m,{children:(0,F.jsxs)(d.k,{justifyContent:"full"===t?"space-between":"flex-end",flex:1,children:["full"===t&&(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:r.zB}),variant:"ghost",onClick:b,children:(0,F.jsx)(i.cC,{id:"IXzWG0"})}),(0,F.jsx)(u.z,{variant:"solid",onClick:j,children:(0,F.jsx)(i.cC,{id:"DPfwMq"})})]})})]})]})})}},87796:function(e,n,t){t.d(n,{U:function(){return i},V:function(){return o}});var r=t(95148),i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?e||"Untitled":e?"".concat(e," | Gamma"):"Gamma"},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||(n?"":r.D)}},21061:function(e,n,t){t.d(n,{Av:function(){return S},U8:function(){return k}});var r=t(95235),i=t(393),o=t(11919),s=t(2784),c=t(43997),a=t(58118),l=t(46358),d=t(13720),u=t(72043),f=t(53738),h=t(12436),p=t.n(h),x=t(73062),m=t(52322);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var g=function(e){var n=e.setWidth,t=e.width,r=e.position,i=e.onClose,c=e.panelRef,l=e.initialWidth,d=e.isDragging,u=e.setIsDragging,h=(0,s.useMemo)(function(){return(0,x.n)()},[])>0&&"right"===r,j=(0,s.useState)(t),g=j[0],b=j[1],C=(0,s.useState)(null),y=C[0],O=C[1],w=p()(function(e){var n,t=Math.min(Math.max(n="left"===r?e.clientX:-((e.clientX-y)*1)+g,a.pn),a.ZQ);n<=a.Nh?(c.current.style.transitionProperty="width",c.current.style.transitionDuration="var(--chakra-transition-duration-normal)",t=0):t>a.pn&&(c.current.style.transitionProperty="",c.current.style.transitionDuration=""),c.current.style.width="".concat(t,"px")},30),k=function e(){u(!1),O(null);var t=c.current.style.width;"0px"===t?(i(),n(l)):n(parseInt(t.replace("px",""),10)),c.current.style.transitionProperty="",c.current.style.transitionDuration="",window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",e)};(0,s.useEffect)(function(){return y&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",k)),function(){window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",k)}},[y]);var S={};return S="left"===r?{right:-4,position:"absolute"}:h?{position:"relative"}:{left:-4,position:"absolute"},(0,m.jsx)(o.k,v(v({h:"100%",bg:h?"gray.200":d?"blackAlpha.200":"rgba(0,0,0,0)",w:h?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:h?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:function(e){e.preventDefault(),u(!0),O(e.clientX),b(t)},position:"absolute",display:["none","none","none","flex"]},S),{},{children:!h&&(0,m.jsx)(f.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:d?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})}))},b=t(59115);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var O={ifPanelHasRoomToOpen:function(e,n){return{base:n,xl:e}}},w=function(e){var n,t=e.position,f=e.panelLifecycle,h=(0,s.useRef)(),p=(0,s.useState)(!1),x=p[0],j=p[1],v=(0,c.I0)(),C=(0,l.CG)((0,b.SL)(t)),w=(0,l.CG)((0,b.Fw)(t)),k=(0,l.CG)((0,b.CO)(t)),S=(0,l.CG)((0,b.eh)(t)),E=null!==(n=null==S?void 0:S.canCollapse)&&void 0!==n&&n,I=(0,s.useCallback)(function(){v((0,b.sR)({position:t}))},[v,t]),P=(0,s.useCallback)(function(){v((0,b.Yp)({component:S}))},[S,v]),D=(0,s.useCallback)(function(e){v((0,b.UG)({width:e,position:t})),f.emit("resize",{})},[v,f,t]),A=(0,r.Z)({zIndex:Number((0,i.dQ)("zIndices","overlay"))+1,position:O.ifPanelHasRoomToOpen("relative","fixed"),height:"100%",top:0,bottom:0},t,0);w||x||(A.transitionProperty="width",A.transitionDuration="normal"),(0,s.useEffect)(function(){var e=function(e){"width"===e.propertyName&&f.emit("resize",{})};return h.current.addEventListener("transitionend",e),function(){h.current&&h.current.removeEventListener("transitionend",e)}},[f,h]);var T=(0,d.i)(O.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,s.useEffect)(function(){C&&!T&&E&&I()},[T,C,I,E]),(0,m.jsxs)(o.k,y(y({ref:h},A),{},{style:{width:C||E?k:0},maxW:"100%","data-print-hidden":!0,children:[C&&"right"===t&&(0,m.jsx)(g,{isDragging:x,setIsDragging:j,position:t,width:k,setWidth:D,panelRef:h,onClose:I,initialWidth:a.Ld}),(0,m.jsx)(u.Mn.Provider,{value:f,children:S&&(C||E)&&(0,m.jsx)(S,{isDragging:x,isOpen:C,closePanel:I,openPanel:P,panelRef:h,lifecycle:f,hasRoomToOpen:T})}),C&&"left"===t&&(0,m.jsx)(g,{isDragging:x,setIsDragging:j,position:t,width:k,setWidth:D,panelRef:h,onClose:I,initialWidth:a.X9})]}))},k=(0,s.memo)(function(e){return(0,m.jsx)(w,y({position:"right"},e))});k.displayName="RightPanelContainer";var S=(0,s.memo)(function(e){return(0,m.jsx)(w,y({position:"left"},e))});S.displayName="LeftPanelContainer"},53923:function(e,n,t){t.d(n,{Pp:function(){return d},UV:function(){return l},Xy:function(){return u},nO:function(){return a}});var r=t(2784),i=t(43997),o=t(46358),s=t(72043),c=t(59115),a=function(){return(0,o.CG)((0,c.CO)("left"))},l=function(){return(0,o.CG)((0,c.CO)("right"))},d=function(e){var n=e.panelPosition,t=(0,i.I0)(),s=(0,o.CG)((0,c.OC)(e)),a=(0,r.useCallback)(function(){t((0,c.uJ)({component:e}))},[e,t]);return{togglePanel:(0,r.useCallback)(function(r){var i=!s;(null==r?void 0:r.override)==="open"?i=!0:(null==r?void 0:r.override)==="closed"&&(i=!1),i?t((0,c.Yp)({component:e,disableTransition:!!(null==r?void 0:r.disableTransition)})):t((0,c.sR)({position:n}))},[e,n,s,t]),initPanel:a,isPanelOpen:s}},u=function(){var e=(0,r.useMemo)(function(){return new s.st},[]),n=(0,r.useMemo)(function(){return new s.st},[]),t=(0,r.useMemo)(function(){return new s.st},[]);return(0,r.useEffect)(function(){if(t&&e&&n){var r=e.pipe(t),i=n.pipe(t);return function(){r(),i()}}},[e,n,t]),{leftPanelLifecycle:e,rightPanelLifecycle:n,globalPanelLifecycle:t}}},89458:function(e,n,t){t.d(n,{T:function(){return B}});var r=t(20406),i=t(81333),o=t(28526),s=t.n(o),c=t(55452),a=t(87254),l=t(55479),d=t(75944),u=t(71354),f=t(76360),h=t(75342),p=t(2046),x=t(70287),m=t(8283),j=t(27777),v=t(45650),g=t(55966),b=t(2784),C=t(23313),y=t(20010),O=t(56915),w=t(48273),k=t(92619),S=t(91012),E=t(2167),I=t(80353),P=t(76648),D=t(52322),A=function(e){var n=e.onClose,t=e.domainName,r=e.onDelete,i=e.isDeleting;return(0,D.jsxs)(y.u_,{isOpen:!0,onClose:n,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,D.jsx)(O.Z,{}),(0,D.jsxs)(w.h,{children:[(0,D.jsx)(k.x,{children:(0,D.jsx)(u.K,{spacing:0,children:(0,D.jsx)(S.x,{children:(0,D.jsx)(c.cC,{id:"T3exbL",values:{domainName:t}})})})}),(0,D.jsx)(E.f,{children:(0,D.jsx)(u.K,{spacing:4,children:(0,D.jsx)(S.x,{children:(0,D.jsx)(c.cC,{id:"DkFGZj"})})})}),(0,D.jsx)(I.m,{children:(0,D.jsxs)(P.h,{children:[(0,D.jsx)(v.z,{isDisabled:i,variant:"ghost",colorScheme:"gray",onClick:n,children:(0,D.jsx)(c.cC,{id:"dEgA5A"})}),(0,D.jsx)(v.z,{variant:"ghost",colorScheme:"red",isLoading:i,onClick:r,loadingText:a.ag._({id:"EF2EU9"}),children:(0,D.jsx)(c.cC,{id:"cnGeoo"})})]})})]})]})},T=t(12662),_=t(40130),R=t(31145),z=t(4036),L=t(84103),M=t(93319),N=t(67887),G=t(49929),Z=t(42879),F={pending:{tooltip:(0,D.jsx)(c.cC,{id:"/BjVEU"}),badgeText:(0,D.jsx)(c.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,D.jsx)(c.cC,{id:"7Bj3x9"}),badgeText:(0,D.jsx)(c.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},U=function(e){var n=e.status,t=e.onClick;if("verified"===n)return null;var r=F[n],i=r.tooltip,o=r.badgeText,s=r.badgeColorScheme;return(0,D.jsx)(g.kH,{label:i,placement:"top",children:(0,D.jsx)(z.C,{display:"flex",justifyContent:"center",colorScheme:s,cursor:t?"pointer":"default",onClick:t||void 0,children:o})})},W=function(e){var n=e.domain,t=e.onDomainSetupClick,o=e.path,d=e.onDeleteClick,u=e.numDomains,p=(0,Z.mn)({domain:n,path:o}),x=(0,l.p)(),j="verified"!==n.status||"verified"===n.status&&u>1,y=(0,C.NEQ)(),O=(0,i.Z)(y,1)[0],w=(0,b.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({variables:{id:n.id}});case 2:x({title:(0,D.jsx)(c.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0});case 3:case"end":return e.stop()}},e)})),[O,n.id,x]);return(0,D.jsx)(f.Z,{children:(0,D.jsx)(h.e,{children:(0,D.jsxs)(m.U,{children:["verified"===n.status?(0,D.jsx)(g.kH,{label:p,placement:"top",children:(0,D.jsx)(v.z,{as:L.r,variant:"link",href:p,target:"_blank",rightIcon:(0,D.jsx)(G.G,{icon:R.faArrowUpRightFromSquare}),children:n.name})}):(0,D.jsx)(S.x,{children:n.name}),(0,D.jsx)(M.L,{}),(0,D.jsx)(U,{status:n.status,onClick:"failed"===n.status?w:null}),(0,D.jsxs)(P.h,{children:[(0,D.jsx)(g.kH,{label:(0,D.jsx)(c.cC,{id:"UqSZMD"}),placement:"top",children:(0,D.jsx)(N.h,{onClick:function(){t(n.name)},"aria-label":a.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,D.jsx)(G.G,{icon:_.faCircleInfo})})}),j&&(0,D.jsx)(g.kH,{label:(0,D.jsx)(c.cC,{id:"C2YqXi"}),placement:"top",children:(0,D.jsx)(N.h,{onClick:function(){d(null==n?void 0:n.id)},"aria-label":a.ag._({id:"C2YqXi"}),size:"sm",variant:"ghost",colorScheme:"red",icon:(0,D.jsx)(G.G,{icon:T.faTrashCan})})})]})]})})})},H=t(34860),B=function(e){var n,t=e.site,o=e.path,y=e.onDomainSetupClick,O=e.onAddDomain,w=e.isAddingDomain,k=e.refetchSites,S=(0,l.p)(),E=(0,b.useState)(),I=E[0],P=E[1],T=(0,b.useState)(""),_=T[0],R=T[1],z=(0,d.q)({id:"delete-domain-modal"}),L=z.isOpen,M=z.onOpen,N=z.onClose,G=t.domains.find(function(e){return e.id===I}),F=(0,Z.m6)(_),U=(0,C.Yqv)(),B=(0,i.Z)(U,2),V=B[0],q=B[1].loading,K=(0,b.useState)(void 0),Y=K[0],Q=K[1];(0,H.vm)(function(){I?Q(null==G?void 0:G.name):Q(void 0)},[I,null==G?void 0:G.name],[I]);var X=(0,b.useCallback)(function(){N(),P(function(){})},[N]),J=(0,b.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V({variables:{id:I}});case 4:return e.next=6,k();case 6:S({title:(0,D.jsx)(c.cC,{id:"V4fbcv",values:{0:G.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),X();case 8:case"end":return e.stop()}},e)})),[k,V,I,G,X,S]);return(0,D.jsxs)(u.K,{spacing:4,children:[(0,D.jsx)(f.Z,{variant:"filled",children:(0,D.jsx)(h.e,{children:(0,D.jsxs)(u.K,{spacing:4,children:[(0,D.jsxs)(p.NI,{children:[(0,D.jsx)(x.l,{children:(0,D.jsx)(c.cC,{id:"AZ4xlc"})}),(0,D.jsxs)(m.U,{children:[(0,D.jsx)(j.I,{bg:"white",placeholder:(null==t?void 0:null===(n=t.domains)||void 0===n?void 0:n.length)?a.ag._({id:"B6e4xs"}):a.ag._({id:"1y9z1r"}),value:_,onChange:function(e){return R(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&F&&(e.preventDefault(),O(_),R(""))}}),(0,D.jsx)(u.K,{children:(0,D.jsx)(g.kH,{label:(0,D.jsx)(c.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:F,children:(0,D.jsx)(v.z,{isDisabled:!F,variant:"plain",onClick:function(){O(_),R("")},isLoading:w,children:(0,D.jsx)(c.cC,{id:"EdEpYN"})})})})]})]}),t.domains.map(function(e){return(0,D.jsx)(W,{domain:e,onDomainSetupClick:y,path:o,onDeleteClick:function(e){P(e),M()},numDomains:t.domains.length||0},e.id)})]})})}),L&&(0,D.jsx)(A,{onClose:X,onDelete:J,domainName:Y,isDeleting:q})]})}},74995:function(e,n,t){t.d(n,{w:function(){return W}});var r,i=t(60697),o=t(55452),s=t(55479),c=t(20010),a=t(56915),l=t(48273),d=t(92619),u=t(64827),f=t(2167),h=t(76360),p=t(75342),x=t(71354),m=t(91012),j=t(11919),v=t(45650),g=t(8283),b=t(40110),C=t(74642),y=t(73851),O=t(36258),w=t(19875),k=t(35319),S=t(27912),E=t(72360),I=t(48322),P=t(35837),D=t(58499),A=t(80353),T=t(49929),_=t(55966),R=t(2784),z=t(34860),L=t(85041),M=t(20406),N=t(28526),G=t.n(N),Z=t(42879),F=(r=(0,M.Z)(G().mark(function e(n){var t,r,i,o,s;return G().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/domains/connectToken").then(function(e){return e.json()}).then(function(e){if(!e.auth_token)throw Error("No auth token returned");return e.auth_token});case 2:if(t=e.sent,window.entri){e.next=5;break}throw Error("Entri not found");case 5:return i=(r=(0,Z.Yd)(n)).domain,o=r.dnsRecords,console.log("[launchEntri] Launching Entri with config",s={applicationId:"gamma",token:t,prefilledDomain:i,dnsRecords:o}),window.entri.showEntri(s),e.abrupt("return",new Promise(function(e,n){var t=function t(r){console.log("onEntriClose: event",r),window.removeEventListener("onEntriClose",t),r.detail.success?e(r.detail):n(r.detail)};window.addEventListener("onEntriClose",t,!1)}));case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),U=t(52322),W=function(e){var n=e.isOpen,t=e.onClose,r=e.domainName,M=e.onDomainConfirmed,N=(0,R.useState)("initial"),G=N[0],W=N[1],H=(0,R.useRef)(!1),B=(0,R.useState)(function(){return void 0!==window.entri}),V=B[0],q=B[1],K=(0,R.useState)(!1),Y=K[0],Q=K[1],X=(0,s.p)();(0,z.Gq)(L.oc,{predicate:function(){return void 0===window.entri},onload:function(){q(!0),H.current=!0}});var J=(0,R.useMemo)(function(){return(0,Z.Yd)(r||"")},[r]),$=J.dnsRecords,ee=J.isRootDomain,en=J.subdomain;return(0,U.jsx)(_.Wk,{isDark:!1,children:(0,U.jsxs)(c.u_,{isOpen:n,onClose:t,size:"3xl",children:[(0,U.jsx)(a.Z,{}),(0,U.jsxs)(l.h,{children:[(0,U.jsx)(d.x,{children:(0,U.jsx)(o.cC,{id:"xQMU8T",values:{domainName:r}})}),(0,U.jsx)(u.o,{}),(0,U.jsxs)(f.f,{children:["initial"===G&&(0,U.jsx)(h.Z,{variant:"filled",children:(0,U.jsx)(p.e,{children:(0,U.jsxs)(x.K,{spacing:4,py:4,mx:"auto",children:[(0,U.jsxs)(x.K,{spacing:2,children:[(0,U.jsxs)(x.K,{spacing:1,children:[(0,U.jsx)(m.x,{textAlign:"center",fontSize:"2xl",children:(0,U.jsx)(T.G,{icon:i.g4,size:"lg"})}),(0,U.jsx)(m.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,U.jsx)(o.cC,{id:"w5l5pM"})})]}),(0,U.jsx)(m.x,{textAlign:"center",maxW:"unset",children:(0,U.jsx)(o.cC,{id:"MhdvBQ"})})]}),(0,U.jsx)(j.k,{align:"center",justify:"center",w:"100%",children:(0,U.jsxs)(x.K,{w:64,maxW:"100%",children:[(0,U.jsx)(v.z,{size:"md",variant:"solid",isDisabled:!V,isLoading:Y,onClick:function(){r&&(Q(!0),F(r).then(function(e){console.log("[ENTRI] Successfully setup domain",e),X({title:(0,U.jsx)(o.cC,{id:"p8Oc6N"}),description:(0,U.jsx)(o.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),null==M||M(r)}).catch(function(e){X({title:(0,U.jsx)(o.cC,{id:"l/2jzv"}),description:e.message,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(function(){Q(!1)}))},children:(0,U.jsx)(o.cC,{id:"qu+sXe"})}),(0,U.jsxs)(g.U,{children:[(0,U.jsx)(b.i,{}),(0,U.jsx)(m.x,{color:"gray.600",children:(0,U.jsx)(o.cC,{id:"BzEFor"})}),(0,U.jsx)(b.i,{})]}),(0,U.jsx)(v.z,{size:"md",variant:"plain",onClick:function(){W("manualSetup")},children:(0,U.jsx)(o.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===G&&(0,U.jsx)(h.Z,{variant:"filled",children:(0,U.jsx)(p.e,{children:(0,U.jsxs)(x.K,{spacing:6,children:[(0,U.jsx)(m.x,{fontWeight:"semibold",fontSize:"lg",children:(0,U.jsx)(o.cC,{id:"L5N7HX"})}),(0,U.jsxs)(C.i,{variant:"simple",children:[(0,U.jsx)(y.h,{children:(0,U.jsxs)(O.Tr,{children:[(0,U.jsx)(w.Th,{children:(0,U.jsx)(o.cC,{id:"6YtxFj"})}),(0,U.jsx)(w.Th,{children:(0,U.jsx)(o.cC,{id:"+zy2Nq"})}),(0,U.jsx)(w.Th,{isNumeric:!0,children:(0,U.jsx)(o.cC,{id:"HKH+W+"})})]})}),(0,U.jsx)(k.p,{children:($||[]).map(function(e){return(0,U.jsxs)(O.Tr,{children:[(0,U.jsx)(S.Td,{fontFamily:"mono",children:e.host}),(0,U.jsx)(S.Td,{fontFamily:"mono",children:e.type}),(0,U.jsx)(S.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value)})})]}),(0,U.jsxs)(E.b,{status:"info",colorScheme:"orange",children:[(0,U.jsx)(I.z,{}),(0,U.jsxs)(x.K,{children:[(0,U.jsx)(m.x,{fontWeight:"bold",fontSize:"md",children:(0,U.jsx)(o.cC,{id:"NxHkkp"})}),(0,U.jsxs)(P.GS,{pl:"4",spacing:"2",children:[ee?1===L.Co.length?(0,U.jsx)(P.HC,{children:(0,U.jsx)(o.cC,{id:"YMrXdT",values:{0:L.Co[0]},components:{0:(0,U.jsx)(D.E,{colorScheme:"gray"}),1:(0,U.jsx)(D.E,{colorScheme:"gray"}),2:(0,U.jsx)(D.E,{colorScheme:"gray"})}})}):(0,U.jsx)(P.HC,{children:(0,U.jsx)(o.cC,{id:"FM+LNW",values:{0:L.Co.slice(0,-1).map(function(e){return(0,U.jsx)(D.E,{colorScheme:"gray",children:e},e)}),1:L.Co.slice(-1)[0]},components:{0:(0,U.jsx)(D.E,{colorScheme:"gray"}),1:(0,U.jsx)(g.U,{display:"inline",divider:(0,U.jsx)("span",{children:", "})}),2:(0,U.jsx)(D.E,{colorScheme:"gray"}),3:(0,U.jsx)(D.E,{colorScheme:"gray"})}})}):null,(0,U.jsx)(P.HC,{children:(0,U.jsx)(o.cC,{id:"Jmb6Yp",values:{subdomain:en,GAMMA_SITES_HOST:L.ax},components:{0:(0,U.jsx)(D.E,{colorScheme:"gray"}),1:(0,U.jsx)(D.E,{colorScheme:"gray"}),2:(0,U.jsx)(D.E,{colorScheme:"gray"})}})})]})]})]}),M&&(0,U.jsxs)(g.U,{justifyContent:"space-between",children:[(0,U.jsx)(v.z,{variant:"plain",onClick:function(){return W("initial")},children:(0,U.jsx)(o.cC,{id:"iH8pgl"})}),(0,U.jsx)(v.z,{variant:"solid",onClick:function(){t(),null==M||M(r)},size:"md",mx:"auto",children:(0,U.jsx)(o.cC,{id:"RyhVuk"})})]})]})})})]}),(0,U.jsx)(A.m,{})]})]})})}},97873:function(e,n,t){t.d(n,{q:function(){return w}});var r=t(95235),i=t(20406),o=t(81333),s=t(31145),c=t(76035),a=t(28526),l=t.n(a),d=t(55452),u=t(55479),f=t(53738),h=t(8283),p=t(91012),x=t(45650),m=t(97907),j=t(49929),v=t(2784),g=t(21010),b=t(42879),C=t(52322);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=function(e){var n,t,r,a,y=e.doc,w=e.site,k=e.path,S=(0,u.p)(),E=(0,g.zU5)(),I=(0,o.Z)(E,1)[0],P=(0,g.sIg)(),D=(0,o.Z)(P,1)[0],A=(0,g.odt)(),T=(0,o.Z)(A,1)[0],_=(0,g.L24)(),R=(0,o.Z)(_,1)[0],z=(0,g.kui)(),L=(0,o.Z)(z,2),M=L[0],N=L[1].loading,G=(0,g.V$$)(),Z=(0,o.Z)(G,2),F=Z[0],U=Z[1].loading,W=null==y?void 0:y.id,H=null==y?void 0:null===(r=y.organization)||void 0===r?void 0:r.id,B=(0,b.mn)({domain:null==w?void 0:null===(a=w.domains)||void 0===a?void 0:a[0],path:k}),V=null==w?void 0:w.id,q=(0,v.useCallback)((0,i.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,b.iL)(W);case 4:return e.next=6,D({variables:{id:W},update:function(e,n){var t=n.data,r=null==t?void 0:t.publishDoc;r&&e.updateQuery({query:g.yE1,variables:{id:r.id}},function(e){var n;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null!=e&&e.doc)?{doc:O(O({},e.doc),{},{publishedTime:r.publishedTime,publishedSnapshotId:null===(n=r.publishedSnapshot)||void 0===n?void 0:n.id})}:e})}}).then(function(){S({render:function(){return(0,C.jsx)(f.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,C.jsxs)(h.U,{spacing:4,children:[(0,C.jsx)(f.xu,{children:(0,C.jsx)(j.G,{icon:c.faCircleCheck})}),(0,C.jsx)(p.x,{fontWeight:"semibold",children:"Your changes have been published."}),B&&(0,C.jsx)(x.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:B,rightIcon:(0,C.jsx)(j.G,{icon:s.faArrowUpRightFromSquare}),children:"View site"}),(0,C.jsx)(m.P,{onClick:function(){return S.closeAll()}})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)});case 6:case"end":return e.stop()}},e)})),[W,D,S,B]);return{publishSite:(0,v.useCallback)((0,i.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return");case 2:if(!W){e.next=5;break}return e.next=5,(0,b.iL)(W);case 5:return e.next=7,I({variables:{id:V},update:function(e,n){var t=n.data,r=null==t?void 0:t.publishSite;r&&r.routes.forEach(function(n){e.updateQuery({query:g.yE1,variables:{id:n.docId}},function(e){var t,r,i;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null!=e&&e.doc)?{doc:O(O({},e.doc),{},{publishedTime:null===(t=n.doc)||void 0===t?void 0:t.publishedTime,publishedSnapshotId:null===(r=n.doc)||void 0===r?void 0:r.publishedSnapshotId,currentSnapshotId:null===(i=n.doc)||void 0===i?void 0:i.currentSnapshotId})}:e})})}}).then(function(){S({render:function(){return(0,C.jsx)(f.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,C.jsxs)(h.U,{spacing:4,children:[(0,C.jsx)(f.xu,{children:(0,C.jsx)(j.G,{icon:c.faCircleCheck})}),(0,C.jsx)(p.x,{fontWeight:"semibold",children:"Your changes have been published."}),B&&(0,C.jsx)(x.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:B,rightIcon:(0,C.jsx)(j.G,{icon:s.faArrowUpRightFromSquare}),children:"View site"}),(0,C.jsx)(m.P,{onClick:function(){return S.closeAll()}})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)});case 7:case"end":return e.stop()}},e)})),[V,W,I,S,B]),publishDoc:q,addDomain:(0,v.useCallback)((n=(0,i.Z)(l().mark(function e(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!V||!W)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,M({variables:{input:{siteId:V,name:n}},refetchQueries:["GetSites","GetDoc"]});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error adding domain:",e.t0),S({status:"error",title:(0,C.jsx)(d.cC,{id:"HugOMA"}),isClosable:!0,position:"top"});case 11:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return n.apply(this,arguments)}),[M,W,V,S]),isAddingDomain:N,createSite:(0,v.useCallback)((t=(0,i.Z)(l().mark(function e(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=2;break}return e.abrupt("return");case 2:F({variables:{input:{workspaceId:H,name:n,domains:[{name:n}],routes:[]}},refetchQueries:["GetSites","GetDoc"]}).catch(function(e){console.error("Error creating site:",e.message)});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[W,H,F]),isCreatingSite:U,unpublishDoc:(0,v.useCallback)((0,i.Z)(l().mark(function e(){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!V||!W)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R({variables:{id:W},update:function(e,n){var t=n.data,r=null==t?void 0:t.unpublishDoc;r&&e.updateQuery({query:g.yE1,variables:{id:r.id}},function(e){return null!=e&&e.doc?{doc:O(O({},e.doc),{},{publishedSnapshotId:null})}:e})}}).then(function(){return T({variables:{input:{siteId:V,routes:(0,b.kj)({docId:W,routes:(null==w?void 0:w.routes)||[],path:null})}}})}).then(function(){S({description:null!=w&&w.name?(0,C.jsx)(d.cC,{id:"Qv0Wgn",values:{0:null==w?void 0:w.name}}):(0,C.jsx)(d.cC,{id:"3fkTmP"}),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"uMOlnl"}),status:"error",position:"top",isClosable:!0}),console.error("Error unpublishing site:",e.message)});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)})),[V,W,R,null==w?void 0:w.routes,null==w?void 0:w.name,T,S]),updateRoutes:(0,v.useCallback)((0,i.Z)(l().mark(function e(){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!W||!V)){e.next=2;break}return e.abrupt("return");case 2:return n=(0,b.kj)({routes:(null==w?void 0:w.routes)||[],docId:W,path:k}),e.next=5,T({variables:{input:{siteId:V,routes:n}}});case 5:case"end":return e.stop()}},e)})),[T,W,null==w?void 0:w.routes,V,k])}}},18066:function(e,n,t){t.d(n,{y:function(){return _}});var r=t(2885),i=t(49626),o=t(55452),s=t(72360),c=t(48322),a=t(53738),l=t(66724),d=t(18751),u=t(71354),f=t(91012),h=t(93319),p=t(45650),x=t(49929),m=t(2784),j=t(23313),v=t(75085),g=t(53865),b=t(16686),C=t(52322),y=function(e){var n=e.openThemeEditor;return(0,C.jsxs)(u.K,{bg:"gray.100",p:4,textAlign:"left",spacing:4,borderRadius:"md",my:2,children:[(0,C.jsx)(f.x,{textAlign:"center",fontWeight:"700",children:(0,C.jsx)(o.cC,{id:"yNvg2Q"})}),(0,C.jsx)(f.x,{fontSize:"sm",color:"gray.700",children:(0,C.jsx)(o.cC,{id:"qYwzxB"})}),(0,C.jsx)(p.z,{onClick:n,variant:"solid",leftIcon:(0,C.jsx)(x.G,{icon:b.Jy}),"data-testid":"new-theme-button",children:(0,C.jsx)(o.cC,{id:"srRMnJ"})})]})},O=t(3334),w=t(2875),k=t(10710),S=t(95235),E=t(12741),I=t(27440),P=t(76817);function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var T=function(e){var n=e.themes,t=e.type,r=e.currentTheme,i=e.setTheme,o=e.openThemeEditor,s=e.gridProps;return(0,C.jsx)(I.r,A(A({gap:1,flex:1,my:2,mx:-2},s),{},{children:(0,E.Z)(n).sort(g.qb).map(function(e){return(0,C.jsx)(P.o,{type:t,theme:e,isChecked:r&&e.id===r.id,onEditClick:o,onThemeClicked:i,variant:"ghost"},e.id)})}))},_=function(e){var n=e.currentTheme,t=e.setTheme,b=e.openThemeEditor,S=e.onClose,E=e.showEditBackgroundButton,I=e.gridProps,P=void 0===I?{templateColumns:{base:"repeat(2, minmax(0, 1fr))"}}:I,D=(0,k.SE)().currentWorkspace,A=(0,j.BCl)({variables:{workspaceId:null==D?void 0:D.id,archived:!1},skip:!D,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),_=A.data,R=A.loading,z=(0,j.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),L=z.data,M=z.loading,N=(null==_?void 0:_.themes)||[],G=(null==L?void 0:L.themes)||[],Z=(0,m.useCallback)(function(){b((0,g.QB)(null==L?void 0:L.themes),!0)},[L,b]),F=(null==N?void 0:N.length)>0,U=(0,m.useCallback)(function(){w.pw.emit(w.TI.OPEN_PAGE_SETUP,"background"),null==S||S()},[S]);return(0,C.jsxs)(C.Fragment,{children:[null!=n&&n.archived?(0,C.jsxs)(s.b,{status:"warning",mb:4,children:[(0,C.jsx)(c.z,{}),(0,C.jsxs)(a.xu,{children:[(0,C.jsx)(l.C,{children:(0,C.jsx)(o.cC,{id:"WTUBPK",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}})}),(0,C.jsx)(d.X,{children:(0,C.jsx)(o.cC,{id:"5iFuNk"})})]})]}):null,(0,C.jsxs)(u.K,{spacing:2,children:[(0,C.jsxs)(u.K,{direction:"row",children:[(0,C.jsx)(f.x,{color:"gray.500",fontWeight:"600",fontSize:"sm",children:(0,C.jsx)(o.cC,{id:"B+0JwP"})}),(0,C.jsx)(h.L,{}),F&&D&&(0,C.jsx)(p.z,{size:"xs",leftIcon:(0,C.jsx)(x.G,{icon:i.r8}),onClick:Z,"data-testid":"new-theme-button",children:(0,C.jsx)(o.cC,{id:"FiwgR9"})})]}),R?(0,C.jsx)(O.S,{size:2,gridProps:P}):F?(0,C.jsx)(T,{themes:N,type:"custom",currentTheme:n,setTheme:t,openThemeEditor:b,gridProps:P}):D?(0,C.jsx)(y,{openThemeEditor:Z}):null,(0,C.jsxs)(u.K,{pt:2,direction:["column","row"],children:[(0,C.jsx)(f.x,{color:"gray.500",fontWeight:"600",fontSize:"sm",children:(0,C.jsx)(o.cC,{id:"VjG5AF"})}),(0,C.jsx)(h.L,{}),(void 0===E||E)&&(0,C.jsx)(p.z,{size:"xs",leftIcon:(0,C.jsx)(x.G,{icon:r.UH}),onClick:U,children:(0,C.jsx)(o.cC,{id:"+EZioz"})})]}),M?(0,C.jsx)(O.S,{size:4,gridProps:P}):(0,C.jsx)(T,{themes:G,type:"standard",currentTheme:n,setTheme:t,openThemeEditor:b,gridProps:P})]})]})}},42048:function(e,n,t){t.d(n,{B:function(){return D}});var r=t(55452),i=t(87254),o=t(78116),s=t(56915),c=t(16796),a=t(64827),l=t(92619),d=t(2167),u=t(80353),f=t(45650),h=t(55966),p=t(2784),x=t(95235),m=t(82269),j=t(2046),v=t(70287),g=t(60807),b=t(53738),C=t(34860),y=t(69297),O=t(52322),w=["label","initialValue","updateValue","helperText","language"];function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var S=function(e){var n=e.label,r=e.initialValue,i=e.updateValue,o=e.helperText,s=e.language,c=(0,m.Z)(e,w),a=(0,p.useState)(void 0===r?"":r),l=a[0],d=a[1],u=(0,p.useState)(null),f=u[0],h=u[1],S=(0,C.Kt)(i,100),E=(0,p.useState)(),I=E[0],P=E[1];(0,p.useEffect)(function(){"css"===s?Promise.all([t.e(8917),t.e(7120),t.e(6214)]).then(t.bind(t,65284)).then(function(e){P(e.css())}):"html"===s&&Promise.all([t.e(8917),t.e(7120),t.e(6214),t.e(4100),t.e(2163)]).then(t.bind(t,22163)).then(function(e){P(e.html())})},[s]),(0,C.vm)(function(){h(null),S(l)},[l,S],[l]);var D=[I].filter(Boolean);return(0,O.jsxs)(j.NI,{isInvalid:!!f,children:[(0,O.jsx)(v.l,{children:n}),f&&(0,O.jsx)(g.J1,{children:f}),o&&(0,O.jsx)(j.Q6,{children:o}),(0,O.jsx)(b.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,O.jsx)(p.Suspense,{fallback:(0,O.jsx)("span",{}),children:(0,O.jsx)(y.B,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){(0,x.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({value:l,extensions:D,onChange:d},c))})})]})},E=t(46358),I=t(62141),P=t(21529),D=(0,p.memo)(function(e){var n=e.isOpen,t=e.onClose,x=e.editor,m=(0,P.A)(x),j=(0,E.CG)(I.$p).bodyStart,v=(0,p.useCallback)(function(e){null==x||x.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[x]);return(0,O.jsx)(h.Wk,{isDark:!1,children:(0,O.jsxs)(o.d,{returnFocusOnClose:!1,isOpen:n,placement:"right",onClose:t,size:"lg",children:[(0,O.jsx)(s.Z,{background:"none"}),(0,O.jsxs)(c.s,{onKeyDown:m,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,O.jsx)(a.o,{}),(0,O.jsx)(l.x,{children:(0,O.jsx)(r.cC,{id:"E16GGw"})}),(0,O.jsx)(d.f,{overflowX:"hidden",children:(0,O.jsx)(S,{label:i.ag._({id:"fC5kYg"}),helperText:i.ag._({id:"0AZNtw"}),initialValue:j,updateValue:v,language:"html",height:"600px"})}),(0,O.jsx)(u.m,{children:(0,O.jsx)(f.z,{w:"100%",variant:"solid",onClick:t,children:(0,O.jsx)(r.cC,{id:"DPfwMq"})})})]})]})})});D.displayName="CustomCodeDrawer"},59734:function(e,n,t){t.d(n,{_i:function(){return A._},eT:function(){return J}});var r,i,o,s,c,a=t(95235),l=t(81333),d=t(55452),u=t(55479),f=t(5632),h=t(2784),p=t(23313),x=t(77381),m=t(70204),j=t(46358),v=t(10710),g=t(68941),b=t(69209),C=function(e){var n=(0,j.TL)(),t=(0,v.SE)().currentWorkspace;(0,h.useEffect)(function(){if(e)return g.VH.updateWorkspaceInLdContext(e).then(function(){n((0,b.vH)({isDocWorkspaceSet:!0}))}),function(){g.VH.updateWorkspaceInLdContext(t).then(function(){n((0,b.vH)({isDocWorkspaceSet:!1}))})}},[t,n,e])},y=t(1368),O=t(7328),w=t(57981),k=(0,w.Ps)(r||(r=(0,O.Z)(["\n  fragment DefaultCardFields on Card {\n    id\n    archived\n    docId\n    title\n    text\n    previewUrl\n    createdTime\n    updatedTime\n  }\n"])));(0,w.Ps)(i||(i=(0,O.Z)(["\n  mutation CreateCard($id: ID!, $docId: ID!) {\n    createCard(id: $id, docId: $docId) {\n      id\n    }\n  }\n"]))),(0,w.Ps)(o||(o=(0,O.Z)(["\n  ","\n  query GetCard($id: ID!, $docId: ID!) {\n    card(id: $id, docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),k),(0,w.Ps)(s||(s=(0,O.Z)(["\n  ","\n  query GetCards($docId: ID!) {\n    docCards(docId: $docId, archived: false) {\n      ...DefaultCardFields\n    }\n  }\n"])),k);var S=(0,w.Ps)(c||(c=(0,O.Z)(["\n  ","\n  subscription SubscribeToCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),k),E=t(93589),I=t(51823),P=t(61701),D=t(68197),A=t(46732),T=t(75944),_=t(46988),R=t(20010),z=t(56915),L=t(48273),M=t(92619),N=t(64827),G=t(2167),Z=t(71354),F=t(91012),U=t(80353),W=t(76648),H=t(45650),B=t(52322),V=t(29677),q=function(e){var n,t=(null===(n=(0,j.CG)((0,_.oH)(e||"")))||void 0===n?void 0:n.status)==="running",r=(0,h.useRef)(t);r.current=t;var i=(0,h.useState)(function(){return new V.B}),o=i[0],s=i[1],c=(0,h.useCallback)(function(){o.resolve()},[o]),a=(0,T.q)(),l=a.isOpen,d=a.onOpen,u=a.onClose;return{confirmNavigationFn:(0,h.useCallback)(function(){if(!r.current)return Promise.resolve();var e=new V.B;return s(e),d(),e.promise},[d]),confirmNavigationModalProps:{isOpen:l,onClose:u,onConfirm:c}}},K=function(e){var n=e.isOpen,t=e.onClose,r=e.onConfirm;return(0,B.jsxs)(R.u_,{onClose:t,isOpen:n,isCentered:!0,children:[(0,B.jsx)(z.Z,{}),(0,B.jsxs)(L.h,{children:[(0,B.jsx)(M.x,{children:(0,B.jsx)(d.cC,{id:"YeK6T+"})}),(0,B.jsx)(N.o,{}),(0,B.jsx)(G.f,{children:(0,B.jsxs)(Z.K,{spacing:4,children:[(0,B.jsx)(F.x,{fontWeight:"bold",children:(0,B.jsx)(d.cC,{id:"Wr6Y7m"})}),(0,B.jsx)(F.x,{children:(0,B.jsx)(d.cC,{id:"n0Fn6S"})})]})}),(0,B.jsx)(U.m,{children:(0,B.jsxs)(W.h,{children:[(0,B.jsx)(H.z,{variant:"ghost",onClick:t,children:(0,B.jsx)(d.cC,{id:"dEgA5A"})}),(0,B.jsx)(H.z,{variant:"ghost",color:"red.600",onClick:r,children:(0,B.jsx)(d.cC,{id:"QxM8i/"})})]})})]})]})};function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var X=function(e){var n=e.children,t=(0,u.p)(),r=(0,v.we)(),i=(0,j.CG)(D.XV),o=(0,v.SE)(),s=o.user,c=o.userStatus,a=(0,h.useRef)(null),g=(0,j.TL)(),b=(0,f.useRouter)(),O=b.push,w=b.replace,k=(0,j.CG)(D.yx),T=(0,I.NO)(),_=(0,l.Z)(T,3),R=_[0],z=_[1],L=_[2],M=z&&z.match(I.sg),N=M?M[0]:null,G=q(N),Z=G.confirmNavigationFn,F=G.confirmNavigationModalProps,U=(0,h.useState)({isUnauthorized:void 0,setCollaborativeEditorInstance:function(e){a.current=e,H(function(n){return Q(Q({},n),{},{editor:e})})},getCollaborativeEditorInstance:function(){return a.current},confirmNavigation:Z,editor:void 0}),W=U[0],H=U[1];(0,x.ts)(k),C(null==k?void 0:k.organization);var V=(0,p.WMx)({variables:{id:N},returnPartialData:!0,nextFetchPolicy:"cache-only"}),Y=(0,l.Z)(V,2),X=Y[0],J=Y[1],$=J.data,ee=J.loading,en=J.called,et=J.subscribeToMore,er=(0,v.py)("view",null==$?void 0:$.doc),ei=(0,v.Is)("edit",null==$?void 0:$.doc);(0,v.$K)(X),(0,h.useEffect)(function(){if(et&&W.docId&&en)return et({document:P.dU,variables:{id:W.docId},updateQuery:function(e,n){var t=n.subscriptionData;return t.data&&t.data.doc&&e.doc?{doc:Q(Q(Q({},e.doc),t.data.doc),{},{__typename:"Doc"})}:e}})},[W.docId,et,en]);var eo=(0,p.WBF)({variables:{docId:N},returnPartialData:!0,nextFetchPolicy:"cache-only"}),es=(0,l.Z)(eo,2),ec=es[0],ea=es[1],el=ea.data,ed=ea.called,eu=ea.subscribeToMore;return((0,m.p)(null==el?void 0:el.docCards,W.editor),(0,h.useEffect)(function(){if(eu&&W.docId&&ed)return eu({document:S,variables:{docId:W.docId},updateQuery:function(e,n){var t=n.subscriptionData;return t.data&&t.data.docCards?t.data:e}})},[W.docId,eu,ed]),(0,h.useEffect)(function(){if(W.docId!==N&&z){if(!N){t({id:"invalid_doc_id_error",title:(0,B.jsx)(d.cC,{id:"742lf1"}),description:"",status:"error",position:"top",isClosable:!1,duration:null});return}X(),ec(),H(function(e){return Q(Q({},e),{},{docId:N})})}},[W.docId,z,N,X,ec,g,t]),(0,h.useEffect)(function(){if("loading"!==c&&en&&!ee&&z){if(!$||!$.doc||!1===er){"loggedOut"===c&&O("/signin?redirect_to=".concat(encodeURIComponent(window.location.href))),H(function(e){return Q(Q({},e),{},{isUnauthorized:!0})});return}if($&&null===$.doc.currentSnapshotId&&ei){H(function(e){return Q(Q({},e),{},{isUnauthorized:!0})});return}if(!i&&$.doc.archived){w("/");return}H(function(e){return!1===e.isUnauthorized?e:Q(Q({},e),{},{isUnauthorized:!1})}),g((0,D.pl)({doc:$.doc}))}},[r,er,ei,$,ee,z,en,i,c,O,g,w,s]),(0,h.useEffect)(function(){return function(){g((0,D.mc)())}},[g]),(0,h.useEffect)(function(){if(k&&N){var e="".concat(k.title?"".concat((0,E.lV)(k.title),"-"):"").concat(N);z!==e&&(0,y.lO)({pathname:"".concat(R,"/").concat(e).concat(L||""),emitChange:!1})}},[k,N,z,R,L]),W.docId)?(0,B.jsxs)(A.r.Provider,{value:W,children:[n,(0,B.jsx)(K,Q({},F))]}):(0,B.jsx)(B.Fragment,{})};function J(e){return(0,h.memo)(function(n){return(0,B.jsx)(X,{children:(0,B.jsx)(e,Q({},n))})})}},30174:function(e,n,t){t.d(n,{m:function(){return s}});var r=t(11919);t(2784);var i=t(1153),o=t(52322),s=function(e){var n=e.children;return(0,o.jsxs)(r.k,{alignSelf:"stretch",position:"relative",height:"var(--100vh)",direction:"column",children:[(0,o.jsx)(i.Y,{}),n]})}},1005:function(e,n,t){t.d(n,{m:function(){return F}});var r=t(81333),i=t(55452),o=t(87254),s=t(11919),c=t(53738),a=t(94659),l=t(36895),d=t(50390),u=t(91012),f=t(55966),h=t(2784),p=t(23313),x=t(43602),m=t(9846),j=t(46358),v=t(80318),g=t(6010),b=t(62141),C=t(10710),y={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},O=t(81188),w=t(83906),k=t(9088),S=t(30893),E=t(45650),I=t(40771),P=t(63849),D=t(2575),A=t(97907),T=t(65903),_=t.n(T),R=t(52322),z=function(e){var n=e.count,t=e.onClose,r=e.commentStatusFilter,c=e.setCommentStatusFilter,a=r===p.Ux9.Open?o.ag._({id:"Kz1TxG"}):o.ag._({id:"kywJax"});return(0,R.jsxs)(s.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,R.jsx)(d.X,{size:"md",flex:1,noOfLines:1,children:(0,R.jsx)(i.cC,{id:"eiUA4k",values:{count:n}})}),(0,R.jsxs)(k.v,{closeOnSelect:!0,children:[(0,R.jsx)(S.j,{as:E.z,size:"sm",rightIcon:(0,R.jsx)(w.v,{}),mr:8,children:_()(a)}),(0,R.jsx)(I.q,{zIndex:3,children:(0,R.jsxs)(P._,{defaultValue:r,title:o.ag._({id:"0cVgUw"}),type:"radio",children:[(0,R.jsx)(D.i,{onClick:function(){return c(p.Ux9.Open)},value:"open",children:(0,R.jsx)(i.cC,{id:"1TNIig"})}),(0,R.jsx)(D.i,{onClick:function(){return c(p.Ux9.Closed)},value:"closed",children:(0,R.jsx)(i.cC,{id:"D87pha"})})]})})]}),(0,R.jsx)(A.P,{position:"absolute",top:2,right:2,onClick:t,"data-comment-feed-close-button":!0})]})},L=t(95235),M=t(50350);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach(function(n){(0,L.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z=function(e){var n=e.user,t=e.editor,r=(0,h.useState)(function(){var e=(0,v.W1)(t,M.Et);return e&&e.length?e[0]:(0,v.xN)(function(){return M.Et},t,"")}),i=r[0],o=r[1];(0,h.useEffect)(function(){if(i&&t)return function(){var e,n;null===(e=(n=t.commands).createDraftComment)||void 0===e||e.call(n,i)}},[i,t]);var s=(0,v.iZ)({draftComment:i,clearDraftComment:function(){i&&(null===(r=(s=t.commands).removeDraftComments)||void 0===r||r.call(s,[i]));var e,n,r,s,c=(0,v.xN)(function(){return M.Et},t,"");null===(e=(n=t.commands).createDraftComment)||void 0===e||e.call(n,c),o(c)},editor:t}),c=(0,h.useCallback)(function(e){var n=e.editor;o(function(e){return e?G(G({},e),{},{json:n.view.state.doc.toJSON(),text:n.view.state.doc.textContent}):e})},[]);return(0,R.jsx)(v.Ag,{draftComment:i,user:n,onCommentDraftUpdate:c,onCommentSave:s,commentIdToHighlight:null})},F=function(e){var n,t=e.onClose,w=e.editor,k=(0,j.CG)(b.yx),S=(0,p.$gs)().isConnected,E=(0,h.useState)(p.Ux9.Open),I=E[0],P=E[1],D=null==k?void 0:k.comments,A=null==k?void 0:null===(n=k.comments)||void 0===n?void 0:n.filter(function(e){return e.status===I}),T=(0,j.CG)(b.gh),_=(0,C.py)("comment",k)&&S,L=(0,C.SE)().user,M=(0,x.$m)(k,L),N=(0,h.useMemo)(function(){return(0,O.yd)({items:A||[],sortBy:O.Yz,latestTimeGetterFn:O.z3})},[A]);return D&&k&&w?(0,R.jsxs)(s.k,{direction:"column",h:"100%",overflowX:"hidden",className:g.G,w:"100%",children:[(0,R.jsx)(z,{commentStatusFilter:I,setCommentStatusFilter:P,count:(null==A?void 0:A.length)||0,onClose:t}),(0,R.jsxs)(s.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,R.jsx)(m.V,{label:(0,R.jsx)(i.cC,{id:"pQvCbR"}),isConnected:S,mx:6}),M&&!L&&k&&(0,R.jsx)(v.IZ,{doc:k,accessLink:M}),_&&(0,R.jsx)(c.xu,{px:6,py:2,children:(0,R.jsx)(Z,{user:L,editor:w})}),!(null!=A&&A.length)&&(0,R.jsxs)(a.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,R.jsx)(c.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,R.jsx)(l.E,{src:y.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,R.jsxs)(c.xu,{children:[(0,R.jsx)(d.X,{size:"xs",mb:2,children:"open"===I?(0,R.jsx)(i.cC,{id:"W7i5f5"}):(0,R.jsx)(i.cC,{id:"mpDN1V"})}),(0,R.jsx)(u.x,{fontSize:"sm",children:(0,R.jsx)(i.cC,{id:"iB9OEi"})})]})]}),Object.entries(N).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e){var n=(0,r.Z)(e,2),i=n[0],c=n[1];return(0,R.jsxs)(s.k,{direction:"column",children:[(0,R.jsx)(f.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:{today:o.ag._({id:"ecUA8p"}),thisWeek:o.ag._({id:"yByRxz"}),earlier:o.ag._({id:"HPqZkW"})}[i]}),(0,R.jsx)(s.k,{direction:"column",children:c.map(function(e){return(0,R.jsx)(v.q5,{instanceType:"feed",userCanComment:_,editor:w,comment:e,selfUser:L,docId:null==k?void 0:k.id,editorMode:T,onClose:t,isRootComment:!0,pt:6,px:6,pb:4},e.id)})})]},i)})]})]}):null}},80405:function(e,n,t){t.d(n,{s:function(){return x}});var r=t(95235),i=t(82269),o=t(2784),s=t(56692),c=t(76903),a=t(2875),l=t(46732),d=t(1005),u=t(52322),f=["closePanel"];function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var x=function(e){var n=e.closePanel,t=(0,i.Z)(e,f),r=(0,l._)().editor;return(0,o.useEffect)(function(){var e=function(e){e.open&&n()};return a.pw.on(a.TI.POPUP_COMMENT_TOGGLED,e),function(){a.pw.on(a.TI.POPUP_COMMENT_TOGGLED,e)}},[n]),(0,o.useEffect)(function(){return s.F7.on("keydown","COMMENT_FEED_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&n(),!0)})},[n]),(0,u.jsx)(c.s,p(p({},t),{},{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,u.jsx)(d.m,{onClose:n,editor:r})}))};x.panelPosition="right"},3476:function(e,n,t){t.d(n,{Rr:function(){return ea},QK:function(){return ec}});var r=t(95235),i=t(82269),o=t(11919),s=t(87202),c=t(2784),a=t(98875),l=t(56692),d=t(76903),u=t(46358),f=t(2875),h=t(62141),p=t(46732),x=t(64629),m=t(55452),j=t(71354),v=t(67887),g=t(49929),b=t(55966),C=t(19674),y=t(30341),O=t(32333),w=t(17033),k=t(86733),S=t(36895),E=t(91012),I=t(45650),P=t(72360),D=t(66724),A=t(18751),T=t(88299),_=t(52322),R=function(e){var n=e.onClose;return(0,_.jsxs)(j.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,_.jsx)(S.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,_.jsx)(T.K,{children:(0,_.jsx)(E.x,{children:(0,_.jsx)(m.cC,{id:"jVQv+Q"})})}),(0,_.jsx)(I.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,_.jsx)(g.G,{icon:k.faXmark}),onClick:n,children:(0,_.jsx)(m.cC,{id:"pqZJT2"})})]})},z=function(){return(0,_.jsxs)(P.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,_.jsx)(D.C,{children:(0,_.jsx)(m.cC,{id:"rvbk/4"})}),(0,_.jsx)(A.X,{children:(0,_.jsx)(m.cC,{id:"XNkIFY"})})]})},L=t(12677),M=t(87254),N=t(8283),G=t(21891),Z=t(25793),F=t(94659),U=t(27191),W=t(68740),H=t(95498),B=t(74586),V=t(21819),q="40px",K=function(e){var n=e.value,t=e.onChange,r=e.onSubmit,i=e.isLoading,o=e.editor;e.resetMessages,(0,V.F1)(o);var s=o.state,a=s.selection,l=s.doc.textBetween(a.from,a.to,"\n"),d=(0,H.q)().hasEnoughCreditsToChat,u=(0,B.fg)(),f=(0,c.useRef)(null),h=(0,c.useState)(!1),p=h[0],x=h[1],m=a instanceof U.qv,j=a instanceof U.Bs,C=m&&"card"===a.node.type.name,y=a.empty||C?M.ag._({id:"XrfE9D"}):m?M.ag._({id:"CsUli9"}):j&&l?M.ag._({id:"+NPPZN",values:{0:l.length>50?l.slice(0,50)+"...":l}}):M.ag._({id:"/fY1js"}),O=(0,c.useCallback)(function(){f.current&&(f.current.style.height=q,f.current.style.height="".concat(f.current.scrollHeight,"px"))},[]);return(0,c.useEffect)(function(){return o.on("selectionUpdate",O),function(){o.off("selectionUpdate",O)}},[o,O]),(0,c.useEffect)(function(){p?O():setTimeout(function(){x(!0),O()},400)},[p,y,O,n]),(0,_.jsxs)(N.U,{align:"end",children:[(0,_.jsx)(G.B,{size:"md",children:(0,_.jsx)(Z.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:q,minH:q,ref:f,resize:"none",maxH:p?32:q,bg:"white",shadow:"md",autoFocus:!0,isDisabled:!d,placeholder:y,value:n,onKeyPress:function(e){"Enter"===e.key&&n.length>0&&!i&&(e.preventDefault(),r())},onChange:function(e){return t(e.target.value)},pr:12})}),(0,_.jsx)(b.kH,{placement:"top",label:(0,_.jsxs)(F.g,{spacing:0,children:[(0,_.jsx)(E.x,{children:"Send request"}),!u&&(0,_.jsxs)(E.x,{color:"gray.400",children:[(0,_.jsx)(W.J,{type:"chatSuggestion",ml:0})," if successful"]}),(0,_.jsx)(b.f2,{shortcut:"Enter"})]}),children:(0,_.jsx)(v.h,{"aria-label":"Send message",isDisabled:!n||i,size:"sm",h:q,w:q,variant:"solid",icon:(0,_.jsx)(g.G,{icon:L.Fz,fixedWidth:!0}),onClick:r})})]})},Y=t(76949),Q=t(70548),X=t(27563);function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var $=function(e){var n=e.editor,t=e.scrollSelector,i=e.onClose,s=(0,c.useState)(""),l=s[0],d=s[1],f=(0,a.ye)("openAiStatus"),h=(0,u.TL)(),p=(0,y.As)("editor"),k=(0,u.qr)(),S=(0,u.CG)(Q.AZ),E=(0,u.CG)(Q.Q_),I=(0,c.useState)(null),P=I[0],D=I[1],A=(0,c.useCallback)(function(){return(0,Q.AZ)(k.getState())},[k]),T=(0,c.useCallback)(function(e){var n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({timestamp:Date.now()},e);h((0,Q.Hz)({message:n}))},[h]),L=(0,c.useCallback)(function(){h((0,Q.mc)())},[h]),M=(0,X.n)({addMessage:T,getMessageHistory:A,editor:n}),N=M.status,G=M.sendMessage;(0,c.useEffect)(function(){var e=t&&document.querySelector(t);e&&requestAnimationFrame(function(){e.scrollTop=e.scrollHeight})},[t,S]);var Z="idle"!==N;(0,c.useEffect)(function(){if(E.length&&!Z){var e=E[0],n=e.task,t=e.id;!1===n.submit?d(n.message):G({message:n.message}),h((0,Q.VB)({id:t}))}},[Z,G,h,E]);var F=(0,c.useCallback)(function(){if(P&&n){var e=document.querySelector('[data-card-id="'.concat(P,'"]')),t=(0,y.v4)(e,100);null!=t&&t.yAxisInView||p.scrollElementIntoView({element:e})}},[n,p,P]),U=(0,c.useCallback)(function(e){F(),G({message:e})},[F,G]),W=(0,c.useCallback)(function(){U(l),d("")},[U,l]);return((0,c.useEffect)(function(){if(n){var e=function(){var e=(0,w.AQ)(n,n.state.selection.from);e&&D(e.node.attrs.id)};return e(),n.on("selectionUpdate",e),function(){n.off("selectionUpdate",e)}}},[n]),n)?"DOWN"===f?(0,_.jsx)(R,{onClose:i}):(0,_.jsxs)(o.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===f&&(0,_.jsx)(z,{}),(0,_.jsx)(Y.rN,{scrollSelector:t,messages:S,editor:n,sendMessage:U,isLoading:Z,onClose:i}),(0,_.jsxs)(j.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,_.jsx)(K,{editor:n,value:l,onChange:d,onSubmit:W,isLoading:Z,resetMessages:L}),(0,_.jsx)(C.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:O.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,_.jsx)(b.kH,{label:(0,_.jsx)(m.cC,{id:"5eg0kp"}),placement:"top",children:(0,_.jsx)(v.h,{variant:"ghost",colorScheme:"blackAlpha",color:"currentColor","aria-label":"reset-chat",icon:(0,_.jsx)(g.G,{icon:x.Yc}),onClick:L,position:"absolute",left:4,top:1,isRound:!0})})]}):null},ee=t(81234),en=t(97907),et=function(e){var n=e.onClose;return(0,_.jsx)(o.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,_.jsx)(en.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:n})})},er=["closePanel"];function ei(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ei(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ei(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var es="design-partner-panel-wrapper",ec=function(e){var n=e.toggleDesignPartnerPanel,t=e.isDesignPartnerPanelOpen,r=e.editor,i=(0,a.ye)("aiChat"),o=(0,u.TL)();(0,c.useEffect)(function(){return function(){o((0,Q.mc)())}},[]);var d=(0,u.CG)(h.hN);(0,c.useEffect)(function(){!d&&t&&n()},[d,t,n]),(0,c.useEffect)(function(){var e,n;r&&(null===(e=(n=r.commands).setSalOpen)||void 0===e||e.call(n,t))},[r,t]),(0,c.useEffect)(function(){if(i)return ee.T.on("toggle",function(e){n(e.config)})},[n,i]),(0,c.useEffect)(function(){if(i)return f.pw.on("queueDesignPartnerTask",function(e){o((0,Q.Lj)({task:e})),n({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[o,i,n]),(0,c.useEffect)(function(){if(i&&d){var e=(0,s.ZP)("mod+shift+S");return l.F7.on("keydown","DESIGN_PARTNER_PANEL",function(t){return!!e(t)&&(n(),!0)})}},[n,i,d])},ea=function(e){var n=e.closePanel,t=(0,i.Z)(e,er),r=(0,p._)().editor;return(0,c.useEffect)(function(){return l.F7.on("keydown","DESIGN_PARTNER_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(n(),!0)})},[n]),(0,_.jsx)(d.s,eo(eo({},t),{},{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,_.jsxs)(o.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:es,w:"100%",children:[(0,_.jsx)(et,{onClose:n}),(0,_.jsx)($,{editor:r,scrollSelector:".".concat(es),onClose:n})]})}))};ea.panelPosition="right"},92761:function(e,n,t){t.d(n,{m:function(){return $}});var r,i=t(95235),o=t(82269),s=t(55452),c=t(11919),a=t(76648),l=t(45650),d=t(84103),u=t(36895),f=t(55966),h=t(2784),p=t(75085),x=t(74586),m=t(32333),j=t(32736),v=t(59734),g=t(9734),b=t(12741),C=t(81333),y=t(73906),O=t(87254),w=t(75944),k=t(67887),S=t(55479),E=t(34638),I=t(20010),P=t(56915),D=t(48273),A=t(92619),T=t(64827),_=t(2167),R=t(71354),z=t(91012),L=t(49248),M=t(78361),N=t(49747),G=t(25793),Z=t(80353),F=t(49929),U=t(21010),W=t(93858),H=t(49392),B=t(52322),V=(r={},(0,i.Z)(r,U.pyi.Spam,{title:(0,B.jsx)(s.cC,{id:"Y5QK1F"})}),(0,i.Z)(r,U.pyi.Inappropriate,{title:(0,B.jsx)(s.cC,{id:"Zeb01n"})}),(0,i.Z)(r,U.pyi.Other,{title:(0,B.jsx)(s.cC,{id:"/IX/7x"})}),r),q=[U.pyi.Spam,U.pyi.Inappropriate,U.pyi.Other],K=function(e){var n=e.docId,t=(0,W._)(H.H.abuseReports,[]),r=(0,C.Z)(t,1)[0],i=(0,h.useState)(r.includes(n)),o=i[0],c=i[1],a=(0,w.q)({id:"report-page-modal"}),l=a.isOpen,d=a.onOpen,u=a.onClose,p=(0,h.useCallback)(function(){c(!0),u()},[u]),x=!o;return(0,B.jsxs)(B.Fragment,{children:[x&&l&&(0,B.jsx)(Y,{isOpen:!0,onClose:u,onSubmit:p}),x&&(0,B.jsx)(f.kH,{label:(0,B.jsx)(s.cC,{id:"ch68HI"}),children:(0,B.jsx)(k.h,{"aria-label":"Report this page",borderLeftWidth:"0px",color:"gray.600",variant:"plain",size:"sm",borderLeftRadius:0,icon:(0,B.jsx)(F.G,{icon:y.L1,size:"sm"}),onClick:d})})]})},Y=function(e){var n=e.isOpen,t=e.onClose,r=e.onSubmit,i=(0,W._)(H.H.abuseReports,[]),o=(0,C.Z)(i,2),c=o[0],d=o[1],u=(0,h.useState)(),f=u[0],p=u[1],x=(0,U.mvg)(),m=(0,C.Z)(x,1)[0],j=(0,h.useState)(),g=j[0],y=j[1],w=(0,S.p)(),k=(0,v._i)().docId,F=(0,h.useCallback)(function(){f&&m({variables:{input:{docId:k,reason:f,description:g}}}).then(function(){d([].concat((0,b.Z)(c),[k])),w({title:(0,B.jsx)(s.cC,{id:"7sBcV9"}),description:(0,B.jsx)(s.cC,{id:"m02YqD"}),status:"success",duration:5e3,isClosable:!0,position:"top"}),r()})},[f,m,k,g,d,c,w,r]),K=(0,E.ff)("gray.800","gray.200");return(0,B.jsxs)(I.u_,{isOpen:n,onClose:t,trapFocus:!1,children:[(0,B.jsx)(P.Z,{}),(0,B.jsxs)(D.h,{color:K,children:[(0,B.jsx)(A.x,{children:(0,B.jsx)(s.cC,{id:"ch68HI"})}),(0,B.jsx)(T.o,{}),(0,B.jsx)(_.f,{children:(0,B.jsxs)(R.K,{spacing:0,children:[(0,B.jsx)(z.x,{mb:6,children:(0,B.jsx)(s.cC,{id:"oNyQYO"})}),(0,B.jsx)(L.E,{onChange:function(e){p(e)},value:f,children:(0,B.jsx)(R.K,{children:q.map(function(e){var n=V[e];return(0,B.jsx)(M.Y,{value:e,children:null==n?void 0:n.title},e)})})}),(0,B.jsx)(N.U,{in:f===U.pyi.Other,children:(0,B.jsx)(G.g,{onChange:function(e){y(e.target.value)},maxLength:200,placeholder:O.ag._({id:"1ULmtx"}),mt:4})})]})}),(0,B.jsx)(Z.m,{children:(0,B.jsxs)(a.h,{children:[(0,B.jsx)(l.z,{colorScheme:"gray",onClick:t,variant:"ghost",children:(0,B.jsx)(s.cC,{id:"dEgA5A"})}),(0,B.jsx)(l.z,{onClick:F,variant:"plain",colorScheme:"red.400",color:"red",_hover:{color:"red.600"},children:(0,B.jsx)(s.cC,{id:"ovTgfk"})})]})})]})]})},Q=["docWorkspace","forceShow","abuseReportingEnabled"];function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $=function(e){var n=e.docWorkspace,t=e.forceShow,r=e.abuseReportingEnabled,i=(0,o.Z)(e,Q),b=(0,v._i)().docId,C=(0,j.Yy)(),y=(0,m.z$)(),O=(0,h.useCallback)(function(){null==y||y.track(m.AA.MADE_WITH_GAMMA_CLICKED,{doc_id:b})},[y,b]),w=(0,x.dU)(n);return!1===(void 0!==t&&t)&&!1!==w?null:(0,B.jsx)(c.k,J(J(J({},(0,g.s2)()?{display:"flex",justifyContent:"center",m:6,position:"relative"}:{position:"fixed",right:[1,6],bottom:[1,4]}),i),{},{children:(0,B.jsx)(f.Wk,{isDark:C,children:(0,B.jsxs)(a.h,{isAttached:!0,sx:{".chakra-button":{borderRightRadius:"none","&:last-child":{borderRightRadius:"md"}}},children:[(0,B.jsx)(l.z,{as:d.r,onClick:O,variant:"plain",target:"_blank",href:"https://gamma.app",textDecoration:"none !important",leftIcon:(0,B.jsx)(u.E,{src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",h:"1em"}),size:"sm",children:(0,B.jsx)(s.cC,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:p.N6}})}),(void 0===r||r)&&(0,B.jsx)(K,{docId:b})]})})}))}},96302:function(e,n,t){t.d(n,{VN:function(){return f},rJ:function(){return d},us:function(){return u}});var r=t(2784),i=t(98875),o=t(46358),s=t(41261),c=t(62141),a=t(14115),l="disable-card-size-animations",d=function(){var e=(0,i.ye)("autoZoomToFit"),n=(0,o.CG)(c.Kk);return null!=n?n:e},u=function(){var e=(0,o.CG)(c.i2),n=(0,r.useRef)(),t=d(),i=!a.Pv&&t;(0,r.useEffect)(function(){var t=!n.current;n.current=e;var r=t?s.nY:s.id/4;e&&i&&setTimeout(function(){document.body.classList.add(l),f(),setTimeout(function(){document.body.classList.remove(l)},s.id/2)},r)},[e,i])},f=function(){var e=(0,o.bh)(),n=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');t&&(e.dispatch((0,c.Ic)({zoomLevel:1})),setTimeout(function(){var r=t.scrollHeight,i=n/r;if(a.QX)i=Math.max(n/r,.7);else{if(i<.7)return;i=Math.floor(10*i)/10}e.dispatch((0,c.Ic)({zoomLevel:i})),console.debug("[zoomPresentModeToFit] zooming",JSON.stringify({viewportHeight:n,cardHeight:r,targetZoom:i}))}))}},50376:function(e,n,t){t.d(n,{Z:function(){return en}});var r=t(81333),i=t(55452),o=t(87254),s=t(81927),c=t(8848),a=t(24798),l=t(11919),d=t(91012),u=t(4036),f=t(53738),h=t(73848),p=t(45650),x=t(55479),m=t(78116),j=t(56915),v=t(16796),g=t(64827),b=t(92619),C=t(2167),y=t(89190),O=t(80353),w=t(76648),k=t(55966),S=t(65742),E=t(31807),I=t(65903),P=t.n(I),D=t(2784),A=t(24021),T=t(23313),_=t(75085),R=t(8388),z=t(51331),L=t(49922),M=t(32333),N=t(36738),G=t(41261),Z=t(1153);function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var U=function(e,n){var t=[];return!function e(r){if(n(r)&&t.push(r),r.content){var i,o=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return F(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F(e,n)}}(e))){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw o}}}}(r.content);try{for(o.s();!(i=o.n()).done;){var s=i.value;e(s)}}catch(e){o.e(e)}finally{o.f()}}}(e),t},W=t(59734),H=t(81188),B=t(67453),V=t(52322),q=function(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(s.O,{w:"350px",h:12}),(0,V.jsx)(c.N,{mt:3,w:64,noOfLines:1})]})},K=function(e){var n=e.createdTime,t=e.editors,r=e.isLatest,o=e.onClick,s=e.showPaywall,c=e.paywallCount;if(!t||!t.length)return(0,V.jsx)(V.Fragment,{});var h=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",p=(0,V.jsxs)(a.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:h,maskImage:h},border:"none",isDisabled:s,opacity:"1 !important",onClick:o,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,V.jsxs)(l.k,{w:"100%",direction:"column",children:[(0,V.jsx)(d.x,{fontSize:"sm",children:P()((0,H.P9)(n))}),(0,V.jsx)(d.x,{fontSize:"xs",flex:1,children:t[0].displayName})]}),r&&(0,V.jsx)(u.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,V.jsx)(i.cC,{id:"wL3cK8"})})]});return s?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.kH,{placement:"top",isDisabled:!s,label:s?(0,V.jsx)(i.cC,{id:"PYTBm5",values:{paywallCount:c}}):void 0,children:(0,V.jsx)(f.xu,{mb:4,children:p})}),(0,V.jsx)(L.m,{isNarrow:!0,segmentEvent:M.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,V.jsx)(i.cC,{id:"mVKYtH"})})]}):p},Y=function(e){var n,t=(0,z.Yt)(),r=(0,D.useMemo)(function(){if("unlimited"===t)return{items:e,paywalledItems:[]};var n=parseInt(t),r=e.filter(function(e,t){return 0===t||(0,E.Z)(e.createdTime)>=new Date(Date.now()-864e5*n)}),i=e.slice(r.length,e.length),o=i.length?i[0]:null;return{items:r.concat(o?[o]:[]),paywalledItems:i}},[t,e]),i=r.items,o=r.paywalledItems;return{groupedSnapshots:(0,D.useMemo)(function(){return(0,H.yd)({items:i,sortBy:"createdTime"})},[i]),paywalledSnapshotId:null===(n=o[0])||void 0===n?void 0:n.id,paywallCount:o.length}},Q=function(e){var n=e.groupedSnapshots,t=e.paywalledSnapshotId,s=e.paywallCount,c=e.onClick,a=e.showFetchMore,l=e.onFetchMoreClick,d=e.isFetchingMore;return(0,V.jsxs)(h.t,{w:"100%",children:[Object.entries(n).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e,n){var i=(0,r.Z)(e,2),a=i[0],l=i[1];return(0,V.jsxs)(D.Fragment,{children:[(0,V.jsx)(k.NZ,{px:4,py:2,mx:0,mt:2,children:{today:o.ag._({id:"ecUA8p"}),thisWeek:o.ag._({id:"yByRxz"}),earlier:o.ag._({id:"HGg4T/"})}[a]}),l.map(function(e,r){var i=e.createdTime,o=e.editors,a=e.id;return(0,V.jsx)(K,{onClick:function(){return c(a)},isLatest:0===n&&0===r,createdTime:i,editors:o,showPaywall:t===a,paywallCount:s},a)})]},a)}),a&&(0,V.jsx)(p.z,{isLoading:d,onClick:l,children:(0,V.jsx)(i.cC,{id:"yQ2kGp"})})]})},X=function(){return(0,V.jsxs)(h.t,{w:"100%",children:[(0,V.jsx)(s.O,{h:16}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2}),(0,V.jsx)(s.O,{h:16,mt:2})]})},J=function(e){var n=e.title,t=e.createdBy,r=e.createdTime,o=e.numSnapshots;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.x,{mt:1,children:(0,V.jsx)(i.cC,{id:"yf//Op",values:{0:(0,R.Dw)(r),1:(0,R.Dw)(r),numSnapshots:o}})}),(0,V.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,V.jsx)(i.cC,{id:"JVHTIo",values:{0:null!=t&&t.displayName?null==t?void 0:t.displayName:"Unknown",1:(0,R.p6)(r,"PPp"),title:n}})})]})},$="snapshot-editor-root",ee=function(e){var n=e.id,t=e.doc,r=e.content,i=(0,D.useMemo)(function(){if(r)return U(r,function(e){return e.type===G.W4}).map(function(e){var n;return{__typename:"Card",id:(null===(n=e.attrs)||void 0===n?void 0:n.id)||"",docId:t.id,title:(0,S.getCardTitle)(e),createdTime:t.createdTime,updatedTime:t.updatedTime,archived:!1}})},[r,t]);return(0,V.jsx)(N.fb,{reduxData:{cards:i},initialContent:r,doc:t,docId:t.id,scrollingParentSelector:".".concat($),isInsideDrawer:!0},n)},en=function(e){var n=e.isOpen,t=e.onClose,o=e.doc,s=(0,x.p)(),c=(0,W._i)().getCollaborativeEditorInstance,a=(0,D.useState)(!1),d=a[0],u=a[1],h=(0,T.pfN)({variables:{docId:o.id,first:25},skip:!o||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),S=h.loading,E=h.data,I=h.called,P=h.fetchMore,z=(0,T.opq)({nextFetchPolicy:"cache-only"}),L=(0,r.Z)(z,2),M=L[0],N=L[1],G=N.loading,F=N.data,U=(null==E?void 0:E.snapshots.edges.map(function(e){return e.node}))||[],H=Y(U),K=H.groupedSnapshots,en=H.paywalledSnapshotId,et=H.paywallCount,er=null==E?void 0:E.snapshots.pageInfo,ei=!!(!en&&I&&(null==er?void 0:er.hasNextPage)&&(null==er?void 0:er.endCursor)),eo=(0,D.useCallback)(function(){null!=er&&er.hasNextPage&&null!=er&&er.endCursor&&(u(!0),P({variables:{after:er.endCursor}}).finally(function(){u(!1)}))},[P,null==er?void 0:er.endCursor,null==er?void 0:er.hasNextPage]),es=U[0];(0,D.useEffect)(function(){null!=es&&es.id&&M({variables:{snapshotId:es.id,docId:o.id}})},[o.id,M,null==es?void 0:es.id]);var ec=(0,B.$)(null==o?void 0:o.title),ea=null==o?void 0:o.createdBy,el=null==o?void 0:o.createdTime,ed=null==F?void 0:F.snapshot,eu=ed&&ed.id===o.currentSnapshotId;return(0,V.jsx)(k.Wk,{isDark:!1,children:(0,V.jsxs)(m.d,{placement:"bottom",onClose:t,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,V.jsx)(j.Z,{}),(0,V.jsxs)(v.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,V.jsx)(g.o,{}),(0,V.jsxs)(b.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[S&&(0,V.jsx)(q,{}),o&&U&&(0,V.jsx)(J,{numSnapshots:(null==U?void 0:U.length)||0,createdBy:ea,createdTime:el,title:ec})]}),(0,V.jsx)(C.f,{p:0,h:"100%",children:(0,V.jsxs)(l.k,{direction:"row",h:"100%",children:[(0,V.jsx)(f.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,V.jsxs)(y.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[S&&(0,V.jsx)(X,{}),!S&&U&&(0,V.jsx)(Q,{onClick:function(e){M({variables:{snapshotId:e,docId:o.id}})},groupedSnapshots:K,paywalledSnapshotId:en,paywallCount:et,showFetchMore:ei,onFetchMoreClick:eo,isFetchingMore:d})]})}),(0,V.jsx)(l.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:$,css:{"--editor-width":"100%"},children:(0,V.jsxs)(l.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,V.jsx)(Z.Y,{}),(!ed||G)&&(0,V.jsx)(A.AA,{}),ed&&!G&&(0,V.jsx)(ee,{id:ed.id,doc:o,content:null==ed?void 0:ed.content.default})]})})]})}),(0,V.jsx)(O.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,V.jsxs)(w.h,{spacing:4,children:[(0,V.jsx)(p.z,{variant:"ghost",onClick:t,children:(0,V.jsx)(i.cC,{id:"dEgA5A"})}),(0,V.jsx)(k.kH,{label:eu?(0,V.jsx)(i.cC,{id:"HJo72u"}):(0,V.jsx)(i.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,V.jsx)(p.z,{variant:"solid",isDisabled:!ed||eu,onClick:function(){if(ed){var e,n=null==U?void 0:null===(e=U.find(function(e){return e.id===ed.id}))||void 0===e?void 0:e.createdTime,r=c();if(r){r.commands.setContent(ed.content.default,!0);var o=ed.content.annotationsAbsolute;o?r.commands.restoreAnnotations(o):r.commands.clearAnnotations(),t(),s({title:(0,V.jsx)(i.cC,{id:"7ovf4C"}),description:(0,V.jsx)(i.cC,{id:"DTim6X",values:{0:n?(0,R.p6)(n,"PPp"):"selected snapshot",GAMMA_ARTIFACT_PROPER_NOUN:_.Yc}}),status:"success",duration:5e3,isClosable:!0})}}},children:(0,V.jsx)(i.cC,{id:"yKu/3Y"})})})]})})]})]})})}},33902:function(e,n,t){t.d(n,{D:function(){return R}});var r,i,o=t(76547),s=t(55452),c=t(87254),a=t(82642),l=t(55479),d=t(11919),u=t(12221),f=t(91012),h=t(76648),p=t(45650),x=t(67887),m=t(8283),j=t(30807),v=t(80040),g=t(95258),b=t(53738),C=t(49929),y=t(55966),O=t(28957),w=t(2784),k=t(43997),S=t(98621),E=t.n(S),I=t(62141),P=t(10710),D=t(59734),A=t(13720),T=t(10939),_=t(52322),R=function(){var e=(0,P.SE)(),n=e.user,t=e.anonymousUser,r=(0,k.I0)(),o=(0,l.p)(),v=(0,D._i)().editor,g=(0,k.v9)((0,I._h)((null==n?void 0:n.id)||t.id)),b=g.collaborators,C=g.followers;(0,T.rU)({editor:v,collaborators:b,user:n});var O=(0,k.v9)(I.Ok),S=(0,k.v9)(I.e0),R=(0,k.v9)(I.yn),L=(0,k.v9)(I.gs),M=(0,k.v9)(I.JA);(0,w.useEffect)(function(){O.forEach(function(e){o({duration:2e3,position:"bottom",render:function(){return(0,_.jsxs)(d.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,_.jsx)(u.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:E()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,_.jsx)(f.x,{ml:2,children:(0,_.jsx)(s.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[O,o]),(0,w.useEffect)(function(){var e=!R&&L&&!M;if(v&&e){o.closeAll();var n=o({id:"detached-toast",render:function(){return(0,_.jsxs)(d.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,_.jsx)(f.x,{size:"sm",mr:6,children:(0,_.jsx)(s.cC,{id:"PjodLp"})}),(0,_.jsxs)(h.h,{size:"sm",alignItems:"center",children:[(0,_.jsx)(p.z,{onClick:function(){r((0,I.Qx)({attached:!0}))},variant:"solid",children:(0,_.jsx)(s.cC,{id:"f/C2ic"})}),(0,_.jsx)(y.kH,{label:(0,_.jsx)(s.cC,{id:"5JWVnj"}),children:(0,_.jsx)(x.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":c.ag._({id:"5JWVnj"}),icon:(0,_.jsx)(a.T,{}),onClick:function(){r((0,I.Qx)({attached:!1,following:null}))}})})]})]})},position:"bottom",duration:null});return function(){o.close(n)}}},[v,R,L,M,o,r]),(0,w.useEffect)(function(){L||!v||v.isDestroyed||r((0,I.Qx)({following:null}))},[v,L,r]);var N=(0,A.i)({base:4,md:6,xl:8})||6,G=N/(C.length?2:1),Z=N/(b.length?2:1);return(0,_.jsx)(d.k,{children:(0,_.jsxs)(m.U,{divider:(0,_.jsx)(j.c,{borderColor:"gray.200"}),children:[C.length&&(0,_.jsx)(z,{type:i.FOLLOWERS,collaborators:C,max:Z,isEveryone:0===b.length,localCollaborator:S,localIsAttached:R}),b.length&&(0,_.jsx)(z,{type:i.COLLABORATORS,collaborators:b,max:G,isEveryone:0===C.length,localCollaborator:S,localIsAttached:R})]})})};(r=i||(i={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";var z=function(e){var n=e.collaborators,t=e.localCollaborator,r=e.localIsAttached,o=e.type,a=e.max,l=e.isEveryone,u=(0,T.OM)(),h=o===i.FOLLOWERS,p=n.length>a,x=p?n.slice(0,a-1):n,m=p?n.length-a+1:0,j=function(e){var n=e.localIsFollowing,t=e.collaborator;h||u({localIsFollowing:n,localIsAttached:r,collaborator:t})};return(0,_.jsx)(O.S,{children:(0,_.jsxs)(v.H,{size:"sm",spacing:h?-2:0,children:[h&&(0,_.jsx)(L,{isEveryone:l}),x.map(function(e,n){var i,o=(null==t?void 0:null===(i=t.memoState)||void 0===i?void 0:i.following)===e.sessionId,c=!!e.idleSince,a=!h&&(p||x.length-1!==n);return(0,_.jsx)(y.Vw,{ignoreFallback:!0,name:e.name,label:(0,_.jsxs)(d.k,{direction:"column",justify:"center",align:"center",children:[(0,_.jsx)(f.x,{children:e.name}),(0,_.jsx)(f.x,{fontSize:"xs",children:h?(0,_.jsx)(s.cC,{id:"iRohzP"}):o&&r?(0,_.jsx)(s.cC,{id:"1QTvS5"}):(0,_.jsx)(s.cC,{id:"2Ldadb"})})]}),pointerEvents:c?"none":"auto",opacity:c?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:o&&r,bg:e.color,shadow:"base",color:E()(e.color).isDark()?"white":"black",cursor:h?"":"pointer",boxProps:a?{marginEnd:-2}:{},onClick:function(){return j({localIsFollowing:o,collaborator:e})}},e.sessionId)}),m>0&&(0,_.jsxs)(y.Z9,{tooltipLabel:c.ag._({id:"25VyZX"}),onClick:function(e){var r,i=n.find(function(n){return n.id===e.id});j({localIsFollowing:!!(i&&(null==t?void 0:null===(r=t.memoState)||void 0===r?void 0:r.following)===i.sessionId),collaborator:i})},avatars:n,count:m,disabled:h,children:[(0,_.jsx)(f.x,{px:2,children:h?(0,_.jsx)(s.cC,{id:"vliZud",values:{0:n.length}}):(0,_.jsx)(s.cC,{id:"sC4bhw",values:{0:n.length}})}),!h&&(0,_.jsx)(f.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,_.jsx)(s.cC,{id:"miJbY4"})}),(0,_.jsx)(g.R,{})]})]})})},L=function(e){var n=e.isEveryone,t=(0,w.useState)(!1),r=t[0],i=t[1],c=(0,w.useState)(!1),a=c[0],l=c[1],d=(0,w.useState)(!1),u=d[0],f=d[1];return((0,w.useEffect)(function(){!r&&n&&(l(!0),i(!0),setTimeout(function(){l(!1)},3e3))},[n,r]),n)?(0,_.jsx)(b.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,_.jsx)(y.kH,{label:(0,_.jsx)(s.cC,{id:"w7dTyp"}),isOpen:u||a,children:(0,_.jsx)(b.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:(0,_.jsx)(C.G,{icon:o.Md})})})}):(0,_.jsx)(b.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,_.jsx)(C.G,{icon:o.Md})})}},74624:function(e,n,t){t.d(n,{U:function(){return M}});var r=t(81333),i=t(60670),o=t(54728),s=t(51434),c=t(94301),a=t(91333),l=t(10344),d=t(49929),u=t(2784),f=t(23313),h=t(26087),p=t(2875),x=t(10710),m=t(29555),j=t(23015),v=t(34860),g=t(51823),b=t(25298),C=t(53738),y=t(71354),O=t(98841),w=t(25925),k=t(6563),S=t(52322),E=(0,O.E)(C.xu),I=function(e){var n=e.commentFeedItems,t=e.editor,r=e.doc,i=e.user;return t&&i?(0,S.jsx)(y.K,{p:2,children:(0,S.jsx)(w.M,{initial:!1,children:n.map(function(e){return(0,S.jsx)(E,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,S.jsx)(k.q,{comment:e,editor:t,selfUser:i,docId:r.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id)})})}):null},P=t(95235),D=t(55479),A=t(38140),T=t(37914);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(n){(0,P.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z=function(e){return!!e.comment&&null!==e.timeout},L=function(e){var n=e.user,t=e.docId,i=e.docComments,o=void 0===i?[]:i,s=e.pauseExiration,c=void 0!==s&&s,a=e.duration,l=void 0===a?5e3:a,d=(0,D.p)(),h=null==n?void 0:n.id,p=(0,u.useMemo)(function(){if(!h)return null;var e=new A.default(T.v.KNOCK_PUBLIC_KEY);return e.authenticate(h),e},[h]),x=(0,u.useState)({}),m=x[0],j=x[1],v=(0,u.useRef)(!0),g=(0,u.useRef)(c);g.current=c,(0,u.useEffect)(function(){return function(){v.current=!1}},[]);var b=(0,u.useCallback)(function(){return j({})},[]),C=(0,u.useCallback)(function(e){j(function(n){return Object.entries(n).reduce(function(n,t){var i=(0,r.Z)(t,2),o=i[0],s=i[1];return(!0===e?-1===s.timeout:o===e)||(n[o]=s),n},{})})},[]);return(0,u.useEffect)(function(){c||C(!0)},[C,c]),(0,u.useEffect)(function(){Object.entries(m).forEach(function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],s=i.entry;if(null===i.timeout){var c=s.data.commentId,a=null==o?void 0:o.find(function(e){return e.id===c});if(a){var d=setTimeout(function(){v.current&&(g.current?j(function(e){var n=R({},e);return n[t].timeout=-1,n}):C(t))},l);j(function(e){return R(R({},e),{},(0,P.Z)({},t,{entry:s,comment:a,timeout:d}))})}}})},[m,o,l,C]),(0,u.useEffect)(function(){if(p&&t){var e=p.feeds.initialize(T.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),n=e.listenForUpdates();e.on("messages.new",function(n){var i=n.entries,o=(0,r.Z)(i,1)[0];o.data.docId===t&&(j(function(e){return R(R({},e),{},(0,P.Z)({},o.id,{entry:o,timeout:null}))}),e.markAsSeen(o).then(function(){console.debug("New notification marked as seen")}).catch(function(e){console.error("Unable to mark notification as seen",e)}))});var i=f.C9N.on("status",function(e){var n=e.isConnected,t=p.client();n?t.connectSocket():t.disconnectSocket()});return function(){i(),n()}}},[t,d,p]),{reset:b,comments:Object.values(m).filter(z).map(function(e){return e.comment})}},M=function(e){var n,t=e.toggleCommentsPanel,C=e.isCommentsPanelOpen,y=e.doc,O=e.mode,w=(0,x.SE)().user,k=(0,m._i)().editor,E=(0,v.XI)(),P=(0,r.Z)(E,2),D=P[0],A=P[1],T=L({user:w,docId:null==y?void 0:y.id,docComments:null==y?void 0:y.comments,pauseExiration:A}),_=T.comments,R=T.reset,z=!!(k&&y&&y.comments);(0,u.useEffect)(function(){if(z){var e=(0,g.sY)().commentId;e&&p.pw.emit(p.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})}},[z]),(0,u.useEffect)(function(){(C||O===h.q.SLIDE_VIEW)&&R()},[C,R,O]);var M=!!_.length&&!C&&O!==h.q.SLIDE_VIEW,N=(null==y?void 0:null===(n=y.comments)||void 0===n?void 0:n.filter(function(e){return e.status===f.Ux9.Open}).length)||0;return(0,S.jsxs)(o.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:M,placement:"bottom",children:[(0,S.jsx)(s.x,{children:(0,S.jsx)(b.h,{onMouseDown:j.br,onClick:t,icon:(0,S.jsx)(d.G,{icon:i.Mz}),isActive:C,"aria-label":C?"Hide comments":"Show comments",borderRadius:5,children:N})}),(0,S.jsx)(c.h,{children:y&&(0,S.jsxs)(a.y,{bg:"white",shadow:"lg",border:"none",ref:D,children:[(0,S.jsx)(l.Q,{bg:"white"}),(0,S.jsx)(I,{editor:k,user:w,commentFeedItems:_,doc:y})]})})]})}},5735:function(e,n,t){t.d(n,{u:function(){return u}});var r=t(16686),i=t(55452),o=t(11919),s=t(49929),c=t(55966),a=t(81234),l=t(25298),d=t(52322),u=function(){return(0,d.jsx)(o.k,{children:(0,d.jsx)(c.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,d.jsx)(i.cC,{id:"EVnzPs"}),children:(0,d.jsx)(l.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:function(){a.T.emit("toggle",{})},icon:(0,d.jsx)(s.G,{icon:r.Jy})})})})}},45390:function(e,n,t){t.d(n,{a:function(){return d}});var r=t(53738),i=t(98841),o=t(25925),s=t(46358),c=t(62141),a=t(52322),l=(0,i.E)(r.xu),d=function(){var e=(0,s.CG)(c.WI),n=(0,s.CG)(c.yn);return(0,a.jsx)(o.M,{initial:!1,children:e&&n&&(0,a.jsx)(l,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})}},47090:function(e,n,t){t.d(n,{T:function(){return eW}});var r=t(95235),i=t(60697),o=t(2885),s=t(47557),c=t(55452),a=t(78116),l=t(56915),d=t(16796),u=t(64827),f=t(92619),h=t(2167),p=t(89190),x=t(73848),m=t(24798),j=t(53738),v=t(84520),g=t(95085),b=t(49929),C=t(55966),y=t(2784),O=t(30118),w=t(46358),k=t(2875),S=t(21529),E=t(62141),I=t(6985),P=t(81333),D=t(8097),A=t(60831),T=t(69943),_=t(97968),R=t(34302),z=t(87254),L=t(71354),M=t(40110),N=t(9088),G=t(30893),Z=t(45650),F=t(40771),U=t(63849),W=t(2575),H=t(91012),B=t(4036),V=t(8283),q=t(50390),K=t(71193),Y=t(54336),Q=t(11919),X=t(81170),J=t(52322);function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var en=function(e){var n=e.updateDocSetting,t=(0,w.CG)(E.US),r=t.defaultFullBleed,i=t.defaultContentWidth,s=t.presentBackdrop,a=t.cardDimensions,l=(0,X.l)(a);return(0,J.jsxs)(L.K,{spacing:5,mt:4,divider:(0,J.jsx)(M.i,{}),children:[(0,J.jsx)(et,{title:z.ag._({id:"jBvtuq"}),description:z.ag._({id:"Q3Qdcd"}),icon:R.qn,control:(0,J.jsxs)(N.v,{isLazy:!0,children:[(0,J.jsx)(G.j,{minW:28,as:Z.z,size:"sm",variant:"plain",leftIcon:(0,J.jsx)(b.G,{icon:l.icon,fixedWidth:!0}),rightIcon:(0,J.jsx)(b.G,{icon:D.pt}),style:{marginLeft:"1rem"},children:l.label()}),(0,J.jsx)(F.q,{maxW:"400px",children:(0,J.jsx)(U._,{value:a,type:"radio",onChange:function(e){n("cardDimensions",e)},children:Object.entries(X.b).map(function(e){var n=(0,P.Z)(e,2),t=n[0],r=n[1],i=r.label,o=r.description;return(0,J.jsxs)(W.i,{value:t,children:[(0,J.jsxs)(H.x,{children:[i(),"fluid"===t&&(0,J.jsxs)(J.Fragment,{children:[" ",(0,J.jsx)(B.C,{colorScheme:"gray",ml:1,children:(0,J.jsx)(c.cC,{id:"ovBPCi"})})]})]}),(0,J.jsx)(H.x,{fontSize:"xs",color:"gray.500",children:o()})]},t)})})})]})}),(0,J.jsx)(et,{title:z.ag._({id:"lklIf1"}),description:z.ag._({id:"aJ+ISV"}),icon:_.dH,value:"lg"===i,onChange:function(e){return n("defaultContentWidth",e?"lg":void 0)}}),(0,J.jsx)(et,{title:z.ag._({id:"lsVq2Z"}),description:z.ag._({id:"u/0NJZ"}),icon:T.r9,value:"full"===r,onChange:function(e){return n("defaultFullBleed",e?"full":void 0)}}),(0,J.jsx)(et,{title:z.ag._({id:"7VfbQM"}),description:z.ag._({id:"XZHPlI"}),icon:o.UH,value:s,onChange:function(e){return n("presentBackdrop",e)}}),(0,J.jsxs)(L.K,{children:[(0,J.jsx)(H.x,{fontSize:"xs",color:"gray.600",children:(0,J.jsx)(c.cC,{id:"ymPKi7"})}),(0,J.jsxs)(V.U,{alignItems:"flex-start",spacing:"4",children:[(0,J.jsx)(ei,{label:z.ag._({id:"wl99H6"}),cardDimensions:l,isWide:"lg"===i,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,J.jsx)(ei,{label:z.ag._({id:"GWjDlt"}),cardDimensions:l,isWide:"lg"===i,showBackdrop:s&&"full"!==r,scaleCardUp:!s||"full"===r})]})]})]})},et=function(e){var n=e.title,t=e.description,r=e.icon,i=e.children,o=e.helpDescription,s=e.value,c=e.onChange,a=e.control;return(0,J.jsxs)(V.U,{alignItems:"flex-start",spacing:2,children:[r&&(0,J.jsx)(H.x,{fontSize:"lg",width:8,maxW:8,children:(0,J.jsx)(b.G,{icon:r,fixedWidth:!0})}),(0,J.jsxs)(L.K,{spacing:4,flex:1,children:[(0,J.jsxs)(L.K,{spacing:1,children:[(0,J.jsxs)(q.X,{size:"sm",fontWeight:"semibold",children:[n," ",o?(0,J.jsx)(C.Yq,{label:o,ml:1}):null]}),(0,J.jsx)(H.x,{fontSize:"xs",color:"gray.600",children:t})]}),i]}),c&&(0,J.jsx)(K.r,{isChecked:s,onChange:function(e){return c(e.target.checked)}}),a]})},er=function(e){var n=e.hideExtraLines;return(0,J.jsxs)(L.K,{w:"100%",py:2,px:2.5,children:[(0,J.jsx)(j.xu,{w:20,h:1.5,bg:"gray.200"}),(0,J.jsxs)(V.U,{flex:"1",alignItems:"flex-start",children:[(0,J.jsx)(Y.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,J.jsx)(j.xu,{fontSize:"lg",children:(0,J.jsx)(b.G,{icon:A.Vm})})}),(0,J.jsxs)(L.K,{flex:"1",spacing:"1",children:[(0,J.jsx)(j.xu,{h:1,bg:"gray.200"}),(0,J.jsx)(j.xu,{h:1,bg:"gray.200"}),(0,J.jsx)(j.xu,{h:1,bg:"gray.200"}),(0,J.jsx)(j.xu,{w:n?"80%":"100%",h:1,bg:"gray.200"}),!n&&(0,J.jsx)(j.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},ei=function(e){var n=e.cardDimensions,t=e.showBackdrop,r=e.isWide,i=e.label,o=e.scaleCardUp,s={boxShadow:"".concat(t?"sm":""),w:"".concat(r?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(o?"scale(1.15)":"none")};return(0,J.jsxs)(L.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,J.jsx)(Q.k,{bg:t?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:n.aspectRatio?(0,J.jsx)(Y.o,ee(ee({},s),{},{ratio:n.aspectRatio,children:(0,J.jsx)(j.xu,{children:(0,J.jsx)(er,{hideExtraLines:r})})})):(0,J.jsx)(L.K,ee(ee({},s),{},{children:(0,J.jsx)(er,{hideExtraLines:r})}))}),(0,J.jsx)(H.x,{fontSize:"xs",color:"gray.700",children:i})]})},eo=t(72360),es=t(48322),ec=t(35634),ea=t(74928),el=t(35258),ed=function(e){var n=e.editor,t=(0,w.CG)(E.Pu),r=(0,w.CG)(E.XV),i=(0,y.useCallback)(function(e){null==n||n.commands.updateNestedAttributesAtPos(0,e)},[n]);return(0,J.jsx)(el.o,{editor:n,background:r,updateNestedAttributes:i,defaultMessage:(0,J.jsxs)(eo.b,{children:[(0,J.jsx)(es.z,{}),(0,J.jsx)(c.cC,{id:"dyXYfJ"})]}),isDark:(0,ec.wj)(t),isValidSource:ea.Rr})},eu=t(2046),ef=t(70287),eh=t(27777),ep=t(25793),ex=t(69232),em=t(23313),ej=t(65185),ev=t(98875),eg=t(87796),eb=t(51331),eC=t(78308),ey=t(52596),eO=t(85041),ew=t(55479),ek=t(93319),eS=t(21891),eE=t(92936),eI=t(79821),eP=t(76648),eD=t(60807),eA=t(84103),eT=t(13419),e_=t(42879),eR=t(68197),ez=t(47827),eL=function(e,n){var t;return null==e?void 0:null===(t=e.routes.find(function(e){return e.docId===n}))||void 0===t?void 0:t.path},eM=function(){var e=(0,ew.p)(),n=(0,ez.AA)().openPageSetup,t=(0,ev.ye)("sites"),r=(0,w.CG)(eR.yx),i=(0,w.CG)(eT.lH),o=(0,em.qbt)(),s=(0,P.Z)(o,2),a=s[0],l=s[1].loading,d=eL(i,null==r?void 0:r.id),u=(0,y.useState)(function(){return(0,e_.es)(d||"")}),f=u[0],h=u[1],p=(0,y.useState)(function(){return(0,e_.es)(d||"")}),x=p[0],m=p[1],v=(0,e_.gT)({routes:(null==i?void 0:i.routes)||[],path:(0,e_.fJ)(f),docId:null==r?void 0:r.id}),g=!!v,b=x!==f&&!g,C=(0,y.useCallback)(function(){h(x)},[x]),O=(0,y.useCallback)(function(){if(b){if(!(null!=i&&i.id)||!(null!=r&&r.id)){console.error("Missing site or doc");return}var n=(0,e_.fJ)(f);a({variables:{input:{siteId:i.id,docId:r.id,path:n}},refetchQueries:["GetSite"]}).then(function(){m(f),h(f)}).catch(function(n){e({status:"error",title:(0,J.jsx)(c.cC,{id:"dl5vwx"}),description:n.message}),console.error("[UrlSlugForm] Error setting route",n.message)})}},[b,null==r?void 0:r.id,f,a,null==i?void 0:i.id,e]);return t?(0,J.jsxs)(L.K,{pb:6,children:[(0,J.jsx)(L.K,{direction:"row",children:(0,J.jsxs)(H.x,{children:[(0,J.jsx)(c.cC,{id:"dq8+qI"})," "]})}),(0,J.jsx)(ek.L,{}),(0,J.jsx)(L.K,{spacing:2,children:(0,J.jsx)(V.U,{spacing:1,children:(0,J.jsxs)(eu.NI,{as:"fieldset",isInvalid:g,children:[(0,J.jsx)(V.U,{children:(0,J.jsxs)(eS.B,{children:[(0,J.jsx)(eE.Ui,{children:"/"}),(0,J.jsx)(eh.I,{isDisabled:l,bg:"white",flex:2,value:f,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),O())},onChange:function(e){h((0,e_.pi)(e.currentTarget.value))}}),(0,J.jsx)(eI.R,{in:b,unmountOnExit:!0,children:(0,J.jsx)(j.xu,{ml:2,children:(0,J.jsxs)(eP.h,{w:"100%",children:[(0,J.jsx)(Z.z,{variant:"solid",isLoading:l,isDisabled:g,onClick:O,children:(0,J.jsx)(c.cC,{id:"tfDRzk"})}),(0,J.jsx)(Z.z,{onClick:C,children:(0,J.jsx)(c.cC,{id:"dEgA5A"})})]})})})]})}),v?(0,J.jsx)(eD.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,J.jsx)(H.x,{fontSize:"xs",children:(0,J.jsx)(c.cC,{id:"DQaTdC",components:{0:(0,J.jsx)(eA.r,{textDecoration:"underline",onClick:function(){return n(v.docId,"preview")}})}})})}):(0,J.jsx)(eu.Q6,{fontSize:"sm",children:(0,J.jsx)(L.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:(0,J.jsx)(L.K,{spacing:1,children:(0,J.jsx)(H.x,{color:"gray.500",children:(0,J.jsx)(c.cC,{id:"ZMlbHK"})})})})})]})})})]}):(0,J.jsx)(J.Fragment,{})},eN=t(34860),eG=function(e){var n=e.updateDocSetting,t=(0,w.CG)(E.US).metaDescription;(0,ev.ye)("sites");var r=(0,w.CG)(E.yx),i=(0,w.CG)(ej.cn),o=(0,w.CG)(ej.$4),s=(0,y.useState)(function(){return(null==r?void 0:r.title)||""}),a=s[0],l=s[1],d=(0,y.useState)(function(){return t||""}),u=d[0],f=d[1],h=(0,em.D1_)(),p=(0,P.Z)(h,1)[0],x=(0,y.useCallback)(function(e){r&&p({variables:{id:r.id,title:e}})},[r,p]),m=(0,eN.Kt)(x,300),v=(0,y.useCallback)(function(e){l(e.target.value.substring(0,eO.S8)),m(e.target.value.substring(0,eO.S8))},[m]),g=(0,y.useCallback)(function(e){n("metaDescription",e)},[n]),b=(0,eN.Kt)(g,300),C=(0,w.CG)(ej.NN),O=null==C?void 0:C.previewUrl,k=(0,eb.dU)(null==r?void 0:r.organization),S=(0,eg.U)(a||i,k),I=(0,eg.V)(u||o,k);return(0,J.jsxs)(L.K,{spacing:4,children:[(0,J.jsxs)(eu.NI,{children:[(0,J.jsxs)(V.U,{justifyContent:"center",children:[(0,J.jsx)(ef.l,{flex:"1",children:(0,J.jsx)(c.cC,{id:"MHrjPM"})}),(0,J.jsx)(ex.W,{length:a.length||0,idealLength:eO.si,maxLength:eO.S8})]}),(0,J.jsx)(eh.I,{value:a,placeholder:i||z.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:function(e){"Enter"===e.key&&x(a)},onChange:v,"data-title-input":!0})]}),(0,J.jsx)(eM,{}),(0,J.jsxs)(eu.NI,{children:[(0,J.jsxs)(V.U,{justifyContent:"center",children:[(0,J.jsx)(ef.l,{flex:"1",children:(0,J.jsx)(c.cC,{id:"Nu4oKW"})}),(0,J.jsx)(ex.W,{length:u.length||0,idealLength:eO.cl,maxLength:eO.Us})]}),(0,J.jsx)(ep.g,{bg:"white",rows:4,value:u,placeholder:o||z.ag._({id:"2VBqT4"}),onChange:function(e){f(e.target.value.substring(0,eO.Us)),b(e.target.value.substring(0,eO.Us))}})]}),(0,J.jsxs)(j.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,J.jsxs)(L.K,{spacing:2,mb:4,children:[(0,J.jsx)(H.x,{size:"sm",children:(0,J.jsx)(c.cC,{id:"h8sMnd"})}),(0,J.jsx)(eZ,{title:S,description:I,screenshotUrl:O})]}),(0,J.jsxs)(L.K,{spacing:2,children:[(0,J.jsx)(H.x,{size:"sm",children:(0,J.jsx)(c.cC,{id:"d3xOlk"})}),(0,J.jsx)(eF,{title:S,description:I,screenshotUrl:O}),(0,J.jsx)(H.x,{fontSize:"sm",color:"gray.500",children:(0,J.jsx)(c.cC,{id:"gkahtG"})})]})]}),(0,J.jsx)(ey.V,{label:(0,J.jsx)(c.cC,{id:"SDyz5I"}),segmentEvent:eC.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:r})]})},eZ=function(e){var n=e.title,t=e.description,r=e.screenshotUrl;return(0,J.jsxs)(j.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,J.jsx)(Y.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,J.jsx)(j.xu,{bgColor:"gray.200",bgImage:"url(".concat(r,")"),backgroundSize:"cover",position:"relative"})}),(0,J.jsxs)(L.K,{px:4,py:3,spacing:1,children:[(0,J.jsx)(H.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:n}),(0,J.jsx)(H.x,{fontSize:"xs",noOfLines:2,children:t})]})]})},eF=function(e){var n=e.title,t=e.description;return(0,J.jsxs)(L.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,J.jsx)(H.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:n}),(0,J.jsx)(H.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:t})]})},eU=["cards","background","preview"],eW=function(e){var n=e.editor,t=(0,w.CG)(E.ke),P=(0,O.M)({id:"pageSetupDisclosure"}),D=P.isOpen,A=P.onClose,T=P.onOpen,_=(0,y.useState)(0),R=_[0],z=_[1];(0,y.useEffect)(function(){var e=function(e){z(eU.indexOf(e)),T()},n=I.T.on("openPageSetup",e),t=k.pw.on(k.TI.OPEN_PAGE_SETUP,e);return function(){n(),t()}},[T,A]);var L=(0,S.A)(n),M=(0,y.useCallback)(function(e,t){null==n||n.commands.updateNestedAttributesAtPos(0,{settings:(0,r.Z)({},e,t)})},[n]);return(0,J.jsx)(C.Wk,{isDark:!1,children:(0,J.jsxs)(a.d,{returnFocusOnClose:!1,isOpen:D,placement:"right",onClose:A,size:"md",blockScrollOnMount:!1,children:[(0,J.jsx)(l.Z,{background:"none"}),(0,J.jsxs)(d.s,{"data-testid":"page-setup-drawer",onKeyDown:L,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,J.jsx)(u.o,{}),(0,J.jsx)(f.x,{children:(0,J.jsx)(c.cC,{id:"fvaOtb"})}),(0,J.jsx)(h.f,{overflowX:"hidden",children:(0,J.jsxs)(p.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:R,onChange:z,children:[(0,J.jsxs)(x.t,{children:[(0,J.jsxs)(m.O,{children:[(0,J.jsx)(j.xu,{mr:2,children:(0,J.jsx)(b.G,{icon:s.s2})}),(0,J.jsx)(c.cC,{id:"Ccpbzh"})]}),(0,J.jsxs)(m.O,{children:[(0,J.jsx)(j.xu,{mr:2,children:(0,J.jsx)(b.G,{icon:o.UH})}),(0,J.jsx)(c.cC,{id:"GtJbUa"})]}),(0,J.jsxs)(m.O,{children:[(0,J.jsx)(j.xu,{mr:2,children:(0,J.jsx)(b.G,{icon:i.g4})}),(0,J.jsx)(c.cC,{id:"rdUucN"})]})]}),(0,J.jsxs)(v.n,{children:[(0,J.jsx)(g.x,{p:2,mt:4,children:(0,J.jsx)(en,{editor:n,updateDocSetting:M},t)}),(0,J.jsx)(g.x,{p:2,mt:4,children:(0,J.jsx)(ed,{editor:n,updateDocSetting:M},t)}),(0,J.jsx)(g.x,{p:2,mt:4,children:(0,J.jsx)(eG,{editor:n,updateDocSetting:M},t)})]})]})})]})]})})}},46231:function(e,n,t){t.d(n,{S:function(){return ep}});var r=t(12741),i=t(60697),o=t(26673),s=t(55452),c=t(9088),a=t(91012),l=t(30893),d=t(53738),u=t(94301),f=t(40771),h=t(82904),p=t(95258),x=t(8283),m=t(93319),j=t(4036),v=t(49929),g=t(55966),b=t(2784),C=t(56317),y=t(98875),O=t(75085),w=t(30118),k=t(32333),S=t(18748),E=t(35330),I=t(16092),P=t(92779),D=t(27901),A=t(10710),T=t(59734),_=t(95235),R=t(81333),z=t(49626),L=t(46973),M=t(55479),N=t(20010),G=t(56915),Z=t(48273),F=t(92619),U=t(64827),W=t(2167),H=t(11919),B=t(72360),V=t(48322),q=t(71354),K=t(76360),Y=t(75342),Q=t(36895),X=t(40110),J=t(80353),$=t(5632),ee=t(24021),en=t(23313),et=t(42879),er=t(93589),ei=t(52322);function eo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function es(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(t),!0).forEach(function(n){(0,_.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ec=function(e){var n,t=e.title,r=e.site,i=e.docId,o="/".concat((0,er.IR)(t||"untitled"));return null!=r&&null!==(n=r.routes)&&void 0!==n&&n.find(function(e){return e.path===o})&&(o="".concat(o,"-").concat(i.slice(0,4))),o},ea={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},el=function(e){var n=e.isOpen,t=e.onClose,r=e.doc,i=e.onCreateSiteClick,o=(0,A.SE)().currentWorkspace,c=(0,en.qbt)(),l=(0,R.Z)(c,1)[0],d=(0,b.useState)(!1),u=d[0],f=d[1],h=(0,en.VP0)(),p=(0,R.Z)(h,1)[0],j=(0,en.bBo)({variables:{workspaceId:null==o?void 0:o.id},skip:!(null!=o&&o.id)}),C=j.data,y=j.loading,w=(0,M.p)(),k=(0,$.useRouter)().push,S=null==C?void 0:C.sites,E=r&&r.orgAccess!==en.y3$.Manage,I=(0,b.useCallback)(function(e){f(!0);var n=null==S?void 0:S.find(function(n){return n.id===e}),t=r.id,i=ec({title:r.title,site:n,docId:t});p({variables:{id:t,orgAccess:en.y3$.Manage,themeId:null}}).then(function(){l({variables:{input:{siteId:e,docId:t,path:i}},refetchQueries:["GetSite"]}).then(function(){var n=(0,et.as)(e,t);console.debug("[PublishToWebModal] Doc added to site. Adding route then navigating to editor",t),w({position:"top",title:(0,ei.jsx)(s.cC,{id:"oMgC5V"}),description:(0,ei.jsx)(s.cC,{id:"/qBkEJ"}),status:"success",duration:5e3}),k(n)}).catch(function(e){w({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),f(!1)}).finally(function(){f(!1)})}).catch(function(e){w({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),f(!1)})},[r.id,r.title,k,l,S,w,p]),P=y||u;return(0,ei.jsx)(g.Wk,{isDark:!1,children:(0,ei.jsxs)(N.u_,{isOpen:n,onClose:t,size:"2xl",children:[(0,ei.jsx)(G.Z,{}),(0,ei.jsxs)(Z.h,{children:[(0,ei.jsx)(F.x,{children:(0,ei.jsx)(s.cC,{id:"TMYPtj"})}),(0,ei.jsx)(U.o,{}),(0,ei.jsxs)(W.f,{position:"relative",children:[P&&(0,ei.jsx)(H.k,{w:"100",h:"400px",maxH:"30vh",children:(0,ei.jsx)(ee.AA,{})}),E&&(0,ei.jsxs)(B.b,{status:"warning",mb:4,children:[(0,ei.jsx)(V.z,{}),(0,ei.jsx)(s.cC,{id:"FOQwny",values:{GAMMA_ARTIFACT_PROPER_NOUN:O.Yc}})]}),!P&&(0,ei.jsxs)(q.K,{spacing:4,children:[S&&S.length>0&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(a.x,{fontSize:"lg",fontWeight:600,children:(0,ei.jsx)(s.cC,{id:"/yFyyN"})}),null==S?void 0:S.map(function(e){return(0,ei.jsx)(K.Z,es(es({onClick:function(){return I(e.id)},onKeyPress:function(n){"Enter"===n.key&&I(e.id)}},ea),{},{children:(0,ei.jsx)(Y.e,{children:(0,ei.jsxs)(x.U,{children:[(0,ei.jsxs)(q.K,{spacing:0,children:[(0,ei.jsxs)(x.U,{children:[e.faviconUrl&&(0,ei.jsx)(Q.E,{w:"4",src:e.faviconUrl}),(0,ei.jsx)(a.x,{fontWeight:"600",children:e.name})]}),(0,ei.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,ei.jsx)(s.cC,{id:"MoI916",values:{GAMMA_ARTIFACT_PROPER_NOUN:O.Yc}})})]}),(0,ei.jsx)(m.L,{}),(0,ei.jsx)(v.G,{icon:L.eF})]})})}),e.id)}),(0,ei.jsxs)(x.U,{children:[(0,ei.jsx)(X.i,{}),(0,ei.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,ei.jsx)(s.cC,{id:"ZAVklK"})}),(0,ei.jsx)(X.i,{})]})]}),(0,ei.jsx)(K.Z,es(es({onClick:function(){i()},onKeyPress:function(e){"Enter"===e.key&&i()}},ea),{},{children:(0,ei.jsx)(Y.e,{children:(0,ei.jsxs)(x.U,{children:[(0,ei.jsxs)(q.K,{spacing:0,children:[(0,ei.jsx)(a.x,{fontWeight:"600",children:(0,ei.jsx)(s.cC,{id:"xaUIb2"})}),(0,ei.jsx)(x.U,{children:(0,ei.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,ei.jsx)(s.cC,{id:"pdnqNS",values:{GAMMA_ARTIFACT_PROPER_NOUN:O.Yc}})})})]}),(0,ei.jsx)(m.L,{}),(0,ei.jsx)(v.G,{icon:z.r8})]})})}))]})]}),(0,ei.jsx)(J.m,{})]})]})})},ed=t(31912),eu=t(23015),ef=t(25298),eh=t(6985),ep=function(e){var n,t,_=e.doc,R=e.showAnalytics,z=e.showSharePublic,L=void 0===z||z,M=e.showEmbed,N=void 0===M||M,G=(0,w.M)({id:"titleModalDisclosure"});G.isOpen,G.onOpen,G.onClose;var Z=(0,w.M)({id:"analyticsModalDisclosure"}),F=Z.isOpen,U=Z.onClose,W=Z.onOpen,H=(0,E.y)(),B=H.isSharePanelOpen,V=H.onSharePanelOpen,q=H.onSharePanelClose,K=H.view,Y=H.setView,Q=(0,w.M)({id:"publishToWeb"}),X=Q.isOpen,J=Q.onClose,$=Q.onOpen,ee=(0,w.M)({id:"create-site-modal"}),en=ee.isOpen,et=ee.onOpen,er=ee.onClose,eo=(0,y.ye)("sites"),es=(0,A.SE)(),ec=es.user,ea=es.currentWorkspace,ep=(0,T._i)().editor,ex=(0,A.py)("view",_),em=(0,A.py)("edit",_),ej=(0,A.py)("manage",_),ev=(0,k.z$)(),eg=(0,I.ei)({showSharePublic:L,showEmbed:N});(0,b.useEffect)(function(){return eh.T.on("openSharePanel",function(e){var n=e.view;V(),Y(n)})},[V,Y]);var eb=(0,b.useCallback)(function(){null==ev||ev.track(k.AA.DOC_ANALYTICS_VIEWED,{docId:null==_?void 0:_.id,source:"share_panel",type:ej?"full":"personal"}),W()},[ev,ej,null==_?void 0:_.id,W]);if(!ex||!ec||!_)return null;var eC=_.collaborators||[],ey=_.channels||[],eO=(0,ed.Hs)((0,r.Z)(eC).sort(function(e,n){return e.user.id===ec.id?-1:n.user.id===ec.id?1:0}).map(function(e){return e.user.id===ec.id?"You":e.user.displayName||""}).concat(_.orgAccess?ey.map(function(e){return e.name||""}):[])),ew=(0,P.h_)(_,ec),ek=ew?(0,P.Xp)()[ew]:null,eS=(0,P.Gi)(_,ea),eE=eo&&!_.site&&ej;return null===ek?(console.error("[SharePanel] Unknown VisibilityValue for doc",_),null):(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsxs)(c.v,{children:[(0,ei.jsx)(g.kH,{label:(0,ei.jsxs)(ei.Fragment,{children:[eS&&(0,ei.jsx)(a.x,{fontWeight:"bold",children:(0,ei.jsx)(s.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:O.Yc}})}),ek.title(null==_?void 0:null===(n=_.organization)||void 0===n?void 0:n.name)?(0,ei.jsx)(a.x,{children:ek.title(null==_?void 0:null===(t=_.organization)||void 0===t?void 0:t.name)}):null,(0,ei.jsx)(a.x,{fontSize:"xs",children:ek.subtitle?ek.subtitle(eO||""):""})]}),children:(0,ei.jsx)(l.j,{onFocus:function(e){return e.preventDefault()},as:ef.h,"data-guider-highlight":"share-button",onMouseDown:eu.br,icon:(0,ei.jsx)(d.xu,{children:(0,ei.jsx)(S.aA,{visibility:ek,isFromOtherOrg:eS})}),rightIcon:(0,ei.jsx)(v.G,{"aria-label":"",icon:o.pt}),isDisabled:!em,children:(0,ei.jsx)(s.cC,{id:"Z8lGw6"})})}),(0,ei.jsx)(u.h,{children:(0,ei.jsxs)(f.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[eg.map(function(e){return(0,ei.jsx)(h.s,{onClick:function(){eh.T.emit("openSharePanel",{view:e.viewKey})},icon:(0,ei.jsx)(v.G,{icon:e.icon,fixedWidth:!0}),children:e.label},e.viewKey)}),eE&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(p.R,{}),(0,ei.jsx)(h.s,{icon:(0,ei.jsx)(v.G,{icon:i.g4}),onClick:$,children:(0,ei.jsxs)(x.U,{children:[(0,ei.jsx)(s.cC,{id:"TMYPtj"}),(0,ei.jsx)(m.L,{}),(0,ei.jsx)(j.C,{colorScheme:"green",children:"Beta"})]})})]})]})})]}),eE&&X&&(0,ei.jsx)(el,{isOpen:X,onClose:J,doc:_,onCreateSiteClick:et}),(0,ei.jsx)(S.WQ,{doc:_,editor:ep,isSharePanelOpen:B,onSharePanelOpen:V,onSharePanelClose:q,onAnalyticsPanelOpen:eb,view:K,setView:Y,showAnalytics:void 0===R||R,showSharePublic:L,showEmbed:N}),F&&(0,ei.jsx)(C.r,{doc:_,onSharePanelOpen:V,onAnalyticsPanelClose:U,isAnalyticsPanelOpen:F,mode:ej?"full":"personal"}),eE&&en&&(0,ei.jsx)(D.M,{isOpen:en,onClose:er,existingDocId:_.id})]})}},10939:function(e,n,t){t.d(n,{OM:function(){return w},Zd:function(){return O},rU:function(){return k}});var r=t(55452),i=t(55479),o=t(11919),s=t(12221),c=t(91012),a=t(54073),l=t.n(a),d=t(18149),u=t.n(d),f=t(2784),h=t(98621),p=t.n(h),x=t(53923),m=t(46358),j=t(30341),v=t(62141),g=t(95472),b=t(59131),C=t(17477),y=t(52322),O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",t=(0,m.TL)(),r=(0,j.As)("editor"),i=(0,x.nO)(),o=(0,m.CG)(v.yn,u()),s=(0,m.CG)(v.k8,u()),c=!!(null==s?void 0:s.pos);(0,f.useEffect)(function(){if(e){var n=l()(function(){o&&t((0,v.Qx)({attached:!1}))},500,{leading:!0}),r=(0,C.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",n,!0),function(){r(),n.cancel(),document.removeEventListener("wheel",n,!0)}}},[e,t,o,c,n]);var a=(0,m.CG)(v.ks,u());(0,f.useEffect)(function(){if(e&&!a){var n=l()(function(){if(!r.inProgress){var n=(0,g.lI)(e,100,i);if(!n){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}t((0,v.Us)(n))}},250,{trailing:!0,maxWait:500}),o=l()(function(){if(!(e.state.selection instanceof b.c)){var n=document.querySelector(r.scrollSelector||""),i=null==n?void 0:n.getBoundingClientRect(),o=e.state.selection.from,s=(0,g.Sh)(e,o);if(!n||!i||!s){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:s});return}var c=s.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(o).top-c.y)/c.height).toFixed(2));t((0,v.Us)({pos:o,pct:a}))}},250,{trailing:!0,maxWait:500});return n(),e.on("selectionUpdate",o),window.addEventListener("scroll",n,!0),function(){e.off("selectionUpdate",o),window.removeEventListener("scroll",n,!0)}}},[e,t,r,a,i])},w=function(){var e=(0,i.p)(),n=(0,m.TL)();return(0,f.useCallback)(function(t){var i=t.collaborator,a=t.localIsFollowing,l=t.localIsAttached,d={attached:!0};a?l?d.following=null:e.closeAll():(d.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,y.jsxs)(o.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,y.jsx)(s.q,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:p()(i.color).isDark()?"white":"black",bg:i.color}),(0,y.jsx)(c.x,{ml:2,children:(0,y.jsx)(r.cC,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(d)),n((0,v.Qx)(d))},[e,n])},k=function(e){var n=e.editor,t=e.collaborators,r=e.user,i=(0,f.useRef)(!1),o=w(),s=new URLSearchParams(window.location.search),c=s.get("following_id"),a=s.get("follow_on_start");(0,f.useEffect)(function(){if(!i.current&&a&&(null==r?void 0:r.id)!==c&&n){var e=t.find(function(e){return e.id===c});e&&(o({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),i.current=!0)}},[c,a,n,t,r,o])}},34684:function(e,n,t){t.d(n,{J:function(){return C},P:function(){return b}});var r=t(55452),i=t(55479),o=t(87202),s=t(2784),c=t(46358),a=t(30341),l=t(47592),d=t(34264),u=t(42734),f=t(47191),h=t(62141),p=t(95472),x=t(29555),m=t(17477),j=t(52322),v=(0,o.ZP)("mod+S"),g=(0,o.ZP)("mod+shift+O"),b=function(){var e=(0,i.p)();(0,s.useEffect)(function(){var n=function(n){v(n)&&(n.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,j.jsx)(r.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},t=(0,m.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",n),function(){null==t||t(),window.removeEventListener("keydown",n)}},[e])},C=function(){var e=(0,c.qr)(),n=(0,c.TL)(),t=(0,x._i)().editor;(0,s.useEffect)(function(){if(t){var r=function(r){if(g(r)){r.preventDefault();var i=e.getState(),o=i.TipTap,s=o.cardIdMap,c=o.cardIds,a=o.memoState.expandedCards,d=(0,h.i2)(i),u=c.reduce(function(e,n){var t=!0===a[n],r=s.parents[n]||[],i=r.length>0,o=!d||r.includes(d);return i&&o&&(e.cardIds.push(n),e.total++,e.expanded+=t?1:0),e},{total:0,expanded:0,cardIds:[]}),f=u.total,p=u.expanded,x=u.cardIds;n((0,h.bj)({disable:!0})),setTimeout(function(){n((0,h.bj)({disable:!1}))},100);var m=f===p;y(t,100,!m),(0,l.Nn)(x,m)}};return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}},[n,e,t])},y=function(e,n,t){for(var r=(0,a.cC)("editor"),i=void 0,o=200;o>0;o-=25){var s,c=(0,p.Je)(e,r.scrollSelector,o);if(null!==(s=c.pos)&&void 0!==s&&s.pos){var l=void 0;e.state.doc.nodeAt(c.pos.pos)?l=c.pos.pos:e.state.doc.nodeAt(c.pos.inside)&&(l=c.pos.inside),l&&(!i||l>i)&&(i=l)}}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}var d=O(e,i,t);if(!d){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,m.wO)({element:d,requiredCookie:"cardCollapseDebug=true"});var u=+new Date,f=r.scroller.scrollTop,h=(0,m.LY)(d,r.scrollSelector),x=f-h,j=x<0?0:Math.max(x+200,0);!function e(){if(d){var t=(0,m.LY)(d,r.scrollSelector);r.scroller.scroll({top:f+(t-h-j)}),+new Date-u<n&&requestAnimationFrame(e)}}()},O=function(e,n,t){var r,i=e.state.doc.resolve(n),o=e.state.doc.nodeAt(n),s=(0,p.Sh)(e,n);if(!o){console.warn("[getElementToPin] nodeAt null for $pos",i);return}var c=(0,p.nv)(i,function(){return!0}).reverse();for(c.push({start:i.start(i.depth+1),pos:n,depth:i.depth,node:o});c.length;){var a=c.shift();if(a){var l=(0,d.KH)(a.node),h=(0,u.SA)(a.node),x=(0,f.CU)(a.node),m=l||a.node.isAtom?a.pos:a.start;if(s=(0,p.Sh)(e,m),!t&&l&&a.depth>2||h||x)break}}for(;(null===(r=s)||void 0===r?void 0:r.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s}},28615:function(e,n,t){t.d(n,{j:function(){return p}});var r=t(5632),i=t(2784),o=t(1368),s=t(46358),c=t(41261),a=t(28463),l=t(62141),d=t(26087),u=t(43227),f=t(59734),h=t(51823),p=function(){var e=(0,f._i)().editor,n=(0,r.useRouter)(),t=(0,s.qr)();(0,i.useEffect)(function(){if(e){n.beforePopState(function(e){return!e.as.startsWith("/docs/")});var r=o.fI.on("changed",function(n){var r,i=(0,h.sY)(n.url).cardId,o=t.getState(),s=(0,l.gh)(o);if(console.debug("[useHandleCardHash][handleURLChange]",{payload:n,cardId:i}),s===d.q.DOC_VIEW&&null!==(r=n.state)&&void 0!==r&&r.fromPos&&"pop"===n.method){var u=n.state,f=u.fromPos,p=u.fromPct;e.chain().scrollToPositionInCard(f,p||void 0).command(function(e){var n=e.tr;return(0,a.B0)(f)(n),!0}).run()}else{var x=(0,l.xb)(o)[0];(0,c.YS)({cardId:i||x,editor:e})}});return function(){n.beforePopState(function(){return!0}),r()}}},[e,n,t]),(0,i.useEffect)(function(){if(e){var n=(0,h.sY)(window.location.href).cardId;n&&(0,u.D)({cardId:n,method:"replace"})}},[e])}},29555:function(e,n,t){t.d(n,{dM:function(){return lT},Ur:function(){return lh},nz:function(){return lH},_i:function(){return nK._i}});var r,i,o,s,c,a,l,d=t(95235),u=t(93812),f=t(55452),h=t(87254),p=t(11919),x=t(91012),m=t(53738),j=t(34676),v=t(49929),g=t(55966),b=t(97729),C=t.n(b),y=t(2784),O=t(43997),w=t(23313),k=t(43602),S=t(64288),E=t(87796),I=t(11197),P=t(81333),D=t(29106),A=t(75944),T=t(54728),_=t(51434),R=t(67887),z=t(91333),L=t(83897),M=t(96412),N=t(13089),G=t(41701),Z=t(90129),F=t(29017),U=t(48200),W=t(30733),H=t.n(W),B=t(12436),V=t.n(B),q=function(e){(0,Z.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,U.Z)(r);if(n){var i=(0,U.Z)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,F.Z)(this,e)});function r(){var e;return(0,M.Z)(this,r),e=t.call(this),(0,d.Z)((0,G.Z)(e),"throttled",void 0),e.throttled=V()(function(n){e.emit("move",n)},200,{leading:!0}),document.addEventListener("mousemove",e.throttled),e}return(0,N.Z)(r,[{key:"cleanup",value:function(){document.removeEventListener("mousemove",this.throttled)}}]),r}(t(98555).v),K=H()(function(){return new q}),Y=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=K(),r=(0,y.useState)(!1),i=r[0],o=r[1],s=(0,y.useRef)(n);return(0,y.useEffect)(function(){s.current=n},[n]),(0,y.useEffect)(function(){return t.on("move",function(n){s.current||o(e(n))})},[t,e]),i},Q=t(46358),X=t(62141),J=t(93858),$=t(49392),ee=t(8812),en=t(17815),et=t(35232),er=t(63613),ei=t(80891),eo=t(61374),es=t(8283),ec=t(96530),ea=t(71354),el=t(50390),ed=t(5766),eu=t(40110),ef=t(45650),eh=t(52322),ep=function(e){var n=e.label,t=e.shortcuts;return(0,eh.jsxs)(es.U,{children:[t.map(function(e,n){return(0,eh.jsx)(ec.T,{padding:1,children:e},n)}),(0,eh.jsx)(x.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:n})]})},ex=function(e){var n=e.onClose;return(0,eh.jsx)(m.xu,{children:(0,eh.jsxs)(ea.K,{spacing:6,children:[(0,eh.jsxs)(ea.K,{spacing:1,children:[(0,eh.jsxs)(es.U,{color:"gray.500",children:[(0,eh.jsx)(v.G,{icon:D.UF})," ",(0,eh.jsx)(el.X,{size:"xs",fontWeight:"normal",children:(0,eh.jsx)(f.cC,{id:"h7MgpO"})})]}),(0,eh.jsx)(el.X,{size:"md",children:(0,eh.jsx)(f.cC,{id:"UodEcE"})})]}),(0,eh.jsxs)(ed.M,{spacing:3,columns:1,children:[(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"9xCxY6"}),shortcuts:[(0,eh.jsx)(v.G,{icon:eo.ac},"left"),(0,eh.jsx)(v.G,{icon:ei.eF},"right")]}),(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,eh.jsx)(eu.i,{borderColor:"gray.300"}),(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"/5i2oX"}),shortcuts:[(0,eh.jsx)(v.G,{icon:er.FP},"up"),(0,eh.jsx)(v.G,{icon:et.r5},"down")]}),(0,eh.jsx)(ep,{label:(0,eh.jsx)(f.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,eh.jsx)(ef.z,{size:"sm",variant:"solid",onClick:n,children:(0,eh.jsx)(f.cC,{id:"76gPWk"})})]})},"coach-bar")};function em(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ej(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?em(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):em(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ev=(0,y.memo)(function(){var e=(0,A.q)(),n=e.isOpen,t=e.onToggle,r=e.onClose,i=(0,J._)($.H.hasSeenCoachBar,!1),o=(0,P.Z)(i,2),s=o[0],c=o[1],a=(0,Q.CG)(X.Tf),l=(0,y.useCallback)(function(){s||c(!0),r()},[s,r,c]),d=!s||n,u=Y((0,y.useCallback)(function(e){return e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150},[]));return(0,eh.jsx)(en.H,{mr:a&&s&&!d&&!u?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,eh.jsxs)(T.J,{returnFocusOnClose:!1,isOpen:d,onClose:l,closeOnBlur:!0,children:[(0,eh.jsx)(_.x,{children:(0,eh.jsx)(R.h,{onClick:function(){n&&c(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,eh.jsx)(v.G,{icon:D.UF})})}),(0,eh.jsx)(z.y,ej(ej({},ee.Ro),{},{children:(0,eh.jsx)(L.b,{children:(0,eh.jsx)(ex,{onClose:l})})}))]})})});ev.displayName="PresentModeHelpWidget";var eg=t(75085),eb=t(51331),eC=t(53923),ey=t(21061),eO=t(72043),ew=t(59115),ek=t(15087),eS=t(32736),eE=t(36738),eI=t(74637),eP=t(94301),eD=t(35741),eA=t(82269),eT=t(20299),e_=t(46974),eR=t(48798),ez=t(85249),eL=t(20176),eM=t(36471),eN=t(1410),eG=t(46510),eZ=t(80304),eF=t(55479),eU=t(84103),eW=t(49294),eH=t(34638),eB=t(56143),eV=t(65742),eq=t(50381),eK=t.n(eq),eY=t(97705),eQ=t(93506),eX=t(98841),eJ=t(25925),e$=["children","style"];function e0(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e1(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e0(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e0(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e2={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},e5="custom"in eX.E?eX.E.custom(eY.m.div):(0,eX.E)(eY.m.div),e3=(0,y.forwardRef)(function(e,n){var t,r,i=e.children,o=e.style,s=(0,eA.Z)(e,e$),c=(0,eQ.jC)("Menu",s);return(0,eh.jsx)(eY.m.div,e1(e1({ref:n,__css:{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:null===(r=c.list)||void 0===r?void 0:r.zIndex},style:e1({},o)},s),{},{children:(0,eh.jsx)(eJ.M,{children:(0,eh.jsx)(e5,{className:(0,j.cx)("chakra-menu__menu-list"),variants:e2,style:{transformOrigin:"top left"},initial:e2.exit,animate:e2.enter,exit:e2.exit,__css:e1({outline:0},c.list),children:i})})}))}),e4=t(17107),e6=["type"],e8=["icon","iconSpacing","command","commandSpacing","children"],e9=["className","children"],e7=["className"];function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nt=(0,e4.G)(function(e,n){var t=e.type,r=(0,eA.Z)(e,e6),i=(0,eQ.jC)("Menu",r),o=r.as?null!=t?t:void 0:"button",s=nn({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},i.item);return(0,eh.jsx)(eY.m.button,nn(nn({ref:n,type:o},r),{},{__css:s,_hover:i.item._focus}))}),nr=(0,e4.G)(function(e,n){var t=e.icon,r=e.iconSpacing,i=e.command,o=e.commandSpacing,s=e.children,c=(0,eA.Z)(e,e8),a=t||i?(0,eh.jsx)("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return(0,eh.jsxs)(nt,nn(nn({},c),{},{className:(0,j.cx)("chakra-menu__menuitem"),children:[t&&(0,eh.jsx)(ni,{fontSize:"0.8em",marginEnd:void 0===r?"0.75rem":r,children:t}),a,i&&(0,eh.jsx)(no,{marginStart:void 0===o?"0.75rem":o,children:i})]}))});nr.displayName="MenuItem";var ni=function(e){var n=e.className,t=e.children,r=(0,eA.Z)(e,e9),i=y.Children.only(t),o=y.isValidElement(i)?y.cloneElement(i,{focusable:"false","aria-hidden":!0,className:(0,j.cx)("chakra-menu__icon",i.props.className)}):null,s=(0,j.cx)("chakra-menu__icon-wrapper",n);return(0,eh.jsx)(eY.m.span,nn(nn({className:s},r),{},{__css:{flexShrink:0},children:o}))};ni.displayName="MenuIcon";var no=(0,e4.G)(function(e,n){var t=(0,eQ.jC)("Menu",e);return(0,eh.jsx)(eY.m.span,nn(nn({ref:n},e),{},{__css:t.command,className:"chakra-menu__command"}))});no.displayName="MenuCommand";var ns=function(e){var n=e.className,t=(0,eA.Z)(e,e7),r=(0,eQ.jC)("Menu",e);return(0,eh.jsx)(eY.m.hr,nn(nn({role:"separator","aria-orientation":"horizontal",className:(0,j.cx)("chakra-menu__divider",n)},t),{},{__css:r.divider}))};ns.displayName="MenuDivider";var nc=t(23015),na=t(583),nl=t(81212),nd=t(29787),nu=["editor","openStyleDrawer","cardUrl","getPos","isNested","isFirstCard","isCollapsed","hasCardBackground","onClose","updateAttributes","previewContent"];function nf(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nh(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nf(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nf(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var np=(0,eh.jsx)(v.G,{icon:eZ.TX,fixedWidth:!0}),nx=(0,eh.jsx)(v.G,{icon:eG.WM,fixedWidth:!0}),nm=(0,eh.jsx)(v.G,{icon:eN.O4,fixedWidth:!0}),nj=(0,eh.jsx)(v.G,{icon:eM.$,fixedWidth:!0}),nv=(0,eh.jsx)(v.G,{icon:eL.FP,fixedWidth:!0}),ng=(0,eh.jsx)(v.G,{icon:ez.oK,fixedWidth:!0}),nb=(0,eh.jsx)(v.G,{icon:eR.re,fixedWidth:!0}),nC=(0,eh.jsx)(v.G,{icon:e_.z1,fixedWidth:!0}),ny=(0,eh.jsx)(v.G,{icon:eT.UP,fixedWidth:!0}),nO=(0,y.forwardRef)(function(e,n){var t=e.editor,r=e.openStyleDrawer,i=e.cardUrl,o=e.getPos,s=e.isNested,c=e.isFirstCard,a=e.isCollapsed,l=e.hasCardBackground,d=e.onClose,u=e.updateAttributes,m=e.previewContent,j=(0,eA.Z)(e,nu);console.debug("%c [<ManageCardMenu />] RENDER","background-color: limegreen");var v=(0,eF.p)(),g=(0,nd.K)(),b=(0,y.useCallback)(function(){u&&u({previewContent:null===m?"":null})},[u,m]),C=(0,y.useCallback)(function(){var e=o();if(e&&t){var n=t.state.doc.nodeAt(e),r=n&&(0,eV.getCardTitle)(n.toJSON());t.chain().deleteCard(e).focus().run();var i=h.ag._({id:"0MWv65",values:{displayTitle:r?'"'.concat(r,'"'):"card"}}),s=h.ag._({id:"9uI/rE"}),c=v({title:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(x.x,{noOfLines:1,children:i}),(0,eh.jsx)(eU.r,{textDecoration:"underline",onClick:function(){(0,eB.Yw)(t.state),v.close(c)},children:s})]}),status:"info",duration:3e3,position:"top"})}},[t,o,v]),O=(0,y.useCallback)(function(){var e=o();e&&(null==t||t.commands.duplicateCard(e))},[t,o]),w=(0,y.useCallback)(function(){var e=o();e&&(null==t||t.commands.unnestCard(e))},[t,o]),k=(0,y.useCallback)(function(){var e=o();e&&(null==t||t.chain().mergeCardsAtPos(e).focus().run())},[t,o]),S=(0,y.useCallback)(function(){r(0)},[r]),E=(0,y.useCallback)(function(){r(1)},[r]),I=(0,Q.CG)(X.hN),P=(0,eW.V)(i).onCopy,D=(0,eH.ff)("red.500","red.300"),A=(0,y.useCallback)(function(e){var n;if(e.target&&null!==(n=e.target)&&void 0!==n&&n.closest('[data-testid="open-share"]')){e.preventDefault();return}P(),v({title:h.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[P,v]),T=(0,y.useCallback)(function(){var e=o();if(e&&t){var n=(0,na.PZ)(t,e);if(!n){v({title:h.ag._({id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}eK()(n,{format:"text/html"}),v({title:h.ag._({id:"LHDpRL"}),status:"success",duration:3e3,position:"top"})}},[t,o,v]);return(0,eh.jsxs)(e3,nh(nh({},j),{},{zIndex:"popover",ref:n,onClick:d,"data-testid":"manage-card-menu",children:[(0,eh.jsx)(nr,{icon:(0,eh.jsx)(nl.x,{isLocked:!g}),onClick:A,"data-testid":"copy-card-link",children:(0,eh.jsx)(f.cC,{id:"F0YmUY"})}),(0,eh.jsx)(nr,{icon:nm,onClick:T,children:(0,eh.jsx)(f.cC,{id:"Bq0HJ4"})}),(0,eh.jsxs)(p.k,{direction:"column",display:I?"flex":"none",children:[(0,eh.jsx)(ns,{}),(0,eh.jsx)(nr,{icon:nx,onClick:O,"data-testid":"duplicate-card",children:(0,eh.jsx)(f.cC,{id:"euc6Ns"})}),u&&s&&a&&(0,eh.jsx)(nr,{icon:""===m?nC:ny,onClick:b,"data-testid":"hide-preview",children:""===m?(0,eh.jsx)(f.cC,{id:"dK2evu"}):(0,eh.jsx)(f.cC,{id:"691flv"})}),r&&void 0!==l&&!a&&(0,eh.jsx)(nr,{icon:nb,onClick:S,onMouseDown:nc.br,"data-testid":"card-background",children:l?(0,eh.jsx)(f.cC,{id:"sIpTuZ"}):(0,eh.jsx)(f.cC,{id:"T6eZ9z"})}),r&&!a&&(0,eh.jsx)(nr,{icon:np,onClick:E,onMouseDown:nc.br,"data-testid":"card-style",children:(0,eh.jsx)(f.cC,{id:"k7zVgS"})}),s?(0,eh.jsx)(nr,{icon:ng,onClick:w,"data-testid":"merge-into-parent-card",children:(0,eh.jsx)(f.cC,{id:"b+J8Wt"})}):!1!=s||c?null:(0,eh.jsx)(nr,{icon:nv,onClick:k,"data-testid":"merge-into-card-above",children:(0,eh.jsx)(f.cC,{id:"kV34zB"})}),(0,eh.jsx)(ns,{}),(0,eh.jsx)(nr,{icon:nj,color:D,onClick:C,"data-testid":"delete-card",children:(0,eh.jsx)(f.cC,{id:"cnGeoo"})})]})]}))}),nw=t(62490);function nk(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nS(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nk(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nk(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nE=(0,y.memo)(function(e){var n=e.editor,t=(0,Q.CG)(nw.tk),r=t.isOpen,i=t.ref,o=t.options,s=(0,y.useState)(null),c=s[0],a=s[1],l=(0,eD.D)(i,c,{placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,8]}}],strategy:"absolute"}).styles,d=(0,O.I0)(),u=(0,y.useCallback)(function(){d((0,nw.kG)({saveRef:!0}))},[d]),f=(0,y.useCallback)(function(){d((0,nw.kG)({saveRef:!1}))},[d]);return(0,eI.O)({ref:{current:c},handler:function(){r&&(u(),setTimeout(function(){d((0,nw.gQ)())},0))}}),(0,y.useEffect)(function(){return function(){return f()}},[]),(0,eh.jsx)(eP.h,{children:r&&o&&(0,eh.jsx)(nO,nS(nS({},o),{},{style:nS({},l.popper),onClose:f,ref:a,editor:n}))})}),nI=t(25756),nP=t(40618),nD=t(32333),nA=t(67769),nT=t(84636),n_=t.n(nT),nR=t(54073),nz=t.n(nR),nL=t(72338),nM=t(30341),nN=t(34264),nG=t(17477),nZ=t(26087),nF=function(e,n,t,r,i){var o=r-t,s=Math.max(o-Math.max(e-t,0)-Math.max(r-n,0),0),c=s/o,a=c>0&&s==n-e;return{overlap:c,viewing:i&&(a||c>.5||s>400),only:a}};function nU(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var nW=function(e,n){var t=(0,nM.As)("editor"),r=(0,y.useState)(null),i=r[0],o=r[1],s=(0,y.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),c=(0,Q.CG)(X.gh),a=(0,Q.CG)(X.i2);(0,y.useEffect)(function(){s.current.presentingCardId=null!=a?a:null},[a]);var l=(0,Q.CG)(X.Q5);(0,y.useEffect)(function(){s.current.expandedCards=l},[l]),(0,y.useEffect)(function(){var e=document.querySelector(t.scrollSelector);if(e){o(e);var n=e.getBoundingClientRect().height;s.current.scrollTop=e.scrollTop,s.current.containerHeight=n}},[t.scrollSelector,s]),(0,y.useEffect)(function(){var e=nz()(function(){i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),function(){return window.removeEventListener("scroll",e,!0)}},[i]),(0,y.useEffect)(function(){var e=nz()(function(){i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[i]),(0,y.useEffect)(function(){if(e){if(c===nZ.q.SLIDE_VIEW){var r=setInterval(function(){n.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return function(){return clearInterval(r)}}var i=setInterval(function(){if(!document.hidden){var r=s.current,i=r.scrollTop,o=r.containerHeight,c=r.expandedCards,a=i+o;n_()((0,nL.N2)(e.state.doc,nN.KH),function(e){return e.node.attrs.id}).map(function(n){var r,o=n.node.attrs.id,s=c[o];if(!s)return null;try{r=e.view.nodeDOM(n.pos)}catch(e){return null}if(r instanceof HTMLElement){var l=(0,nG.LY)(r,t.scrollSelector),u=r.offsetHeight+l;return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nU(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nU(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({id:o},nF(i,a,l,u,s))}return null}).filter(function(e){return!!(null!=e&&e.viewing)}).forEach(function(e){n.emit("cardViewed",{cardId:e.id,interval:1e3})})}},1e3);return function(){return clearInterval(i)}}},[c,e,s,n,t.scrollSelector])},nH=function(e){var n=e.editor,t=e.backoffFactor,r=void 0===t?1:t,i=(0,nD.z$)(),o=(0,y.useState)(15e3),s=o[0],c=o[1];nW(n,nA.f);var a=(0,y.useCallback)(function(){nA.f.flush(),c(Math.min(s*r,12e4))},[r,s]);return(0,y.useEffect)(function(){if(i){nA.f.initialize(),nA.f.on("flush",function(e){for(var n=e.viewed,t=0,r=Object.entries(n);t<r.length;t++){var o=(0,P.Z)(r[t],2),s=o[0],c=o[1];i.trackDocEvent(nD.AA.CARD_VIEWED,{card_id:s,duration:c})}});var e=setInterval(function(){return a()},s);return function(){clearInterval(e),nA.f.destroy()}}},[i,s,a]),null},nB=t(10710),nV=t(28916),nq=t(62517),nK=t(59734),nY=t(68197),nQ=t(20406),nX=t(28526),nJ=t.n(nX),n$=t(78116),n0=t(56915),n1=t(16796),n2=t(64827),n5=t(2167),n3=t(80353),n4=t(76648),n6=t(58125),n8=t(30764),n9=t(24021),n7=t(66825),te=t(53865),tn=t(35634),tt=t(95876),tr=t(15235),ti=t(91465),to=t(1153),ts=t(35231),tc=t(34860);function ta(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var tl=y.createContext({enabled:!1,registerEditor:function(e,n){},getAllCards:function(){return[]},userMessage:"",setUserMessage:function(e){}});function td(){return(0,y.useContext)(tl)}var tu=function(e){var n=e.children,t=(0,y.useRef)(new Map),r=(0,y.useRef)(""),i=(0,y.useRef)(function(e,n){t.current.set(e,n)}),o=(0,y.useRef)(function(){return Array.from(t.current.values()).map(function(e){var n,t;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)}),s=(0,y.useCallback)(function(e){r.current=e},[]);return(0,eh.jsx)(tl.Provider,{value:{enabled:!0,registerEditor:i.current,getAllCards:o.current,userMessage:r.current,setUserMessage:s},children:n})},tf=t(82511),th=t(69936),tp=t(56581),tx=t(27302),tm=t(420),tj=t(86297),tv=function(e){var n=e.cardId,t=e.onClick,r=(0,Q.CG)((0,tf.NB)(n)),i=(0,Q.CG)(X.Pu);return r?(0,eh.jsxs)(ea.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[r.variants.map(function(e){if(!e)return null;var o=e.label,s=e.card,c=e.id;return(0,eh.jsx)(tg,{theme:i,isSelected:r.selected===c,label:o,card:s,onClick:function(){t({cardId:n,variationId:c})}},c)}),r.variants.length<2&&(0,eh.jsx)(tx.M,{children:(0,eh.jsx)(tm.$,{})})]}):null},tg=function(e){var n=e.label,t=e.card,r=e.theme,i=e.isSelected,o=void 0!==i&&i,s=e.onClick,c=(0,y.useMemo)(function(){return(0,tj.vL)({docFlags:{cardLayoutsEnabled:!0}},[t])},[t]);return(0,eh.jsxs)(ea.K,{align:"start",children:[(0,eh.jsx)(p.k,{borderRadius:"md",bg:"white",shadow:o?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:void 0===s?function(){}:s,children:(0,eh.jsx)(p.k,{sx:ti.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,eh.jsx)(ti.m,{content:c,theme:r,isThumbnail:!0})})}),(0,eh.jsxs)(x.x,{fontSize:"sm",children:[o&&(0,eh.jsx)(tp.n,{boxSize:3,mr:2}),n]})]})};function tb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tC(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tb(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ty="ai-wizard-editor-root",tO=function(e){var n=e.doc,t=e.cards,r=e.theme,i=void 0===r?te.mU:r,o=(0,ts.R5)(i),s=(0,tn.wj)(i),c=(0,ts.wh)(o,s),a=(0,Q.TL)(),l=td().registerEditor;return((0,y.useEffect)(function(){return function(){a((0,tf.mc)())}},[a]),n)?(0,eh.jsxs)(p.k,tC(tC({bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:ty},c),{},{children:[(0,eh.jsx)(to.Y,{}),t.map(function(e,t){var r,i=null===(r=e.attrs)||void 0===r?void 0:r.id;return i?(0,eh.jsx)(tw,{doc:n,cardId:i,cardIndex:t,cardJSON:e,onCreate:function(e){l(i,e)}},i):null})]})):null},tw=function(e){var n=e.cardId,t=e.cardIndex,r=e.cardJSON,i=e.doc,o=e.onCreate,s=(0,Q.TL)(),c=(0,y.useState)(null),a=c[0],l=c[1],d=td().userMessage,u=(0,th.b)({editor:a});(0,y.useEffect)(function(){a&&u({doc:a.state.doc,cardId:n,message:d})},[u,a,n,t,d]);var f=(0,y.useMemo)(function(){return(0,tt.vL)({docFlags:{cardLayoutsEnabled:!0}},[r])},[r]),h=(0,Q.CG)((0,tf.a4)(n));(0,tc.vm)(function(){if(a&&h){var e=(0,nN.Bw)(a,n);e&&a.commands.command(function(n){var t=n.tr,r=n8.NB.fromJSON(a.schema,h.card);return t.replaceWith(e.pos,e.pos+e.node.nodeSize,r),!0})}},[a,h,n],[h]);var x=(0,y.useCallback)(function(e){var t=e.cardId,r=e.variationId;a&&t===n&&s((0,tf.dx)({cardId:n,variantId:r}))},[s,a,n]);return null!=i&&i.id?(0,eh.jsxs)(p.k,{className:"ai-variation-editor-".concat(n),alignItems:"flex-start",sx:ti.n,my:-8,children:[(0,eh.jsx)(tv,{cardId:n,onClick:x}),(0,eh.jsx)(tr.y,{initialContent:f,onCreate:function(e){var n=e.editor;l(n),o(n)},doc:i,docId:i.id,scrollingParentSelector:".".concat(ty),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},tk=t(30118);function tS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tS(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tI=function(e){var n=(0,tk.M)({id:"cardSuggestionDrawer"}),t=n.isOpen,r=n.onClose,i=n.onOpen,o=(0,Q.CG)(X.Pu),s=(0,y.useState)(function(){return(0,n6.xC)({reducer:Q.Ct})})[0];return(0,eh.jsx)(O.zt,{store:s,children:(0,eh.jsx)(tP,tE(tE({},e),{},{isOpen:t,onClose:r,onOpen:i,theme:o}))})},tP=(r=function(e){var n,t=e.doc,r=e.editor,i=e.theme,o=e.isOpen,s=e.onClose,c=e.onOpen,a=(0,y.useState)([]),l=a[0],d=a[1],u=(0,y.useState)(null),h=u[0],p=u[1],x=td(),m=x.getAllCards,j=x.setUserMessage,v=(0,y.useCallback)(function(){s(),d([]),p(null)},[s]),g=(0,y.useCallback)(function(){if(v(),r){var e={type:"document",content:m()};console.log("[handleConfirm] contentToUse",e);var n=1,t=r.state.doc.nodeSize-2,i=(0,nN.Bw)(r,h);if(i){t=(n=i.pos)+i.node.nodeSize;var o=e.content.find(function(e){var n;return(null===(n=e.attrs)||void 0===n?void 0:n.id)===h});if(!o){console.warn("[handleConfirm] Count not find card to use");return}e=o}r.commands.command(function(i){return i.tr.replaceRangeWith(n,t,n8.NB.fromJSON(r.schema,e)),!0})}},[v,r,h,m]),b=(0,y.useCallback)((n=(0,nQ.Z)(nJ().mark(function e(n,t,r){return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(),p(t),d(n.toJSON().content[0].content.filter(function(e){var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),j(r);case 5:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)}),[c,j]);return(0,y.useEffect)(function(){if(r)return n7.T.on("openSuggestionEditor",function(e){var n=e.cardId,t=e.userMessage;b(r.view.state.doc,n,t)})},[r,b]),(0,eh.jsxs)(n$.d,{placement:"bottom",onClose:s,isOpen:o,trapFocus:!0,isFullHeight:!0,children:[(0,eh.jsx)(n0.Z,{}),(0,eh.jsxs)(n1.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,eh.jsx)(n2.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,eh.jsx)(n5.f,{p:0,h:"100%",children:l.length>0&&t?(0,eh.jsx)(tO,{doc:t,cards:l,theme:i}):(0,eh.jsx)(n9.AA,{})}),(0,eh.jsx)(n3.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,eh.jsxs)(n4.h,{spacing:4,children:[(0,eh.jsx)(ef.z,{variant:"ghost",onClick:s,children:(0,eh.jsx)(f.cC,{id:"dEgA5A"})}),(0,eh.jsx)(ef.z,{variant:"solid",onClick:g,children:(0,eh.jsx)(f.cC,{id:"7VpPHA"})})]})})]})]})},(0,y.memo)(function(e){return(0,eh.jsx)(tu,{children:(0,eh.jsx)(r,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ta(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ta(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},e))})})),tD=t(80405),tA=t(3476),tT=t(31145),t_=t(49626),tR=t(61751),tz=t(49747),tL=t(56133),tM=t(39097),tN=t.n(tM),tG=t(46988),tZ=t(8661),tF=t(20252),tU=t(38876),tW=t(9734),tH=t(51823),tB=t(76035),tV=t(50281),tq=t(54119),tK=t(77779),tY=t(2046),tQ=t(70287),tX=t(25793),tJ=t(14304),t$=t.n(tJ),t0=t(6201),t1=[{key:"bad",label:(0,eh.jsx)(f.cC,{id:"XSfVsn"}),ariaLabel:function(){return h.ag._({id:"XSfVsn"})},icon:tK.Kf,color:"red"},{key:"meh",label:(0,eh.jsx)(f.cC,{id:"0ASQJH"}),ariaLabel:function(){return h.ag._({id:"0ASQJH"})},icon:tq.C4,color:"yellow"},{key:"good",label:(0,eh.jsx)(f.cC,{id:"9ZYnL5"}),ariaLabel:function(){return h.ag._({id:"9ZYnL5"})},icon:tV.I3,color:"green"}],t2=function(e){var n=e.docId,t=e.isDark,r=e.interactionId,i=(0,y.useState)(null),o=i[0],s=i[1],c=(0,y.useState)(!1),a=c[0],l=c[1],d=(0,y.useState)(""),u=d[0],h=d[1],p=(0,y.useRef)(null),j=(0,eF.p)(),g=(0,y.useCallback)(function(e){s(e),(0,t0.fM)({rating:e,doc_id:n,interactionId:r}),j({title:(0,eh.jsx)(f.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(function(){var e;null==p||null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[n,r,j]),b=(0,y.useCallback)(function(e){e||((0,t0.XH)({feedback:t$().sanitize(u),doc_id:n,interactionId:r}),j({title:(0,eh.jsx)(f.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),l(!0)},[n,u,r,j]);return(0,eh.jsx)(m.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:t?"whiteAlpha.100":"gray.200",position:"relative",children:a?(0,eh.jsxs)(x.x,{color:t?"green.400":"green.600",textAlign:"center",children:[(0,eh.jsx)(v.G,{icon:tB.faCircleCheck})," ",(0,eh.jsx)(f.cC,{id:"SOk0EB"})]}):(0,eh.jsxs)(ea.K,{spacing:4,children:[(0,eh.jsxs)(ea.K,{alignItems:"center",spacing:"1",children:[(0,eh.jsx)(x.x,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,eh.jsx)(f.cC,{id:"TxHdBh"})}),o?(0,eh.jsxs)(x.x,{textAlign:"center",color:t?"green.400":"green.600",children:[(0,eh.jsx)(v.G,{icon:tB.faCircleCheck})," ",(0,eh.jsx)(f.cC,{id:"SOk0EB"})]}):(0,eh.jsx)(x.x,{children:(0,eh.jsx)(f.cC,{id:"cNzndx"})})]}),(0,eh.jsx)(es.U,{fontSize:"xl",width:"100%",children:t1.map(function(e){var n=e.key,r=e.ariaLabel,i=e.label,s=e.icon,c=e.color,a=o===n;return(0,eh.jsx)(t5,{ariaLabel:r,label:i,icon:s,color:c,onClick:function(){return g(n)},isSelected:a,isDisabled:!!(o&&!a),isDark:t},n)})}),o&&(0,eh.jsxs)(tY.NI,{textAlign:"center",children:[(0,eh.jsx)(tQ.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:"good"===o?(0,eh.jsx)(f.cC,{id:"AmM8eQ"}):(0,eh.jsx)(f.cC,{id:"8+bwIa"})}),(0,eh.jsx)(tX.g,{value:u,onChange:function(e){h(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,eh.jsxs)(n4.h,{spacing:"4",ref:p,children:[(0,eh.jsx)(ef.z,{variant:"text",onClick:function(){b(!0)},children:(0,eh.jsx)(f.cC,{id:"6Uau97"})}),(0,eh.jsx)(ef.z,{variant:"solid",isDisabled:""===u,onClick:function(){return b(!1)},children:(0,eh.jsx)(f.cC,{id:"hQRttt"})})]})]})]})})},t5=function(e){var n=e.label,t=e.ariaLabel,r=e.icon,i=e.color,o=e.isSelected,s=e.onClick,c=e.isDisabled,a=e.isDark;return(0,eh.jsx)(g.kH,{label:n,placement:"top",children:(0,eh.jsx)(R.h,{"aria-label":t(),boxShadow:"none",bg:o?a?"".concat(i,".200"):"".concat(i,".100"):a?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(o?1:.5),cursor:"not-allowed"},color:o?a?"".concat(i,".600"):"".concat(i,".500"):a?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(i,".100"),color:"".concat(i,".500")},flex:1,icon:(0,eh.jsx)(x.x,{fontSize:"2xl",children:(0,eh.jsx)(v.G,{icon:r})}),isDisabled:c,variant:"plain",onClick:s})})},t3=t(1368),t4=t(97907),t6=["90%","360px"],t8=function(e){var n=e.onClose,t=e.eyebrowText,r=e.mainText,i=e.callsToAction;return(0,eh.jsxs)(m.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:t6,maxW:t6,position:"relative",children:[(0,eh.jsx)(t4.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,eh.jsxs)(ea.K,{spacing:4,children:[(0,eh.jsxs)(ea.K,{spacing:1,paddingEnd:3,children:[!(0,tW.s2)()&&(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.600",children:t}),(0,eh.jsx)(x.x,{fontSize:"md",children:r})]}),(0,eh.jsx)(m.xu,{w:"100%",children:i})]})]})},t9=function(e){var n=e.onClose,t=e.startTour;return(0,eh.jsx)(t8,{eyebrowText:(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,eh.jsx)(f.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}})]}),mainText:(0,eh.jsx)(f.cC,{id:"ntWFEH"}),onClose:n,callsToAction:(0,eh.jsx)(ef.z,{size:"md",w:"100%",variant:"solid",onClick:function(){t(0),n()},children:(0,eh.jsx)(f.cC,{id:"VzFYDl"})})})},t7=t(77245),re=["90%","360px"],rn=function(e){var n=e.onClose,t=(0,y.useState)(!0),r=t[0],i=t[1];return(0,y.useEffect)(function(){setTimeout(function(){i(!1)},3e3)},[]),(0,eh.jsxs)(m.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:re,maxW:re,position:"relative",children:[(0,eh.jsx)(t4.P,{size:"md",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,eh.jsxs)(ea.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,eh.jsx)(m.xu,{color:"trueblue.300",children:(0,eh.jsx)(v.G,{icon:t7.tc,size:"2x",className:r?"fa-bounce":void 0})}),(0,eh.jsxs)(ea.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.600",children:(0,eh.jsx)(f.cC,{id:"eoDgVo"})}),(0,eh.jsx)(x.x,{fontSize:"md",children:(0,eh.jsx)(f.cC,{id:"p7dFyi"})})]})]})]})};function rt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rt(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ri="source",ro="desktop-tour-toast",rs="switch-from-mobile-to-desktop-toast",rc=function(e){var n,t=e.editor,r=(0,eF.p)(),i=(0,Q.CG)(nY.yx),o=(0,S.c8)().startTour,s=(0,nB.SE)(),c=s.user,a=s.setSettings,l=(0,y.useState)(!1),u=l[0],f=l[1],h=(0,y.useRef)(!1),p=!!(null!=c&&null!==(n=c.settings)&&void 0!==n&&n.needsEditorOnboarding),x=(0,Q.CG)((0,tG.oH)(null==t?void 0:t.gammaDocId)),m=!!x&&"running"===x.status,j=!!x&&("complete"===x.status||"error"===x.status),v=(0,nM.As)("editor"),g=(0,y.useState)(null),b=g[0],C=g[1],O=(0,y.useState)(function(){return(0,tH.SJ)()[ri]===tZ.VY})[0],w=(0,y.useState)(function(){return O&&(0,tW.s2)()})[0],k=O&&j;return(0,y.useEffect)(function(){t&&f(!m&&!(0,tW.s2)()&&O&&p)},[t,O,m,p]),(0,y.useEffect)(function(){setTimeout(function(){(0,t3.lO)({query:rr(rr({},(0,tH.SJ)()),{},(0,d.Z)({},ri,void 0)),emitChange:!1})})},[]),(0,y.useEffect)(function(){return u&&!r.isActive(ro)&&setTimeout(function(){r({id:ro,position:"bottom-left",render:function(e){var n=e.onClose;return t9({onClose:function(){null==a||a({remove:["needsEditorOnboarding"]}),n()},startTour:o})},isClosable:!0,duration:null})},2e3),function(){r.isActive(ro)&&r.close(ro)}},[a,u,o,r]),(0,y.useEffect)(function(){if((0,tW.s2)()){var e=document.querySelector(v.scrollSelector);if(e){C(e);var n=function(){b&&(0,tW.s2)()&&(null==b?void 0:b.scrollTop)>=(null==b?void 0:b.scrollHeight)/4&&w&&!r.isActive(rs)&&!h.current&&(h.current=!0,r({id:rs,position:"top",render:function(e){return rn({onClose:e.onClose})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",n,!0),function(){window.removeEventListener("scroll",n,!0),r.isActive(rs)&&r.close(rs)}}}},[i,b,v.scrollSelector,w,r]),{showDocWizardFooter:k}};function ra(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ra(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ra(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rd=(0,y.memo)(function(e){var n,t=e.interactionId,r=(0,Q.CG)(nY.yx),i=null!=r&&!!r.theme&&(0,te.wj)(null==r?void 0:r.theme),o=(0,y.useState)(!1),s=o[0],c=o[1],a=(0,eF.p)(),l=null==r?void 0:null===(n=r.accessLinks)||void 0===n?void 0:n[0],d=(0,y.useMemo)(function(){return(0,tH.Gn)({docTitle:null==r?void 0:r.title,docId:null==r?void 0:r.id,token:null==l?void 0:l.token,absolute:!0})},[r,null==l?void 0:l.token]),u=(0,eW.V)(d).onCopy,h=(0,y.useCallback)(function(){(0,tF.J)({docId:null==r?void 0:r.id,source:"docWizardFooter",type:"tokenUrl"}),u(),a({title:(0,eh.jsx)(f.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==r?void 0:r.id,u,a]),x=(0,y.useCallback)(function(){c(!0)},[]);return r?(0,eh.jsx)(g.Wk,{isDark:i,children:(0,eh.jsx)(p.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,tW.s2)()?void 0:"-".concat(tU.m),children:(0,eh.jsx)(tz.U,{in:!s,style:{width:"100%"},unmountOnExit:!0,children:(0,eh.jsx)(p.k,rl(rl({pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative"},i?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"}),{},{children:(0,eh.jsx)(tL.W,{maxW:"420px",children:(0,eh.jsxs)(ea.K,{spacing:8,children:[(0,eh.jsxs)(ea.K,{spacing:4,textAlign:"center",children:[(0,eh.jsx)(el.X,{size:"md",children:(0,eh.jsx)(f.cC,{id:"bB+DHs"})}),(0,eh.jsx)(ef.z,{leftIcon:(0,eh.jsx)(v.G,{icon:tR.nN}),variant:"solid",onClick:h,children:(0,eh.jsx)(f.cC,{id:"RGCCrg"})}),(0,eh.jsx)(ef.z,{as:tN(),target:(0,tW.Q5)()?"_self":"_blank",variant:"plain",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,eh.jsx)(v.G,{icon:t_.r8}),rightIcon:(0,tW.Q5)()?void 0:(0,eh.jsx)(v.G,{icon:tT.faArrowUpRightFromSquare,size:"xs"}),href:tZ.ET,children:(0,eh.jsx)(f.cC,{id:"xFxi2V"})})]}),(0,eh.jsx)(t2,{docId:r.id,isDark:i,interactionId:t}),(0,eh.jsx)(tx.M,{pt:[0,0,4],w:"100%",children:(0,eh.jsx)(ef.z,{size:"sm",onClick:x,variant:"text",colorScheme:"blackAlpha",children:(0,eh.jsx)(f.cC,{id:"vLyv1R"})})})]})})}))})})}):null});rd.displayName="DocWizardFooterInner";var ru=function(e){var n=e.editor,t=rc({editor:n}).showDocWizardFooter,r=(0,Q.CG)((0,tG.oH)(null==n?void 0:n.gammaDocId)),i=null==r?void 0:r.id;return t&&i?(0,eh.jsx)(rd,{interactionId:i}):(0,eh.jsx)(eh.Fragment,{})},rf=t(98537),rh=t.n(rf),rp=t(87063),rx=function(e){var n=e.onCloneClick,t=e.onSignupClick,r=e.isLoggedIn;return(0,eh.jsx)(m.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:r?(0,eh.jsxs)(es.U,{children:[(0,eh.jsxs)(x.x,{mr:1,children:[(0,eh.jsx)(f.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc},components:{0:(0,eh.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,eh.jsx)(ef.z,{variant:"solid",onClick:n,children:(0,eh.jsx)(f.cC,{id:"he3ygx"})})]}):(0,eh.jsxs)(es.U,{children:[(0,eh.jsxs)(x.x,{mr:1,children:[(0,eh.jsx)(f.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc,GAMMA_PROPER_NOUN:eg.N6},components:{0:(0,eh.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,eh.jsx)(tN(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,eh.jsx)(ef.z,{as:eU.r,onClick:t,variant:"solid",textDecoration:"none !important",children:(0,eh.jsx)(f.cC,{id:"e+RpCP"})})})]})})},rm=function(e){var n=!(0,tW.s2)(),t=(0,nB.SE)().user,r=(0,eF.p)(),i=(0,y.useRef)(),o=(0,rp.e)(),s=(0,y.useCallback)(function(){e&&(null===nD.co||void 0===nD.co||nD.co.track(nD.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),c=(0,y.useCallback)(function(){o({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,o]);(0,y.useEffect)(function(){return function(){i.current&&r.close(i.current)}},[r]);var a=n&&e,l=!!t;(0,tc.vm)(function(){i.current&&r.close(i.current),a&&(i.current=r({position:"bottom",render:function(){return rx({onCloneClick:c,isLoggedIn:l,onSignupClick:s})},isClosable:!0,duration:null}))},[e,n,c,s,a,t,r,l],[a,l])},rj=t(99703),rv=t(91718),rg=t(92761),rb="sessionId1",rC=nL.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(n){return function(){var t=(0,Q.bh)();return e.storage.user=rh()({},e.storage.user,n),t.dispatch((0,X.MU)({sessionId:rb})),t.dispatch((0,X.Tx)({collaborators:[e.storage.user]})),!0}}}}}),ry=function(e){var n,t=e.docId,r=e.snapshotId,i=e.scrollingParentSelector,o=e.onCreate,s=(0,Q.CG)(nY.yx);rm(s);var c=(0,y.useState)(function(){return[rv.$1.configure({scrollerSelector:i}),rC,rj._g]})[0],a=(0,nB.SE)(),l=a.user,d=a.anonymousUser,u=a.isUserLoading,f=a.color,h=(0,y.useState)(),x=h[0],j=h[1],v=(0,w.EDv)({variables:{docId:t,snapshotId:r},skip:!r}),g=v.data,b=v.loading,C=v.error;(0,y.useEffect)(function(){!u&&x&&x.commands.user({id:(null==l?void 0:l.id)||d.id,color:f.value,sessionId:rb,idleSince:null,name:(null==l?void 0:l.displayName)||d.displayName||"",profileImageUrl:(null==l?void 0:l.profileImageUrl)||"",isReady:!u})},[x,l,f,u,d]);var O=g&&void 0!==g.snapshot&&!b&&s;return(0,eh.jsxs)(m.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!O||C?(0,eh.jsxs)(p.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!O&&(0,eh.jsx)(tm.$,{}),C&&(0,eh.jsxs)(tx.M,{h:"100%",children:["There was an error loading this ",eg.Yc,":"," ",C.message]})]}):(0,eh.jsx)(m.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:O?1:0,children:(0,eh.jsx)(eE.yE,{doc:s,editorId:"main",docId:t,extensions:c,onCreate:function(e){var n=e.editor;j(n),setTimeout(function(){o&&o(n)},10)},readOnly:!0,initialContent:null===(n=g.snapshot)||void 0===n?void 0:n.content.default,scrollingParentSelector:i})}),(0,eh.jsx)(rg.m,{forceShow:!0,abuseReportingEnabled:!1})]})},rO=t(10939),rw="sessionId1",rk=nL.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(n){return function(){var t=(0,Q.bh)();return e.storage.user=rh()({},e.storage.user,n),t.dispatch((0,X.MU)({sessionId:rw})),t.dispatch((0,X.Tx)({collaborators:[e.storage.user]})),!0}}}}}),rS=function(e){var n,t=e.docId,r=e.snapshotId,i=e.scrollingParentSelector,o=e.onCreate,s=e.theme,c=e.hideMadeWithGammaBadge,a=(0,y.useState)(function(){return[rv.$1.configure({scrollerSelector:i}),rk,rj._g]})[0],l=(0,nB.SE)(),d=l.user,u=l.isUserLoading,f=l.anonymousUser,h=l.color,x=(0,y.useState)(),j=x[0],v=x[1],g=(0,w.EDv)({variables:{docId:t,snapshotId:r},skip:!r}),b=g.data,C=g.loading,O=g.error,k=(0,Q.CG)(nY.yx);(0,y.useEffect)(function(){!u&&j&&j.commands.user({id:(null==d?void 0:d.id)||f.id,color:h.value,sessionId:rw,idleSince:null,name:(null==d?void 0:d.displayName)||f.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!u})},[j,d,h,u,f]);var S=b&&void 0!==b.snapshot&&!C&&k;return(0,eh.jsxs)(m.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!S||O?(0,eh.jsxs)(p.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!S&&(0,eh.jsx)(tm.$,{}),O&&(0,eh.jsxs)(tx.M,{h:"100%",children:["There was an error loading this ",eg.Yc,":"," ",O.message]})]}):(0,eh.jsx)(m.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:S?1:0,children:(0,eh.jsx)(eE.yE,{doc:k,editorId:"main",docId:t,theme:s||void 0,extensions:a,onCreate:function(e){var n=e.editor;v(n),setTimeout(function(){o&&o(n)},10)},readOnly:!0,initialContent:null===(n=b.snapshot)||void 0===n?void 0:n.content.default,scrollingParentSelector:i})}),j&&(0,eh.jsx)(nH,{editor:j,backoffFactor:2}),!(void 0!==c&&c)&&(0,eh.jsx)(rg.m,{docWorkspace:null==k?void 0:k.organization})]})},rE=t(16019);function rI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rP(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rI(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rD=(a={},(0,d.Z)(a,nZ.q.DOC_VIEW,"doc"),(0,d.Z)(a,nZ.q.SLIDE_VIEW,"present"),a),rA=function(e){var n=(0,O.I0)(),t=(0,tH.SJ)().mode,r=(0,Q.CG)(X.gh),i=(0,y.useCallback)(function(e){var n=e||r,t=(0,tH.SJ)().mode,i=rD[n];t!==i&&(0,t3.lO)({query:rP(rP({},(0,tH.SJ)()),{},{mode:i}),emitChange:!1})},[r]);(0,rE.r)(i,[r]),(0,y.useEffect)(function(){return t3.fI.on("changed",function(){return i()})},[i]),(0,tc.vm)(function(){if(e){var r=t===rD.SLIDE_VIEW?nZ.q.SLIDE_VIEW:nZ.q.DOC_VIEW,o=(0,tH.sY)().cardId;r===nZ.q.SLIDE_VIEW&&(o?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",o),e.commands.spotlightCardById(o)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),n((0,X.PM)({mode:r})),i(r)}},[e,n,t,i],[e])},rT=t(87202),r_=t(56692),rR=t(96302),rz=t(10469),rL=t(27440),rM=t(71170),rN=t(56241),rG=t(99336),rZ=t(92527),rF=t(89814),rU=t(56261),rW=(0,rT.ZP)("mod+Escape"),rH=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),rB=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,nM.cC)("editor"),i=r.scroller;if(i){e.commands.turnOffSpotlight();var o=i.scrollHeight-i.offsetHeight;if("down"===n){if(!(r.isAtBottom(90)&&t&&e.commands.spotlightNextCard(!1,"top"))){var s=i.scrollTop+.5*i.offsetHeight;s>o-150&&(s=o),r.scrollTo({top:s})}}else if(!(r.isAtTop(90)&&t&&e.commands.spotlightNextCard(!0,"bottom"))){var c=i.scrollTop-.5*i.offsetHeight;c<150&&(c=0),r.scrollTo({top:c})}}},rV=function(e){var n=e.enabled,t=e.setActiveKey,r=(0,nD.z$)(),i=(0,Q.TL)(),o=(0,nK._i)().editor,s=(0,Q.CG)(rG.C),c=(0,rF.g)(o),a=c.enabled,l=c.pos,d=(0,y.useCallback)(function(){a?null==o||o.commands.turnOffSpotlight():null==o||o.commands.spotlightNextBlock()},[null==o?void 0:o.commands,a]);return(0,y.useEffect)(function(){if(n)return r_.F7.on("keydown","NAVIGATION_CONTROLS",function(e){var n,i,c=(0,Q.bh)(),u=e.target,f=Object.keys((0,X.X9)(c.getState()).tree);if(!o||null!=u&&null!==(n=u.closest)&&void 0!==n&&n.call(u,"[data-gamma-child-tiptap-editor]")||null!=u&&null!==(i=u.closest)&&void 0!==i&&i.call(u,"input")||e.metaKey||s)return!1;switch(rH.has(e.key)&&("s"!==e.key&&(t(e.key),setTimeout(function(){t(null)},100)),e.preventDefault()),e.key){case"s":return d(),!0;case"l":case"ArrowRight":return(0,rZ.p7)(),c.dispatch((0,X.Qx)({attached:!1})),null==r||r.trackDocEvent(nD.AA.PRESENT_MODE_NAVIGATED,{direction:nD.xQ.CARD_NEXT,method:nD.SY.KEYBOARD,key:e.key}),o.commands.spotlightNextCard();case"h":case"ArrowLeft":return(0,rZ.p7)(),c.dispatch((0,X.Qx)({attached:!1})),null==r||r.trackDocEvent(nD.AA.PRESENT_MODE_NAVIGATED,{direction:nD.xQ.CARD_PREV,method:nD.SY.KEYBOARD,key:e.key}),o.commands.spotlightNextCard(!0);case"j":case"ArrowDown":case"PageDown":if((0,rZ.p7)(),c.dispatch((0,X.Qx)({attached:!1})),!a){var h=(0,rj.ei)(o.state.selection);return o.commands.goToNextExpandableNode()||rB(o,"down",!h),!0}return null==r||r.trackDocEvent(nD.AA.PRESENT_MODE_NAVIGATED,{direction:nD.xQ.TELEPROMPTER_DOWN,method:nD.SY.KEYBOARD,key:e.key}),o.commands.spotlightNextBlock();case"k":case"ArrowUp":case"PageUp":if((0,rZ.p7)(),c.dispatch((0,X.Qx)({attached:!1})),!a){var p=(0,rj.ei)(o.state.selection);return o.commands.goToNextExpandableNode(!0)||rB(o,"up",!p),!0}return null==r||r.trackDocEvent(nD.AA.PRESENT_MODE_NAVIGATED,{direction:nD.xQ.TELEPROMPTER_UP,method:nD.SY.KEYBOARD,key:e.key}),o.commands.spotlightNextBlock(!0);case"r":if(f[0])return(0,rZ.p7)(),o.commands.spotlightCardById(f[0]),c.dispatch((0,X.Qx)({attached:!1})),!0;return!1;case"Escape":if(rW(e))return!1;var x=a&&l;if(o.commands.spotlightCollapseNearestExpandableNode(x?l:null))return o.commands.reHighlightExpandableNode(),!0;if(a)return o.commands.turnOffSpotlight(),!0;return c.dispatch((0,X.Qx)({attached:!1})),null==r||r.track(nD.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),o.commands.ascendUpToParentCard(!1);case"Enter":var m=a&&l;if(o.commands.expandOrCollapseExpandableNode(m?l:null))return!0;if(m){var j=o.state.doc.resolve(l).parent;if(j&&(0,rU.AH)(j))return(0,rU.xB)(j.attrs.id,!1),o.commands.spotlightNextBlock(!0),!0;return o.commands.spotlightCollapseNearestExpandableNode(l)}return!1;default:return!1}})},[o,i,r,n,d,a,l,s,t]),a},rq=function(e){var n=new KeyboardEvent("keydown",{key:e});t.g.dispatchEvent(n)},rK={ArrowUp:{icon:er.FP,label:(0,eh.jsx)(f.cC,{id:"VbggDE"}),ariaLabel:function(){return h.ag._({id:"VbggDE"})},shortcuts:["","K"],key:"ArrowUp",onClick:function(){rq("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:eo.ac,label:(0,eh.jsx)(f.cC,{id:"4jciC3"}),ariaLabel:function(){return h.ag._({id:"4jciC3"})},shortcuts:["","H"],key:"ArrowLeft",onClick:function(){rq("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:et.r5,label:(0,eh.jsx)(f.cC,{id:"e3GOIZ"}),ariaLabel:function(){return h.ag._({id:"e3GOIZ"})},shortcuts:["","J"],key:"ArrowDown",onClick:function(){rq("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:ei.eF,label:(0,eh.jsx)(f.cC,{id:"ZjQRVw"}),ariaLabel:function(){return h.ag._({id:"ZjQRVw"})},shortcuts:["","L"],key:"ArrowRight",onClick:function(){rq("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:rz.GT,label:(0,eh.jsx)(f.cC,{id:"Xon9jp"}),ariaLabel:function(){return h.ag._({id:"Xon9jp"})},shortcuts:["S"],key:"S",onClick:function(){rq("s")},gridPos:[1,3]}},rY=function(e){var n=e.shortcuts;return(0,eh.jsx)(x.x,{as:"span",color:"gray.400",ml:2,children:n.map(function(e,t){return(0,eh.jsxs)(y.Fragment,{children:[e,t===n.length-1?null:(0,eh.jsx)(x.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e)})})},rQ=function(e){var n=e.activeKey,t=e.spotlightingByBlock;return(0,eh.jsx)(eP.h,{children:(0,eh.jsxs)(m.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,eh.jsx)(el.X,{children:(0,eh.jsx)(f.cC,{id:"wja8aL"})}),(0,eh.jsx)(rL.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(rK).map(function(e){var r=e.gridPos,i=e.icon,o=e.label,s=e.ariaLabel,c=e.shortcuts,a=e.key,l=e.onClick,d=n===a;return(0,eh.jsx)(rM.P,{gridColumn:r[1],gridRow:r[0],children:(0,eh.jsx)(rN.u,{hasArrow:!0,placement:"top",label:(0,eh.jsxs)(x.x,{whiteSpace:"nowrap",children:[o,(0,eh.jsx)(rY,{shortcuts:c})]}),children:(0,eh.jsx)(R.h,{m:1,shadow:"base",size:"md",variant:"S"==a&&t?"solid":"plain",isActive:d||"S"===a&&t,onClick:l,onMouseDown:function(e){return e.preventDefault()},"aria-label":s(),icon:(0,eh.jsx)(v.G,{icon:i})})})},a)})})]})})},rX=t(5751),rJ=t(26721),r$=t(9088),r0=t(30893),r1=t(40771),r2=t(8022),r5=t(95258),r3=t(63849),r4=t(2575),r6=t(17651),r8=t(72466),r9=t(6185),r7=t.n(r9),ie=t(68642),it=t(27875),ir=t.n(it),ii=t(18149),io=t.n(ii),is=t(98875),ic=t(6057),ia=t(74542),il={easeOutLinear:ia.gA,easeOutSine:ia.vh,easeOutCubic:ia.w2,easeOutCirc:ia.ei,easeOutQuad:ia.hl,easeOutQuart:ia.Y3,easeOutExpo:ia.ad,bezierCustom1:r7()(.13,.97,.035,.73),bezierCustom2:r7()(.105,1.15,.15,.355)},id={UP:"up",DOWN:"down"},iu=function(e){return e?+new Date-+new Date(e):1/0},ih=function(e,n){var t=(0,y.useMemo)(function(){return new ie.Lethargy(6,120,.3,150)},[]),r=n||{},i=r.easing,o=void 0===i?"easeOutCubic":i,s=r.touchpadFactor,c=void 0===s?1.5:s,a=r.triggerThreshold,l=void 0===a?1200:a,d=(0,nM.As)("editor"),u=(0,Q.CG)(X.i2),f=(0,y.useRef)(null),h=(0,y.useRef)(null),p=(0,y.useRef)(null),x=(0,y.useRef)(!1),m=(0,y.useRef)(null),j=(0,y.useRef)(null),v=(0,y.useState)(!1),g=v[0],b=v[1],C=(0,y.useState)(!1),O=C[0],w=C[1],k=(0,y.useRef)({counterTarget:0,counterCurrent:0,direction:id.DOWN}),S=(0,y.useCallback)(function(){if(f.current){var e,n=k.current.counterTarget/l*100,t=(null!=n?n:0)*2.64,r="".concat(t," ").concat(264-t),i=null===(e=f.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,o=f.current.querySelector(".chakra-progress__indicator");o&&o.setAttribute("stroke-dasharray",r),i&&(i.innerHTML="".concat(n.toFixed(0),"%"))}},[l]),E=(0,y.useCallback)(function(){var e=p.current,n=h.current;if(n&&e){var t=e.querySelector(".chakra-progress__indicator"),r=n.querySelector(".chakra-progress__indicator");if(t&&r){var i=k.current.counterCurrent/l,s=(550>iu(j.current)?1:null!=i?i:0)*264,c="".concat(s," ").concat(264-s),a=Math.max(56-56*il[o](Math.min(i,1)),0);e.style.transform="translateY(".concat(a,"px)"),n.style.transform="translateY(-".concat(a,"px)"),r.setAttribute("stroke-dasharray",c),t.setAttribute("stroke-dasharray",c)}}},[o,l]),I=(0,y.useCallback)(function(){if(!x.current){var e;requestAnimationFrame(function n(t){var r=e?t-e:0;if(e=t,.1>Math.abs(k.current.counterTarget-k.current.counterCurrent)){k.current.counterCurrent=k.current.counterTarget,E(),x.current=!1;return}k.current.counterCurrent=(0,ia.t7)(k.current.counterCurrent,k.current.counterTarget,ir()(.3*(60/(r?1e3/r:60)),.3,1)),E(),requestAnimationFrame(n)})}},[E]),P=(0,y.useCallback)(function(){k.current.counterTarget=0,b(!1),w(!1),S(),I()},[I,S]);return(0,y.useEffect)(function(){if(!u||!e)return P();var n,r,i=document.querySelector((0,ic.U8)(u));if(!i)return P();var o=function(n){if(!n.target.closest("[data-comments-wrapper]")){var i=t.check(n);if(null!==p.current&&null!==h.current){var o=iu(m.current);if(!(o<500)&&(!(o<1e3)||!1!==i)){var s=iu(j.current);if(!(s<500)&&(!(s<1e3)||!1!==i)){var a=0===Math.abs(n.deltaY)?k.current.direction:n.deltaY>0?id.DOWN:id.UP;if("down"===a?d.isAtBottom():d.isAtTop()){clearTimeout(r);var u=n.wheelDeltaY?n.wheelDeltaY===-3*n.deltaY:0===n.deltaMode,f=Math.abs(void 0!==n.deltaY?n.deltaY:40)*(u?c:1);if(a!==k.current.direction){k.current.direction=a,P();return}w(a===id.DOWN),b(a===id.UP),k.current.counterTarget+=f,k.current.direction=a,k.current.counterTarget/l>=1?(e.commands.spotlightNextCard(a===id.UP,a===id.UP?"bottom":"top"),j.current=+new Date,setTimeout(function(){P(),S()},250),setTimeout(function(){j.current=null},1e3)):r=setTimeout(P,500),I(),S()}}}}}},s=function(){m.current=+new Date,clearTimeout(n),P(),n=setTimeout(function(){m.current=null},1e3)};return i.addEventListener("scroll",s),i.addEventListener("wheel",o,{passive:!0}),S(),function(){i.removeEventListener("scroll",s),i.removeEventListener("wheel",o)}},[e,t,I,o,c,l,d,S,E,P,u]),{debugRef:f,nextCardRef:p,prevCardRef:h,showNextCard:O,showPrevCard:g}},ip=function(e){var n=e.editor,t=(0,is.ye)("debugLogging"),r=(0,y.useState)("easeOutExpo"),i=r[0],o=r[1],s=(0,y.useState)(1.5),c=s[0],a=s[1],l=(0,y.useState)(1200),d=l[0],u=l[1],f=ih(n,{easing:i,touchpadFactor:c,triggerThreshold:d}),h=f.debugRef,p=f.nextCardRef,x=f.prevCardRef,m=f.showNextCard,j=f.showPrevCard,v=(0,Q.CG)(function(e){var n=(0,X.i2)(e)||"",t=(0,X.X9)(e),r=Object.keys((t.parents[n]||[]).reduce(function(e,n){return e[n]},t.tree)),i=null,o=null;return r.forEach(function(e,s){if(e===n){var c=t.parents[n];0===s?c.length&&(i={cardId:c[c.length-1],isSibling:!1}):i={cardId:r[s-1],isSibling:!0},s===r.length-1?c.length&&(o={cardId:c[c.length-1],isSibling:!1}):o={cardId:r[s+1],isSibling:!0}}}),{prevCard:i,nextCard:o}},io()),g=v.prevCard,b=v.nextCard,C=null==b?void 0:b.cardId,O=null==g?void 0:g.cardId,w=(0,y.useMemo)(function(){var e=null,t=null;return n&&n.state.doc.descendants(function(n){return!(0,nN.KH)(n)||(n.attrs.id===O?e=n:n.attrs.id===C&&(t=n),!!(!e&&O)||!!(!t&&C))}),{prev:e,next:t}},[n,C,O]);return(0,eh.jsxs)(eh.Fragment,{children:[t&&(0,eh.jsx)(ix,{ref:h,setEasing:o,setTouchpadFactor:a,setTriggerThreshold:u}),(0,eh.jsx)(im,{ref:x,direction:"up",node:w.prev,enabled:j,offset:16}),(0,eh.jsx)(im,{ref:p,direction:"down",node:w.next,enabled:m,offset:24})]})},ix=y.forwardRef(function(e,n){var t=e.setEasing,r=e.setTouchpadFactor,i=e.setTriggerThreshold;return(0,eh.jsxs)(p.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,eh.jsxs)(r$.v,{closeOnSelect:!1,children:[(0,eh.jsx)(r0.j,{as:ef.z,colorScheme:"trueblue",children:"Options"}),(0,eh.jsxs)(r1.q,{minWidth:"240px",children:[(0,eh.jsx)(g.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,eh.jsxs)(x.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,eh.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,eh.jsxs)(r2.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:function(e,n){return i(n)},children:[(0,eh.jsx)(r2.zu,{}),(0,eh.jsxs)(r2.Fi,{children:[(0,eh.jsx)(r2.WQ,{}),(0,eh.jsx)(r2.Y_,{})]})]}),(0,eh.jsx)(r5.R,{}),(0,eh.jsx)(g.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,eh.jsxs)(x.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,eh.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,eh.jsxs)(r2.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:function(e,n){return r(n)},children:[(0,eh.jsx)(r2.zu,{}),(0,eh.jsxs)(r2.Fi,{children:[(0,eh.jsx)(r2.WQ,{}),(0,eh.jsx)(r2.Y_,{})]})]}),(0,eh.jsx)(r5.R,{}),(0,eh.jsxs)(r3._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:function(e){return t(e)},children:[(0,eh.jsx)(r4.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,eh.jsx)(r4.i,{value:"easeOutSine",children:"easeOutSine"}),(0,eh.jsx)(r4.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,eh.jsx)(r4.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,eh.jsx)(r4.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,eh.jsx)(r4.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,eh.jsx)(r4.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,eh.jsx)(r4.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,eh.jsx)(r4.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,eh.jsx)(p.k,{ref:n,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,eh.jsx)(r6.D,{value:40,color:"trueblue.500",children:(0,eh.jsx)(r8.i,{})})})]})});ix.displayName="PeekDebugger";var im=y.forwardRef(function(e,n){var t=e.direction,r=e.enabled,i=e.node,o=e.offset,s=(0,y.useState)(!1),c=s[0],a=s[1],l=(0,y.useState)(i),d=l[0],u=l[1];(0,y.useEffect)(function(){a(!0);var e=setTimeout(function(){a(!1),u(i)},550);return function(){clearTimeout(e)}},[i]);var f=(0,y.useMemo)(function(){return d?(0,eV.getCardTitle)(d.toJSON()):""},[d]),h=!!d;return(0,eh.jsx)(p.k,{ref:n,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===t?"".concat(o,"px"):"inherit",bottom:"down"===t?"".concat(o,"px"):"inherit",children:(0,eh.jsxs)(p.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:r?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,eh.jsx)(r6.D,{display:h?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,eh.jsx)(r8.i,{visibility:c?"visible":"hidden",children:(0,eh.jsx)(v.G,{icon:tB.faCircleCheck,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),h||"up"!==t?h||"down"!==t?null:(0,eh.jsx)(v.G,{icon:rX.m5,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,eh.jsx)(v.G,{icon:rJ.yt,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,eh.jsx)(p.k,{width:1}),(0,eh.jsx)(x.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:h?"gray.800":"gray.600",px:2,children:h?f:"down"===t?"End of presentation":"Start of presentation"})]})})});im.displayName="PeekCardTab";var ij=t(12741),iv=function(){var e=(0,y.useState)(["",[],{}]),n=e[0],t=e[1],r=(0,Q.qr)();return(0,y.useEffect)(function(){return r.subscribe(function(){var e=r.getState(),n=(0,X.X9)(e),i=(0,X.i2)(e)||"",o=n.parents[i]||[],s={};Object.keys(n.tree).forEach(function(e){var t=[];(function e(n){Object.keys(n).forEach(function(r){t.push(r),e(n[r])})})(n.tree[e]),s[e]=t}),t([i,o,s])})},[r]),n},ig=function(){var e=iv(),n=(0,P.Z)(e,3),t=n[0],r=n[1],i=n[2],o=Object.keys(i);return(0,eh.jsx)(es.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:t?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:o.map(function(e,n){var s=[].concat((0,ij.Z)(r),[t])[0],c=o.indexOf(s),a=i[s],l=0,d=100;return t&&a&&-1===o.indexOf(t)&&(l=(a.indexOf(t)+1)/a.length*100,d=1/a.length*100),(0,eh.jsx)(iy,{cardId:e,state:n===c?"current":n<=c?"prev":"next",percent:l,unit:d},e)})})},ib="var(--chakra-colors-trueblue-200)",iC="var(--chakra-colors-trueblue-100)",iy=function(e){var n=e.cardId,t=e.state,r=e.percent,i=e.unit,o="linear-gradient(to right, ".concat(ib," 0% ").concat(r,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(r,"% ").concat(r+i,"%, ").concat(iC," ").concat(r+i,"% 100%)");return(0,eh.jsx)(p.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===t?o:"prev"===t?ib:iC},n)},iO=(0,rT.ZP)("Esc"),iw=function(e){var n=e.editor,t=e.showNavigationControls,r=(0,O.v9)(X.gh)===nZ.q.SLIDE_VIEW,i=(0,y.useState)(null),o=i[0],s=i[1],c=(0,O.v9)(X.JA),a=(0,y.useRef)(c),l=(0,O.I0)(),d=rV({enabled:r&&!c,setActiveKey:s});return(0,y.useEffect)(function(){l((0,X.e)({isEditingInSlideView:!1}))},[r,l]),a.current=c,(0,y.useEffect)(function(){return r_.F7.on("keydown","SLIDE_VIEW",function(e){return!!(a.current&&iO(e))&&(l((0,X.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)})},[l]),(0,rR.us)(),(0,eh.jsxs)(eh.Fragment,{children:[r&&(0,eh.jsx)(ip,{editor:n}),r&&(0,eh.jsx)(ig,{}),r&&(0,eh.jsx)(p.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,eh.jsxs)(p.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:c?1:0,pointerEvents:c?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:c?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,eh.jsx)(x.x,{size:"sm",mr:3,children:(0,eh.jsx)(f.cC,{id:"DjD/sG"})}),(0,eh.jsx)(ef.z,{size:"sm",variant:"solid",onClick:function(){return l((0,X.e)({isEditingInSlideView:!1}))},children:(0,eh.jsx)(f.cC,{id:"DPfwMq"})})]})}),r&&t&&(0,eh.jsx)(rQ,{activeKey:o,spotlightingByBlock:d})]})},ik=t(85946),iS=t(13414),iE=t(89634),iI=t(21819),iP={duration:.25,delay:.75},iD={duration:.25},iA="filmstrip-root",iT=".".concat(iA),i_="filmstrip-scroller",iR=".".concat(i_),iz=y.createContext({navItemPreviewRefMap:{}});function iL(){return(0,y.useContext)(iz)}var iM=t(6110),iN=t(38815),iG=t(11895),iZ=t(52949);function iF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var iU=function(e){var n=(0,iG.i)(e),t=n.content,r=n.selection,i=!!(null!=t&&t.content),o=(0,y.useMemo)(function(){if(!i)return[];var e,n=t.content,r=(null==n?void 0:n[0].content)||[],o=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(function(e){var n;return o&&null!==(n=e.attrs)&&void 0!==n&&n.id?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(function(e){return null!==e})},[t,i]),s=(0,Q.CG)(iZ.ZD,function(e,n){return io()(e,n)}).map(function(e){return o.find(function(n){return n.cardId===e.cardId})?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?iF(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iF(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},e):null}).filter(function(e){return null!==e}),c=(0,Q.CG)(iZ.Ae);return{isDragging:c,cards:c?s:o,editorContent:t,selection:r,isLoaded:i}},iW=t(86733),iH=t(32649),iB=function(e){var n=e.onClose,t=e.isDark,r=e.viewPreference,i=e.setViewPreference,o="list"===r,s={backgroundColor:t?"gray.700":"gray.200",activeButtonColor:t?"gray.50":"trueblue.500",inactiveButtonColor:t?"gray.50":"gray.900",closeButtonColorScheme:t?"gray":"blackAlpha"},c=s.activeButtonColor,a=s.inactiveButtonColor,l=s.backgroundColor,d=s.closeButtonColorScheme;return(0,eh.jsxs)(p.k,{p:"8px",pb:"2px",children:[(0,eh.jsxs)(es.U,{spacing:0,bg:l,p:.5,borderRadius:"md",children:[(0,eh.jsx)(g.kH,{label:"Filmstrip view",children:(0,eh.jsx)(ef.z,{size:"xs",variant:o?"ghost":"plain",color:o?a:c,onClick:function(){return i("film")},children:(0,eh.jsx)(es.U,{children:(0,eh.jsx)(v.G,{icon:ik.Cj})})})}),(0,eh.jsx)(g.kH,{label:"List view",children:(0,eh.jsx)(ef.z,{size:"xs",variant:o?"plain":"ghost",color:o?c:a,onClick:function(){return i("list")},children:(0,eh.jsx)(es.U,{children:(0,eh.jsx)(v.G,{icon:iH.Zr})})})})]}),(0,eh.jsx)(g.kH,{label:(0,eh.jsx)(f.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,eh.jsx)(R.h,{variant:"ghost","aria-label":h.ag._({id:"C8DFL7"}),colorScheme:d,isRound:!0,size:"xs",icon:(0,eh.jsx)(v.G,{icon:iW.faXmark}),outlineOffset:"0px",ml:"auto",onClick:function(e){e.stopPropagation(),n()},onMouseDown:nc.br})})]})},iV=t(5715),iq=t(46802),iK=t(86378),iY=t(1587),iQ=t(43926),iX=t(82904),iJ=t(38564),i$=t(7935),i0=t(9850),i1=t.n(i0),i2=t(78308),i5=t(16975),i3=t(10221),i4=t(90399),i6=t(60636),i8=t(33295),i9=function(e,n){var t=iJ.Gk.getState(e.state).undoManager,r=t.undoStack[t.undoStack.length-1];r&&r.meta.set("filmstripState",n)},i7=function(e){var n=(0,Q.CG)(iN.wg),t=(0,Q.CG)(iN.zq),r=(0,Q.TL)(),i=(0,eF.p)(),o=(0,y.useCallback)(function(t,r,o){if(e){var s,c=(0,nN.Lz)(e,n);if(c.length){var a=n8.HY.from(c),l=(0,na.G8)(a,e.schema);if(!l){i({title:(0,eh.jsx)(f.cC,{id:"fFgBN7",values:{errorMessage:r}}),status:"error",duration:3e3,position:"top"});return}null===(s=document.getSelection())||void 0===s||s.removeAllRanges(),eK()(l,{format:"text/html"});var d=i3.Z.getState(e.state);d&&!o&&d.clearCutData(),i({title:(0,eh.jsx)(f.cC,{id:"8p/xVT",values:{0:c.length,1:t.one,2:t.other}}),status:"success",duration:3e3,position:"top"})}}},[e,n,i]),s=(0,y.useCallback)(function(){o({one:"Copied card.",other:"Copied ".concat(n.length," cards.")},"Error copying card.",!1)},[o,n]),c=(0,y.useCallback)(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var i=(0,iN.ym)((0,Q.bh)().getState());r((0,iN.jf)()),e.commands.deleteCardsById(n,t),i9(e,i)}},[r,e,n]),a=(0,y.useCallback)(function(){if(e){var t="";if(1===n.length){var r=(0,nN.Bw)(e,n[0]);r&&(t=(0,i$.getCardTitle)(r.node.toJSON()))}c();var o=t?'"'.concat(t,'"'):h.ag._({id:"FyJPFh"}),s=i({title:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(x.x,{noOfLines:1,children:(0,eh.jsx)(f.cC,{id:"OJTPnC",values:{0:n.length,1:n.length,displayTitle:o}})}),(0,eh.jsx)(eU.r,{textDecoration:"underline",onClick:function(){(0,eB.Yw)(e.state),i.close(s)},children:(0,eh.jsx)(f.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})}},[c,e,n,i]),l=(0,y.useCallback)(function(){o({one:"Cut card.",other:"Cut ".concat(n.length," cards")},"Error cutting card.",!0),c(!0)},[c,o,n]),d=(0,y.useCallback)(function(){if(e){var o=(0,nN.Lz)(e,n);if(o.length){var s=(0,nN.Bw)(e,t),c=s?s.pos+s.node.nodeSize:e.state.doc.content.size-1,a=o.map(function(e){return(0,i8.h)(i1()(e.toJSON()))}).map(function(e){return(0,i4.Zs)(e)}),l=(0,iN.ym)((0,Q.bh)().getState());e.chain().insertContentAt(c,a,{updateSelection:!1}).command(function(e){var n=e.tr,t=(0,i6.t)(n.doc.resolve(c));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),i9(e,l),r((0,iN.xi)({beforeCardId:null==s?void 0:s.node.attrs.id,cardCount:a.length})),i({title:(0,eh.jsx)(f.cC,{id:"ClnFsQ",values:{0:o.length,1:o.length}}),status:"success",duration:3e3,position:"top"})}}},[r,e,t,i,n]);return{handleAddCard:(0,y.useCallback)(function(){if(e){var n=(0,iN.zq)((0,Q.bh)().getState()),t=(0,nN.Bw)(e,n);if(t){var i=t.pos,o=e.view.state.doc.nodeAt(i);if(!o){console.error("[Filmstrip] Cannot append card. Node unknown");return}var s=i+o.nodeSize,c=i5.e1.blankCard;(0,i5.ZT)({key:"blankCard",nodeName:"card"},i2.fe.FILMSTRIP_CARD_MENU);var a=(0,iN.ym)((0,Q.bh)().getState());e.chain().insertContentAt(s,(0,i4.Zs)(c),{updateSelection:!1}).command(function(e){var n=e.tr,t=(0,i6.t)(n.doc.resolve(s));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),i9(e,a),r((0,iN.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:1}))}}},[r,e]),handleCopy:s,handleDelete:a,handleCut:l,handleDuplicate:d}},oe=["children","icon","onClick","shouldHide"];function on(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ot(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?on(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var or=function(e){var n=e.children,t=e.icon,r=e.onClick,i=e.shouldHide,o=(0,eA.Z)(e,oe);return void 0!==i&&i?null:(0,eh.jsx)(iX.s,ot(ot({icon:t,onClick:r},o),{},{children:n}))},oi=(0,y.memo)(function(e){var n=e.isDark;return(0,eh.jsxs)(m.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,eh.jsx)(v.G,{fixedWidth:!0,icon:iQ.faRectangle}),(0,eh.jsx)(v.G,{icon:iq.di,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,eh.jsx)(v.G,{icon:iq.di,transform:"shrink-7 right-6 down-4"}),(0,eh.jsx)(v.G,{icon:iV.r8,color:n?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});oi.displayName="AddCardIcon";var oo=function(e,n){if(0===e.length||!n)return null;if(1===e.length){var t=(0,nN.Bw)(n,e[0]);return t?(0,eV.getCardTitle)(t.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},os=(0,y.forwardRef)(function(e,n){var t=e.editor,r=e.isOpen,i=e.onClose,o=e.readOnly,s=e.clearPositioning,c=e.rootStyles,a=e.isDark,l=(0,Q.CG)(X.yx),d=(0,eF.p)(),u=i7(t),h=u.handleCopy,p=u.handleDelete,m=u.handleCut,j=u.handleDuplicate,b=u.handleAddCard,C=(0,Q.CG)(iN.wg),O=1===C.length,w=(0,y.useMemo)(function(){return O?(0,tH.gq)({cardId:C[0],docId:null==l?void 0:l.id,isPresentMode:!1}):""},[null==l?void 0:l.id,O,C]),k=(0,eW.V)(w).onCopy,S=(0,y.useCallback)(function(){k(),d({title:(0,eh.jsx)(f.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[k,d]),E=(0,nd.K)(),I=(0,y.useMemo)(function(){return oo(C,t)},[t,C]),P=(0,y.useMemo)(function(){return a?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{}},[a]);return(0,eh.jsx)(r$.v,{isOpen:r,onClose:i,children:(0,eh.jsxs)(r1.q,{className:"filmstrip-card-menu",onContextMenu:function(e){e.preventDefault()},zIndex:"popover",ref:n,rootProps:{style:c},w:"260px",overflowY:"auto",onTransitionEnd:function(){r||s()},children:[I&&(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(x.x,{pl:3,color:a?"gray.400":"gray.600",noOfLines:1,children:I}),(0,eh.jsx)(r5.R,{})]}),(0,eh.jsx)(or,{shouldHide:o,command:(0,g.cE)("Mod+X"),icon:(0,eh.jsx)(v.G,{fixedWidth:!0,icon:iY.XV}),onClick:m,children:(0,eh.jsx)(f.cC,{id:"cCd8Bs"})}),(0,eh.jsx)(or,{shouldHide:o,command:(0,g.cE)("Mod+C"),icon:(0,eh.jsx)(v.G,{fixedWidth:!0,icon:iK.kZ}),onClick:h,children:(0,eh.jsx)(f.cC,{id:"he3ygx"})}),(0,eh.jsx)(or,{shouldHide:o,command:(0,g.cE)("Mod+D"),icon:(0,eh.jsx)(v.G,{fixedWidth:!0,icon:eG.WM}),onClick:j,children:(0,eh.jsx)(f.cC,{id:"euc6Ns"})}),(0,eh.jsx)(or,{shouldHide:o,icon:(0,eh.jsx)(oi,{isDark:a}),onClick:b,sx:P,children:(0,eh.jsx)(f.cC,{id:"90n2YU"})}),!o&&(0,eh.jsx)(r5.R,{}),(0,eh.jsx)(or,{shouldHide:!O,icon:(0,eh.jsx)(nl.x,{isLocked:!E,isDark:a}),onClick:S,children:(0,eh.jsx)(f.cC,{id:"F0YmUY"})}),(0,eh.jsx)(or,{color:a?"red.300":"red.500",icon:(0,eh.jsx)(v.G,{icon:eM.$,fixedWidth:!0}),onClick:p,shouldHide:o,children:(0,eh.jsx)(f.cC,{id:"cnGeoo"})})]})})});os.displayName="FilmstripCardMenuComponent";var oc=(0,y.memo)(os),oa=t(17033),ol=t(57474),od=t(79183),ou=(0,eX.E)(m.xu),of=function(e){var n=e.isEditorFocused,t=e.isFilmstripSelected,r=e.shouldHide,i=e.cardId,o=e.isDraggingCard,s=e.index;return(0,eh.jsxs)(p.k,{boxShadow:t?"var(--fs-item-selected-box-shadow)":n?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:r?"none":void 0,children:[(0,eh.jsx)(oh,{cardId:i}),(0,eh.jsx)(eJ.M,{children:!r&&!o&&(0,eh.jsx)(ou,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,eh.jsx)(x.x,{children:s})},s)})]})},oh=function(e){var n=e.cardId,t=iL().navItemPreviewRefMap,r=(0,Q.CG)(X.Pu),i=(0,ol.J)(r,!1);return(0,eh.jsx)(p.k,{className:"filmstrip-nav-item-wrapper",sx:ti.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(od.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,eh.jsx)("div",{className:"ProseMirror",children:(0,eh.jsx)(p.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:i,children:(0,eh.jsx)("div",{style:{width:"100%"},ref:function(e){e&&(t[n]=e)}})})})})},op=t(24963),ox=t(8635),om=function(e){var n=e.cardId,t=e.index,r=e.isEditorFocused,i=e.isFilmstripSelected,o=(0,ox.T)({cardId:n}).title;return(0,eh.jsxs)(p.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:i?"var(--fs-text-item-selected-box-shadow)":r?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:i?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,eh.jsxs)(p.k,{alignItems:"center",bg:i?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,eh.jsx)(m.xu,{className:"filmstrip-text-item-number",w:6,fontSize:t>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:t}),(0,eh.jsx)(m.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,eh.jsx)(v.G,{icon:op.Ok})})]}),(0,eh.jsx)(p.k,{p:2,pl:"4px",flex:1,bg:i?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",children:(0,eh.jsx)(x.x,{noOfLines:1,children:o||"Untitled"})})]})},oj=function(e){var n=e.filmstripItemRef,t=e.cardId,r=e.isFilmstripSelected,i=e.currentFocusedCard,o=e.editor,s=e.isAnimating,c=(0,nM.As)("filmstrip"),a=(0,Q.CG)(iN.DM);(0,y.useEffect)(function(){n.current&&t===i&&(null!=o&&o.isFocused&&!s?c.scrollElementIntoView({element:n.current,offsetFromTop:120}):r&&t===a&&requestAnimationFrame(function(){if(n.current&&c.scroller){var e=c.scroller.getBoundingClientRect(),t=n.current.getBoundingClientRect(),r=t.top,i=t.bottom,o=t.height,s=0,a=n.current.closest(".reorder-item");if(a instanceof HTMLElement&&(s=a.offsetTop),i>=e.bottom){var l=Math.max(0,s+o-c.scroller.clientHeight+4);c.scrollTo({top:l})}else r<=e.top&&c.scrollTo({top:s})}}))},[t,i,o,a,r,c,n,s])},ov=t(13720),og=function(){var e=(0,ov.i)({lg:100,xl:125,"2xl":150})||100,n=(0,Q.CG)(iN.K5),t=null!==n?n:e;return{previewWidth:t,width:t+40,fontSize:t/od.DB}},ob=(0,eX.E)(p.k),oC=function(e){var n=e.card,t=e.index,r=e.isFirst,i=e.isEditorFocused,o=e.currentFocusedCard,s=e.isFilmstripSelected,c=e.readOnly,a=e.shouldHide,l=e.isDragInProgress,d=e.numberOfCardsDragging,u=e.onContextClick,f=e.editor,h=e.isAnimating,p=e.showTextOnly,j=n.cardId,v=n.isDragging,g=(0,y.useRef)(null);oj({filmstripItemRef:g,cardId:j,isFilmstripSelected:s,currentFocusedCard:o,editor:f,isAnimating:h});var b=(0,Q.TL)(),C=og().previewWidth,O=(0,y.useCallback)(function(e){if(j){var n=e.shiftKey,t=!n&&(e.metaKey||e.ctrlKey);if(n&&!c)b((0,iN.YC)({id:j,currentFocusedCard:o}));else if(t&&!c)b((0,iN.sY)({id:j}));else{if(l)return;b((0,iN.Ti)({id:j})),b((0,X.Qx)({attached:!1})),f&&(0,oa.YS)({cardId:j,editor:f})}}},[j,c,b,o,l,f]);return(0,eh.jsxs)(m.xu,{className:"filmstrip-item",ref:g,pos:"relative",pt:p?void 0:1,mt:p?1.5:r?void 0:1,onClick:O,onContextMenu:u,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:a?"none":void 0,css:{"--editor-width":"".concat(C,"px")},children:[p&&(0,eh.jsx)(om,{cardId:j,index:t,isFilmstripSelected:s,isEditorFocused:i}),(0,eh.jsx)(of,{shouldHide:p,cardId:j,index:t,isDraggingCard:v,isFilmstripSelected:s,isEditorFocused:i}),(0,eh.jsx)(eJ.M,{children:d&&(0,eh.jsx)(m.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,eh.jsx)(ob,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,eh.jsx)(x.x,{children:d})},"badge-number")})})]})},oy=t(28316),oO=t(12691),ow=(0,y.memo)(function(e){var n=e.content,t=e.theme,r=(0,y.useState)(!1),i=r[0],o=r[1];return((0,y.useEffect)(function(){requestAnimationFrame(function(){o(!0)})},[]),i)?(0,eh.jsx)(ti.m,{theme:t,content:n,isThumbnail:!0,portalComponent:ok}):null}),ok=function(e){var n=e.renderers,t=iL().navItemPreviewRefMap;return(0,eh.jsx)(eh.Fragment,{children:Object.entries(n).map(function(e){var n=(0,P.Z)(e,2),r=n[0],i=n[1],o=i.props.node;if("document"===o.type.name)return null;var s=(0,oO.KH)(o)?t[o.attrs.id]:null;return oy.createPortal(i.reactElement,s||i.element,r)})})};ow.displayName="FilmstripPreviewEditor";var oS=t(20362),oE=(0,y.memo)(function(e){var n=e.onClose,t=e.isDark,r=e.isResizing,i=e.setIsResizing,o=og().previewWidth,s=(0,y.useRef)(null),c=(0,y.useRef)(o),a=(0,y.useRef)(null),l=(0,Q.TL)(),d=(0,y.useCallback)(function(e){if(e.preventDefault(),s.current&&c.current&&a.current){var t=s.current,r=t.width,i=t.x,o=e.clientX-i;if(r+o<=30){n();return}var l=ir()(r+o,90,200);l!==c.current&&(c.current=l,a.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(l,"px;\n          }"))}},[n]),u=(0,oS.Z_)(d,30),f=(0,y.useCallback)(function(e){e.preventDefault(),s.current={x:e.clientX,width:c.current},i(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",function e(){s.current=null,a.current&&(a.current.innerHTML=""),l((0,iN.lh)({width:c.current})),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e),requestAnimationFrame(function(){i(!1)})})},[l,i,u]);return(0,eh.jsxs)(p.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:t?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:f,zIndex:10,children:[(0,eh.jsx)("style",{ref:a}),(0,eh.jsx)(m.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:r?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});oE.displayName="FilmstripResizer";var oI=function(e,n){if(!e||!n)return{id:null,pos:null};var t=e.$from,r=e.from,i=e.to,o=null,s=null;return t.doc.nodesBetween(r,i,function(e,n){var r=t.doc.resolve(n).depth;return!(!o&&(0,nN.KH)(e))||1!==r||(o=e.attrs.id,s=n,!1)}),{id:o,pos:s}},oP=function(){var e;return!!(null!==(e=document.activeElement)&&void 0!==e&&e.closest(iT))},oD=function(){var e=(0,y.useRef)(null),n=(0,y.useState)(!1),t=n[0],r=n[1],i=(0,y.useState)([0,0]),o=i[0],s=i[1],c=(0,y.useState)("bottom"),a=c[0],l=c[1],d=(0,Q.TL)(),u=(0,y.useCallback)(function(){r(!1)},[]),f=(0,y.useCallback)(function(){s([0,0]),l("bottom")},[]),h=(0,y.useCallback)(function(e){r(!0),s(e)},[]),p=(0,y.useCallback)(function(n){return function(t){t.preventDefault(),d((0,iN.uu)({id:n})),h([t.clientX,t.clientY]);var r,i=null===(r=e.current)||void 0===r?void 0:r.offsetHeight;if(null!=i){var o=window.innerHeight<t.clientY+i,s=t.clientY<i;o&&!s?l("top"):o&&s?l("center"):l("bottom")}}},[d,e,h]),x=(0,y.useMemo)(function(){var n,t=o[1],r=null===(n=e.current)||void 0===n?void 0:n.offsetHeight,i=r?window.innerHeight-(t+r+8):void 0,s="center"===a&&i?"translateY(".concat(i,"px)"):"top"===a?"translateY(-100%)":void 0;return{left:o[0],top:o[1],transform:s,transformOrigin:"top"}},[a,o]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:u,handleContextMenu:p,menuRootStyles:x,clearPositioning:f}},oA=t(41261),oT=nz()(oA.YS,200),o_=function(e){var n=e.isFocused,t=e.readOnly,r=e.firstFocusedCardId,i=e.editor,o=e.isDragging,s=i7(i),c=s.handleCopy,a=s.handleDelete,l=s.handleCut,d=s.handleDuplicate,u=(0,Q.TL)(),f=(0,Q.qr)();(0,y.useEffect)(function(){return iE.F7.on("keydown","FILMSTRIP",function(e){if(!n)return!1;switch(e.key){case"Escape":if(o)return u((0,iZ.vL)()),!0;return!1;case"Backspace":case"Delete":if(!t)return a(),!0;return!1;case"a":case"A":if(!t&&(e.ctrlKey||e.metaKey))return e.preventDefault(),u((0,iN.td)({currentFocusedCard:r})),!0;return!1;case"c":case"C":if(!t&&(e.ctrlKey||e.metaKey))return c(),!0;return!1;case"d":case"D":if(!t&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!t&&(e.ctrlKey||e.metaKey))return l(),!0;return!1;case"ArrowDown":u((0,iN.ut)({direction:"down",withShift:!t&&e.shiftKey,currentFocusedCard:r}));var s=(0,iN.wg)(f.getState())[0];return!e.shiftKey&&i&&s&&(oT({cardId:s,editor:i}),u((0,X.Qx)({attached:!1}))),!0;case"ArrowUp":u((0,iN.ut)({direction:"up",withShift:!t&&e.shiftKey,currentFocusedCard:r}));var h=(0,iN.wg)(f.getState())[0];return!e.shiftKey&&i&&h&&(oT({cardId:h,editor:i}),u((0,X.Qx)({attached:!1}))),!0;default:return!1}})},[u,r,n,o,a,c,d,l,t,i,f])},oR=t(74993),oz=function(e){var n=(0,Q.qr)(),t=(0,eF.p)(),r=(0,Q.TL)();(0,y.useEffect)(function(){var i=function(i){var o,s=n.getState();if(e&&oP()&&(0,X.hN)(s)){var c=null===(o=i.clipboardData)||void 0===o?void 0:o.getData("text/html");if(c){var a=(0,oR.T)(c,e.schema).content.content.filter(function(e){return(0,oO.KH)(e)});if(a.length){var l=(0,nN.Bw)(e,(0,iN.zq)(s)),d=l?l.pos+l.node.nodeSize:e.state.doc.content.size-1,u=a.map(function(e){return(0,i8.h)(i1()(e.toJSON()))}).map(function(e){return(0,i4.Zs)(e)}),h=(0,iN.ym)((0,Q.bh)().getState());e.chain().insertContentAt(d,u,{updateSelection:!1}).command(function(e){var n=e.tr;n.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:d});var t=(0,i6.t)(n.doc.resolve(d));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),i.preventDefault(),i9(e,h),r((0,iN.xi)({beforeCardId:null==l?void 0:l.node.attrs.id,cardCount:u.length})),t({title:(0,eh.jsx)(f.cC,{id:"3viq5b",values:{0:a.length,1:a.length}}),status:"success",duration:3e3,position:"top"})}}}};return document.addEventListener("paste",i),function(){document.removeEventListener("paste",i)}},[r,e,n,t])},oL=t(30453),oM=function(){var e=(0,oL.o)(),n=(0,y.useRef)(null),t=(0,y.useRef)(),r=(0,y.useRef)(),i=(0,y.useRef)(),o=(0,y.useCallback)(function(e){if(i.current){var n=oG(i.current),o=e.target;if(n&&o&&void 0!==t.current&&void 0!==r.current){var s=o.scrollTop-t.current;n.y=r.current-s}}},[]),s=(0,y.useCallback)(function(e,t){var r,i=n.current;if(i){var o=i.getBoundingClientRect(),s=t.point.y,c=null===(r=e.target)||void 0===r?void 0:r.closest("[draggable]"),a=null==c?void 0:c.parentElement;a&&(s<o.top+25&&(c!==a.firstElementChild||i.scrollTop>0)?i.scrollTop-=5:s>o.bottom-25&&(c!==a.lastElementChild||i.scrollTop<i.scrollHeight)&&(i.scrollTop+=5))}},[]),c=(0,y.useCallback)(function(){var o=n.current,s=oN(e);if(o&&s){i.current=s,t.current=o.scrollTop;var c=oG(s);c&&(r.current=c.y)}},[e]);return{scrollerRef:n,onScroll:o,dragControls:e,onDrag:s,onDragStart:c,onDragEnd:(0,y.useCallback)(function(){t.current=void 0,r.current=void 0,i.current=void 0},[])}},oN=function(e){try{return Array.from(e.componentControls).find(function(e){return e.isDragging})}catch(e){console.error("[caught] findDraggingElementControls",e);return}},oG=function(e){try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}};function oZ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function oF(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oZ(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oZ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var oU=(0,eX.E)(p.k),oW=(0,eX.E)(m.xu),oH="data-".concat(iI.dh),oB=function(e){var n,t=e.onClose,r=e.editor,i=e.readOnly,o=(0,y.useState)(!1),s=o[0],c=o[1],a=(0,J._)($.H.filmstripViewPreference,"film"),l=(0,P.Z)(a,2),u=l[0],f=l[1],h=(0,y.useRef)(null),x=iU(r),j=x.cards,v=x.isDragging,g=x.editorContent,b=x.selection,C=x.isLoaded,O=(0,y.useMemo)(function(){return oI(b,r)},[r,b]).id,w=(0,Q.TL)(),k=(0,Q.CG)(iN.wg),S=(0,Q.CG)(iZ.pe),E=(0,Q.CG)(iZ.u9),I=(0,Q.CG)(iZ.K3),D=(0,y.useState)(!1),A=D[0],T=D[1],_=oD(),R=_.menuRef,z=_.isFilmstripCardMenuOpen,L=_.onFilmstripCardMenuClose,M=_.clearPositioning,N=_.handleContextMenu,G=_.menuRootStyles,Z=(0,y.useCallback)(function(){if(L(),s){var e;null===(e=h.current)||void 0===e||e.focus()}},[s,L]),F=oM(),U=F.scrollerRef,W=F.onScroll,H=F.dragControls,B=F.onDrag,V=F.onDragStart,q=F.onDragEnd,K=(0,y.useCallback)(function(e){return function(){if(T(!0),V(),h.current){var n=h.current.getBoundingClientRect().height;h.current.style.height="".concat(n,"px")}var t=k.includes(e)?k:[e];w((0,iN.WF)({selectedCardIdsToDrag:t})),w((0,iZ.CA)({cardIds:j.map(function(e){return e.cardId}),leaderCardId:e,selectedCardIds:t}))}},[j,w,k,V]),Y=(0,y.useCallback)(function(){r&&(w((0,iZ.vL)()),r.commands.rearrangeCardsById(j.map(function(e){return e.cardId}),E),q())},[j,w,r,E,q]),ee=(0,y.useCallback)(function(){h.current&&(h.current.style.height="auto"),T(!1)},[]);oz(r),o_({isFocused:s,readOnly:i,firstFocusedCardId:O,editor:r,isDragging:v}),(0,eI.O)({ref:h,handler:function(e){R.current&&R.current.contains(e.target)||(z&&L(),w((0,iN.Mt)()))}});var en=(0,Q.CG)(X.Pu),et=(0,eH.ff)("whiteAlpha.600","whiteAlpha.100"),er=(0,eH.ff)("#F9FAFBDD","gray.900"),ei=(0,eH.ff)("gray.800","gray.200"),eo=(0,eH.ff)("blackAlpha.400","whiteAlpha.500"),es="dark"===(0,eH.If)().colorMode,ec=(0,y.useMemo)(function(){return{"--fs-item-border-color":es?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":es?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":es?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":es?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":es?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":es?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":es?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}},[es]),ea=(0,y.useState)(!1),el=ea[0],ed=ea[1],eu={initial:{x:-(n=og().width)},animate:{x:0,transition:iP},exit:{x:-n,transition:iD}},ef=(0,y.useMemo)(function(){var e=E.length;return v&&e>1?e:null},[v,E.length]),ep=(0,y.useState)(!1),ex=ep[0],em=ep[1],ej=(0,nM.As)("filmstrip");return(0,y.useEffect)(function(){ej.setScrollSelector(iR)},[ej]),(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsxs)(p.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:12,bottom:2,justifyContent:"center",color:ei,children:[r&&C&&(0,eh.jsx)(ow,{content:g,theme:en}),(0,eh.jsxs)(m.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:ex?0:1}},maxHeight:"100%",children:[(0,eh.jsxs)(oU,oF(oF(oF({ref:h,"data-guider-highlight":"filmstrip",className:iA},(0,d.Z)({},oH,!0)),{},{pos:"relative",direction:"column",zIndex:11},eu),{},{onAnimationStart:function(){em(!0)},onAnimationComplete:function(){em(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:function(){c(!0),null==r||r.commands.blur()},onBlur:function(e){var n,t;h.current&&null!==(n=h.current)&&void 0!==n&&n.contains(e.relatedTarget)||null!==(t=R.current)&&void 0!==t&&t.contains(e.relatedTarget)||c(!1)},borderRadius:"md",bg:er,borderWidth:"1px",borderColor:et,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,eh.jsx)(iB,{isDark:es,onClose:t,viewPreference:u,setViewPreference:f}),(0,eh.jsx)(oW,{className:i_,layoutScroll:!0,overflowY:"auto",position:"relative",sx:oF({"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:eo,borderRadius:"full"}},ec),ref:U,onScroll:W,p:"8px",pt:0,children:(0,eh.jsx)(iM.t.Group,{onReorder:function(e){var n=e.map(function(e){return e.cardId});w((0,iZ.k)({reorderedCardIds:n}))},values:j,axis:"y",children:r&&C&&j.map(function(e,n){var t=e.cardId,o=e.displayBehavior,s=k.includes(t),c=I===t;return(0,eh.jsx)(iM.t.Item,{drag:!i&&"y",value:e,onDragStart:K(t),onDragEnd:Y,onDragTransitionEnd:ee,className:"reorder-item",dragControls:H,transition:{layout:{duration:el?0:void 0}},onDrag:B,style:{position:"relative",listStyle:"none"},children:(0,eh.jsx)(oC,{readOnly:i,editor:r,card:e,index:v&&void 0!==S[t]?S[t]:n+1,isFirst:0===n,shouldHide:"hidden"===o,isDragInProgress:A,isEditorFocused:O===t&&r.isFocused,isFilmstripSelected:!!s,currentFocusedCard:O,numberOfCardsDragging:c?ef:null,onContextClick:N(t),isAnimating:ex,showTextOnly:"list"===u})},t)})})})]})),(0,eh.jsx)(oE,{onClose:t,isDark:es,isResizing:el,setIsResizing:ed})]})]}),r&&(0,eh.jsx)(oc,{ref:R,editor:r,readOnly:i,isOpen:z,onClose:Z,clearPositioning:M,rootStyles:G,isDark:es})]})},oV=function(){var e=(0,Q.TL)(),n=(0,Q.CG)(iN.GX),t=(0,ov.i)({base:!1,lg:!0})||!1,r=(0,y.useState)(!1),i=r[0],o=r[1],s=(0,y.useState)(!1),c=s[0],a=s[1],l=(0,y.useCallback)(function(){e((0,iN.dQ)({isOpen:!1})),e((0,iN.Mt)()),a(!0)},[e]),d=(0,y.useCallback)(function(){t||o(!0),e((0,iN.dQ)({isOpen:!0}))},[t,e]),u=!t&&i;return(0,y.useEffect)(function(){var n=!t&&!i,r=t&&!c;n?e((0,iN.dQ)({isOpen:!1})):r&&e((0,iN.dQ)({isOpen:!0}))},[e,t,i,c]),{onClose:l,onOpen:d,isOpen:n&&(t||!t&&u)}},oq=(0,eX.E)(ef.z),oK=(0,y.memo)(function(){var e=(0,nK._i)().editor,n=oV(),t=n.isOpen,r=n.onClose,i=n.onOpen,o=(0,y.useRef)({navItemPreviewRefMap:{}}),s=(0,iI.Br)("edit"),c=(0,Q.CG)(X.hN),a=(0,eS.Yy)(),l=(0,y.useState)(!1),d=l[0],u=l[1],h=(0,y.useCallback)(function(){u(!0),setTimeout(function(){i()}),setTimeout(function(){u(!1)},750)},[i]);return(0,y.useEffect)(function(){return iE.F7.on("keydown","FILMSTRIP",function(e){return!!(0,rT.ZP)("Mod+\\")(e)&&(t?r():h(),!0)})},[t,r,h]),(0,eh.jsx)(iz.Provider,{value:o.current,children:(0,eh.jsx)(g.Wk,{isDark:a,children:(0,eh.jsx)(eJ.M,{children:t?(0,eh.jsx)(oB,{onClose:r,editor:e,readOnly:!s||!c},"filmstrip"):(0,eh.jsx)(g.kH,{placement:"top-end",label:(0,eh.jsx)(f.cC,{id:"7ShgZt"}),isDisabled:d,shortcut:"Mod+\\",children:(0,eh.jsxs)(oq,{initial:{opacity:0},animate:{opacity:1,transition:iD},exit:{opacity:0,transition:iP},zIndex:11,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:h,children:[(0,eh.jsx)(iS.TX,{children:(0,eh.jsx)(f.cC,{id:"7ShgZt"})}),d?(0,eh.jsx)(p.k,{children:(0,eh.jsx)(tm.$,{size:"sm"})}):(0,eh.jsx)(v.G,{icon:ik.Cj})]},"filmstrip-opener")})})})})});oK.displayName="Filmstrip";var oY=t(3974),oQ=t(1472),oX=t(93319),oJ=t(91128),o$=t(97873),o0=t(42879),o1=function(e){var n,t=e.doc,r=(0,y.useState)(!1),i=r[0],o=r[1],s=null==t?void 0:t.id,c=null==t?void 0:null===(n=t.organization)||void 0===n?void 0:n.id,a=(0,nB.py)("manage",t),l=(0,w.bBo)({variables:{workspaceId:c},skip:!c||!a}).data,d=(0,o0.uK)({doc:t,sites:null==l?void 0:l.sites}),u=(0,o0.D5)({site:d,docId:s}),h=(0,o$.q)({doc:t,site:d,path:u}).publishDoc,p=(0,y.useCallback)((0,nQ.Z)(nJ().mark(function e(){return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,h();case 3:o(!1);case 4:case"end":return e.stop()}},e)})),[h]);return d?(0,eh.jsx)(ef.z,{size:"sm",variant:"solid",fontWeight:"400",leftIcon:(0,eh.jsx)(v.G,{icon:oJ.A$}),onClick:p,isLoading:i,children:(0,eh.jsx)(f.cC,{id:"EEYbdt"})}):null},o2=t(92743),o5=t(56317),o3=t(6985),o4=t(25298),o6=t(20010),o8=t(48273),o9=t(92619),o7=t(27777),se=t(67453),sn=function(e){var n=e.isOpen,t=e.onClose,r=e.onSaveSuccess,i=e.docId,o=(0,eF.p)(),s=(0,y.useRef)(null),c=(0,y.useState)(""),a=c[0],l=c[1],d=(0,w.D1_)(),u=(0,P.Z)(d,2),h=u[0],p=u[1].loading,x=function(){h({variables:{id:i,title:a}}).then(function(){l(function(){return""}),r()}).catch(function(e){console.error(e),o({title:(0,eh.jsx)(eh.Fragment,{children:(0,eh.jsx)(f.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,eh.jsxs)(o6.u_,{returnFocusOnClose:!1,onClose:t,closeOnOverlayClick:!0,isOpen:n,initialFocusRef:s,children:[(0,eh.jsx)(n0.Z,{}),(0,eh.jsxs)(o8.h,{children:[(0,eh.jsx)(o9.x,{children:(0,eh.jsx)(f.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}})}),(0,eh.jsx)(n2.o,{}),(0,eh.jsx)(n5.f,{children:(0,eh.jsx)(o7.I,{ref:s,value:a,required:!0,placeholder:(0,se.$)(),onChange:function(e){return l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&x()}})}),(0,eh.jsx)(n3.m,{children:(0,eh.jsx)(ea.K,{spacing:2,direction:"row",align:"center",children:(0,eh.jsx)(ef.z,{isLoading:p,isDisabled:p||!a||!a.length,onClick:function(){x()},children:(0,eh.jsx)(f.cC,{id:"tfDRzk"})})})})]})]})},st=(0,y.memo)(function(e){var n=e.doc,t=(0,y.useCallback)(function(){return o3.T.emit("openSharePanel",{view:"invite"})},[]),r=(0,tk.M)({id:"analyticsModalDisclosure"}),i=r.isOpen,o=r.onClose,s=r.onOpen,c=(0,tk.M)({id:"titleModalDisclosure"}),a=c.isOpen,l=c.onOpen,d=c.onClose,u=(0,nD.z$)(),x=(0,nB.SE)().user,m=(0,nB.py)("manage",n)&&!!x,j=(0,y.useCallback)(function(){n&&(n.title&&""!==n.title?t():l())},[n,t,l]),b=(0,y.useCallback)(function(e){return function(){null==u||u.track(nD.AA.DOC_ANALYTICS_VIEWED,{docId:null==n?void 0:n.id,source:e,type:"full"}),s()}},[u,null==n?void 0:n.id,s]);return m&&n?(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(p.k,{children:(0,eh.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,eh.jsx)(f.cC,{id:"YaUqUV"}),children:(0,eh.jsx)(o4.r,{"data-guider-highlight":"view-analytics-button","aria-label":h.ag._({id:"YaUqUV"}),onMouseDown:nc.br,onClick:b("toolbar_analytics_block"),icon:(0,eh.jsx)(v.G,{icon:o2.M})})})}),a&&(0,eh.jsx)(sn,{onClose:d,isOpen:a,onSaveSuccess:function(){d(),t()},docId:null==n?void 0:n.id}),i&&(0,eh.jsx)(o5.r,{doc:n,onSharePanelOpen:j,onAnalyticsPanelClose:o,isAnalyticsPanelOpen:i,mode:"full"})]}):null}),sr=t(24657),si=t(67784),so=t(94370),ss=t(38843),sc=t(67925),sa=t(73716),sl=t(10920),sd=t(15756),su=t(81410),sf=t(5632),sh=t(43227),sp=t(57973);function sx(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function sm(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?sx(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var sj=(0,eX.E)(p.k),sv=function(e){var n=e.doc;return(0,eh.jsx)(sj,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,eh.jsx)(eJ.M,{initial:!1,children:(0,eh.jsx)(sO,{doc:n})})})},sg=(0,y.memo)(function(e){var n=e.doc,t=(0,nK._i)().editor,r=(0,w.$gs)().isConnected,i=(0,eF.p)(),o=(0,y.useRef)(null),s=(0,y.useRef)(null),c=(0,w.D1_)(),a=(0,P.Z)(c,2),l=a[0],d=a[1].loading,u=(0,y.useState)(null),p=u[0],x=u[1],j=(0,y.useState)(!1),v=j[0],b=j[1],C=(0,y.useState)(!1),O=C[0],k=C[1],S=(0,nB.py)("edit",n),E=(0,y.useCallback)(function(){if(!t)return"";var e=(0,nL.N2)(t.state.doc,nN.KH),n=(0,P.Z)(e,1)[0];return n&&(0,eV.getCardTitle)(n.node.toJSON())||""},[t]);(0,y.useEffect)(function(){!n||v||d||(x(n.title||""),k(!!n.titleEdited))},[n,v,d]);var I=function(){o.current.style.width=s.current.offsetWidth+0+"px"},D=(0,eH.ff)("gray.800","gray.200");return(0,eh.jsx)(g.kH,{label:S?r?(0,eh.jsx)(f.cC,{id:"2wxgft"}):(0,eh.jsx)(f.cC,{id:"Cb+Bgk"}):null,"aria-label":h.ag._({id:"2wxgft"}),children:(0,eh.jsxs)(ss.C,{value:p||"",placeholder:p||E(),isDisabled:d||!S||!r,isPreviewFocusable:S,maxW:300,width:"100%",fontWeight:"normal",onCancel:function(){I(),b(!1)},onFocus:function(){I(),n&&!d&&b(!0)},onChange:function(e){I(),v&&(x(e),k(!!e))},onSubmit:function(){if(n&&!d){b(!1);var e=p||E();l({variables:{id:n.id,title:e,titleEdited:O}}).catch(function(e){console.error(e),i({title:(0,eh.jsx)(f.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})}},children:[(0,eh.jsx)(sc.w,{px:1,py:.5,display:v?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:O?D:"inherit"}),(0,eh.jsx)(sa.V,{ref:o,px:1,py:.5,color:O?D:"inherit",maxW:300,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,eh.jsx)(m.xu,{ref:s,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:t$().sanitize((p||"").replace(/\s/g,"&nbsp;"))}})]})})});sg.displayName="EditableDocTitle";var sb=function(e){var n=e.cardId,t=e.isEllipsis,r=e.value,i=e.onClick,o=(0,ox.c)(n);if(t)return(0,eh.jsx)(v.G,{icon:so.cN});if(!n&&!r)return null;var s=r||(null==o?void 0:o.title)||"";return(0,eh.jsx)(x.x,{noOfLines:1,onClick:i,maxW:180,fontWeight:"normal",children:s})},sC=function(e){var n=e.isPresentModeFlat;return function(e){var t=(0,X.gh)(e),r=(0,X.i2)(e)||"",i=(0,X.X9)(e).parents[r]||[];if("DOC_VIEW"===t||n)return[{isHome:!0},{isDocTitle:!0}];var o=i[0],s=i[i.length-1];return[{isHome:!0},i.length>1?{cardId:o}:null,i.length>2?{isEllipsis:!0}:null,i.length>0?{cardId:s}:null,{cardId:r}]}},sy=function(){var e=(0,is.ye)("presentModeFlat");return(0,Q.CG)(sC({isPresentModeFlat:e}),function(e,n){return JSON.stringify(e)===JSON.stringify(n)})},sO=(0,y.memo)(function(e){var n=e.doc,t=sy(),r=(0,sp.X)($.H.lastHomeUrl,"/"),i=(0,P.Z)(r,1)[0],o=(0,is.ye)("offline"),s=(0,nB.SE)().user,c=(0,w.$gs)().isConnected,a=(0,nK._i)().confirmNavigation,l=(0,sf.useRouter)().push,d=(0,ov.i)({base:"xs",sm:"sm"}),j=(0,eH.ff)("gray.500","gray.400"),b=(0,eH.ff)("gray.800","gray.100");return(0,eh.jsxs)(es.U,{spacing:0,as:ef.z,textAlign:"left",px:0,_hover:{color:b},h:8,children:[(0,eh.jsx)(sl.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:d,spacing:["4px","8px"],variant:"plainButton",separator:(0,eh.jsx)(m.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,eh.jsx)(v.G,{icon:si._t})}),children:t.map(function(e,r){if(!e)return null;var o=r===t.length-1,c=e.cardId,d=e.isEllipsis,u=e.isDocTitle,f=e.isHome,h=e.value,p=f?"home":d?"ellipsis":c||h||r;if(f&&!s)return null;var x={as:tN(),href:i||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,eh.jsx)(sd.g,{children:(0,eh.jsx)(sj,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,eh.jsx)(su.A,sm(sm({isCurrentPage:o,pointerEvents:o&&!u?"none":"inherit",color:o?j:"inherit"},f?sm({},x):{}),{},{children:u?(0,eh.jsx)(sg,{doc:n}):f?(0,eh.jsx)(eU.r,{href:x.href,onClick:function(e){e.preventDefault(),a().then(function(){l(x.href)})},mr:1,children:(0,eh.jsx)(v.G,{size:"1x",icon:sr.J9})}):(0,eh.jsx)(sb,{cardId:c,value:h,isEllipsis:d,onClick:function(){c&&(0,sh.D)({cardId:c,method:"push"})}})}))},p)},p)})}),!c&&(0,eh.jsx)(g.kH,{label:(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(x.x,{mr:2,children:(0,eh.jsx)(f.cC,{id:"ysdDIA"})}),o&&(0,eh.jsx)(x.x,{color:"gray.300",children:(0,eh.jsx)(f.cC,{id:"+QNhGE"})})]}),"aria-label":h.ag._({id:"IcHxhR"}),children:(0,eh.jsx)(p.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,eh.jsx)(v.G,{icon:u.bK})})})]})});sO.displayName="BreadcrumbGroup";var sw=t(33902),sk=t(74624),sS=t(5735),sE=t(45390),sI=t(57895),sP=t(68871),sD=t(90282),sA=t(24799),sT=t(1672),s_=t(10649),sR=t(4036),sz=t(82282),sL=t(31807),sM=t(9846),sN=t(21010),sG=t(76360),sZ=t(75342),sF=function(e){var n=e.onAddDomain,t=e.isAddingDomain,r=(0,y.useState)(""),i=r[0],o=r[1],s=(0,o0.m6)(i);return(0,eh.jsx)(sG.Z,{my:2,variant:"filled",children:(0,eh.jsx)(sZ.e,{fontSize:"sm",children:(0,eh.jsxs)(ea.K,{spacing:5,children:[(0,eh.jsx)(x.x,{fontSize:"xl",fontWeight:"bold",children:(0,eh.jsx)(f.cC,{id:"MPZogu",values:{GAMMA_PROPER_NOUN:eg.N6}})}),(0,eh.jsxs)(tY.NI,{children:[(0,eh.jsx)(tQ.l,{children:(0,eh.jsx)(f.cC,{id:"49uOXe"})}),(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(o7.I,{bg:"white",placeholder:"www.yourdomain.com",value:i,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s&&(e.preventDefault(),n(i))}}),(0,eh.jsx)(ea.K,{children:(0,eh.jsx)(g.kH,{label:(0,eh.jsx)(f.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:s,children:(0,eh.jsx)(ef.z,{isDisabled:!s,variant:"solid",onClick:function(){return n(i)},isLoading:t,children:(0,eh.jsx)(f.cC,{id:"SbL5Je"})})})})]})]})]})})})},sU=t(89458),sW=t(74995),sH=t(21891),sB=t(92936),sV=t(60807),sq=t(72360),sK=t(48322),sY=t(35837),sQ=t(2875),sX=function(e){var n=e.path,t=e.pathError,r=e.conflictingRoute,i=e.onPathUpdate,o=e.isPathInputDisabled,s=e.onClose;return(0,eh.jsxs)(ea.K,{pb:6,children:[(0,eh.jsx)(ea.K,{direction:"row",children:(0,eh.jsxs)(x.x,{children:[(0,eh.jsx)(f.cC,{id:"dq8+qI"}),":"," "]})}),(0,eh.jsx)(oX.L,{}),(0,eh.jsx)(ea.K,{spacing:2,children:(0,eh.jsx)(es.U,{spacing:1,children:(0,eh.jsxs)(tY.NI,{as:"fieldset",isInvalid:void 0!==t&&t,children:[(0,eh.jsx)(es.U,{children:(0,eh.jsxs)(sH.B,{children:[(0,eh.jsx)(sB.Ui,{children:"/"}),(0,eh.jsx)(o7.I,{isDisabled:o,bg:"white",flex:2,value:n,onChange:function(e){i((0,o0.pi)(e.currentTarget.value))}})]})}),(0,eh.jsxs)(ea.K,{spacing:4,children:[(0,eh.jsx)(tY.Q6,{fontSize:"sm",children:(0,eh.jsxs)(ea.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:[(0,eh.jsx)(ea.K,{spacing:1,children:(0,eh.jsx)(x.x,{color:"gray.500",children:(0,eh.jsx)(f.cC,{id:"ZMlbHK"})})}),r&&(0,eh.jsx)(sV.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,eh.jsx)(x.x,{fontSize:"xs",children:(0,eh.jsx)(f.cC,{id:"DQaTdC",components:{0:(0,eh.jsx)(eU.r,{textDecoration:"underline",href:(0,tH.Gn)({docId:r.docId}),target:"_blank"})}})})})]})}),(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.500",mt:4,children:(0,eh.jsx)(f.cC,{id:"g4cZni",components:{0:(0,eh.jsx)(ef.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){s(),sQ.pw.emit(sQ.TI.OPEN_PAGE_SETUP,"preview")}})}})}),(0,eh.jsxs)(sq.b,{colorScheme:"gray",bg:"blackAlpha.100",children:[(0,eh.jsx)(sK.z,{}),(0,eh.jsxs)(ea.K,{children:[(0,eh.jsx)(x.x,{fontWeight:"bold",fontSize:"sm",children:(0,eh.jsx)(f.cC,{id:"E29kJ/"})}),(0,eh.jsxs)(sY.QI,{pl:"4",spacing:"1",fontSize:"xs",children:[(0,eh.jsxs)(sY.HC,{children:[(0,eh.jsx)(f.cC,{id:"tB9qsK",values:{GAMMA_PROPER_NOUN:eg.N6}})," ",(0,eh.jsx)(g.Yq,{label:h.ag._({id:"9sEGjz"})})]}),(0,eh.jsx)(sY.HC,{children:(0,eh.jsx)(f.cC,{id:"8Ijq31"})}),(0,eh.jsx)(sY.HC,{children:(0,eh.jsx)(f.cC,{id:"0rExAx"})})]})]})]})]})]})})})]})},sJ=function(e){var n=e.onClose,t=e.onConfirm,r=(0,y.useCallback)(function(){n(),t()},[n,t]);return(0,eh.jsxs)(o6.u_,{onClose:n,isOpen:!0,children:[(0,eh.jsx)(n0.Z,{}),(0,eh.jsxs)(o8.h,{children:[(0,eh.jsx)(o9.x,{children:(0,eh.jsx)(f.cC,{id:"dqU8B8"})}),(0,eh.jsx)(n2.o,{}),(0,eh.jsx)(n5.f,{children:(0,eh.jsxs)(ea.K,{spacing:4,children:[(0,eh.jsx)(x.x,{fontWeight:"bold",children:(0,eh.jsx)(f.cC,{id:"TKppIR"})}),(0,eh.jsx)(x.x,{children:(0,eh.jsx)(f.cC,{id:"jvL5br"})})]})}),(0,eh.jsx)(n3.m,{children:(0,eh.jsxs)(n4.h,{children:[(0,eh.jsx)(ef.z,{variant:"ghost",onClick:n,children:(0,eh.jsx)(f.cC,{id:"dEgA5A"})}),(0,eh.jsx)(ef.z,{variant:"ghost",colorScheme:"red",onClick:r,children:(0,eh.jsx)(f.cC,{id:"3EbjfR"})})]})})]})]})},s$=t(84558),s0=t(8388),s1=function(e){var n=e.heading,t=e.subheading,r=e.icon,i=e.children;return(0,eh.jsxs)(p.k,{gap:4,alignItems:"center",children:[(0,eh.jsx)(p.k,{h:"8",w:"8",bg:"gray.200",borderRadius:"full",justifyContent:"center",alignItems:"center",color:"gray.800",children:(0,eh.jsx)(v.G,{icon:r})}),(0,eh.jsxs)(ea.K,{spacing:0,children:[n,t]}),(0,eh.jsx)(oX.L,{}),i]})},s2=function(e){var n,t,r=e.doc,i=e.site,o=e.path,s=e.isPublishing,c=void 0!==s&&s,a=e.isUnpublishing,l=void 0!==a&&a,d=e.enabled,u=e.publishButtonTooltipLabel,p=e.onPublishClick,m=e.onUnpublishClick,j=null==r?void 0:r.title,b=!!(null==r?void 0:r.publishedSnapshotId),C=null==i?void 0:null===(n=i.currentDeployment)||void 0===n?void 0:n.deploymentTime,O=b&&!!C&&(null==i?void 0:i.currentDeployment)&&(null==r?void 0:r.publishedTime)&&new Date(null==i?void 0:i.currentDeployment.deploymentTime)>new Date(r.publishedTime),w=null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],k=(0,o0.mn)({domain:w,path:o}),S=(0,y.useMemo)(function(){return{fromNow:(0,s0.Km)(C),calendar:(0,s0.p6)(C,"PPpp")}},[C]);return(0,eh.jsx)(s1,{heading:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(x.x,{noOfLines:1,children:j}),O&&(0,eh.jsx)(sR.C,{colorScheme:"green",children:"Live"})]}),subheading:O?(0,eh.jsxs)(es.U,{spacing:1.5,fontSize:"sm",children:[(0,eh.jsx)(x.x,{color:"gray.500",fontSize:"sm",children:(0,eh.jsx)(f.cC,{id:"ay/UB+",values:{0:S.fromNow},components:{0:(0,eh.jsx)(g.kH,{label:S.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,eh.jsx)(x.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})}),(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.500",children:""}),(0,eh.jsx)(ef.z,{variant:"link",size:"sm",onClick:m,isDisabled:c||l,isLoading:l,children:(0,eh.jsx)(f.cC,{id:"4DLZUa"})})]}):l||c?(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.500",children:(0,eh.jsx)(tm.$,{size:"xs"})}):(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.500",children:(0,eh.jsx)(f.cC,{id:"mY40hj"})}),icon:s$.Rk,children:(0,eh.jsxs)(n4.h,{children:[(0,eh.jsx)(g.kH,{label:u,shouldWrapChildren:!0,placement:"top",children:(0,eh.jsx)(ef.z,{variant:"solid",isDisabled:!d,isLoading:c||l,loadingText:c?h.ag._({id:"Bdha5y"}):l?h.ag._({id:"JZOp0b"}):void 0,onClick:p,children:(0,eh.jsx)(f.cC,{id:"qcawwg"})})}),O&&(0,eh.jsx)(g.kH,{label:k,shouldWrapChildren:!0,placement:"top",children:(0,eh.jsx)(ef.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:k,isDisabled:!d,rightIcon:(0,eh.jsx)(v.G,{icon:tT.faArrowUpRightFromSquare}),children:(0,eh.jsx)(f.cC,{id:"Zel0o2"})})})]})})};function s5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s3(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s5(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var s4={path:""},s6=function(e){var n,t=e.isOpen,r=e.onClose,i=e.doc,o=(0,eF.p)(),s=(0,y.useState)(s4),c=s[0],a=s[1],l=(0,y.useState)(s4),d=l[0],u=l[1],h=(0,y.useState)(!1),p=h[0],x=h[1],m=i.id,j=null===(n=i.organization)||void 0===n?void 0:n.id,v=(0,sN.bBo)({variables:{workspaceId:j},skip:!j}),b=v.data,C=v.refetch,O=(0,tk.M)({id:"domainSetupModal"}),w=O.isOpen,k=O.onOpen,S=O.onClose,E=(0,tk.M)({id:"publishModalWarning"}),I=E.isOpen,P=E.onOpen,D=E.onClose,A=null==b?void 0:b.sites,T=(0,o0.uK)({doc:i,sites:A}),_=(0,o0.D5)({site:T,docId:m}),R=(0,o0.Rh)({site:T,docId:m}),z=(0,o0.gT)({routes:(null==T?void 0:T.routes)||[],path:c.path,docId:m}),L=null==T?void 0:T.domains.find(function(e){return"pending"===e.status}),M=c.path!==d.path||void 0===_,N=!!i&&!!b,G=!io()(c,d),Z=(0,y.useState)("coldStart"),F=Z[0],U=Z[1],W=(0,y.useState)(null),H=W[0],B=W[1],V=(0,y.useState)(!1),q=V[0],K=V[1],Y=!!q&&!z&&!1===p,Q=(0,y.useState)(),X=Q[0],J=Q[1],$=(0,o$.q)({doc:i,site:T,path:c.path}),ee=$.publishDoc,en=$.addDomain,et=$.isAddingDomain,er=$.createSite,ei=$.isCreatingSite,eo=$.unpublishDoc,es=$.updateRoutes;(0,y.useEffect)(function(){if(L){var e=setInterval(function(){C()},1e4);return function(){clearInterval(e)}}},[L,C,T]),(0,y.useEffect)(function(){N&&T&&K(!0)},[N,T,_]),(0,y.useEffect)(function(){N&&T&&U("hasDomains")},[N,T]),(0,y.useEffect)(function(){a({path:_||""}),u({path:_||""})},[_]);var ec=(0,y.useCallback)(function(e){J(e),k()},[k]),ed=(0,y.useCallback)((0,nQ.Z)(nJ().mark(function e(){return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(!z){e.next=5;break}return o({description:(0,eh.jsx)(f.cC,{id:"ldkJkh",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}),status:"error",position:"top",duration:5e3,isClosable:!0}),e.abrupt("return");case 5:if(x("publish"),!M){e.next=9;break}return e.next=9,es();case 9:return e.next=11,ee();case 11:x(!1);case 12:case"end":return e.stop()}},e)})),[z,m,M,ee,o,es]),eu=(0,y.useCallback)((0,nQ.Z)(nJ().mark(function e(){return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x("unpublish"),e.next=3,eo();case 3:x(!1);case 4:case"end":return e.stop()}},e)})),[eo]),ef=(0,y.useCallback)(function(){G?P():r()},[G,r,P]),ep=(0,y.useCallback)(function(e){"addDomain"===H?(en(e),S()):"createSite"===H&&(er(e),S())},[en,H,er,S]);return console.log("%cPublishWebsite debug","background-color: #cc00ff",{doc:i,sites:A,siteToUse:T,pathForPathEditor:_}),(0,eh.jsx)(g.Wk,{isDark:!1,children:(0,eh.jsxs)(o6.u_,{isOpen:t,onClose:ef,size:"4xl",closeOnOverlayClick:!1,children:[(0,eh.jsx)(n0.Z,{}),(0,eh.jsx)(o8.h,{children:N?(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsxs)(ea.K,{px:6,py:4,borderBottomWidth:"1px",children:[(0,eh.jsx)(el.X,{mb:2,children:(0,eh.jsx)(f.cC,{id:"Khu3PV"})}),"hasDomains"===F&&(0,eh.jsx)(s2,{doc:i,path:R,site:T,enabled:Y,publishButtonTooltipLabel:q?void 0===_?(0,eh.jsx)(f.cC,{id:"O7BXvp"}):void 0:(0,eh.jsx)(f.cC,{id:"XDmUdC"}),onPublishClick:ed,onUnpublishClick:eu,isPublishing:"publish"===p,isUnpublishing:"unpublish"===p})]}),(0,eh.jsx)(n2.o,{}),(0,eh.jsx)(n5.f,{children:(0,eh.jsxs)(ea.K,{spacing:6,children:["coldStart"===F&&(0,eh.jsx)(sF,{onAddDomain:function(e){B("createSite"),J(e),k()},isAddingDomain:ei}),"hasDomains"===F&&T&&(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(sU.T,{path:R,site:T,onDomainSetupClick:ec,onAddDomain:function(e){k(),J(e),B("addDomain")},isAddingDomain:et,refetchSites:C}),(0,eh.jsx)(sX,{path:c.path,pathError:!!z,conflictingRoute:z,isPathInputDisabled:!1!==p,onPathUpdate:function(e){a(function(n){return s3(s3({},n),{},{path:e})})},onClose:r})]})]})})]}):(0,eh.jsx)(tm.$,{})}),w&&X&&(0,eh.jsx)(sW.w,{domainName:X,isOpen:w,onClose:function(){S(),B(null)},onDomainConfirmed:H?ep:null}),I&&(0,eh.jsx)(sJ,{onClose:D,onConfirm:r})]})})},s8=function(e){var n,t=e.doc,r=(0,tk.M)({id:"publishModal"}),i=r.isOpen,o=r.onClose,s=r.onOpen,c=null===(n=t.organization)||void 0===n?void 0:n.id,a=(0,sN.bBo)({variables:{workspaceId:c},skip:!c}).data,l=(null==a?void 0:a.sites)||[];return(0,eh.jsxs)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:oJ.A$,fixedWidth:!0}),onClick:function(){s()},children:[(0,eh.jsxs)(es.U,{children:[l.length>0?(0,eh.jsx)(f.cC,{id:"BCIqs5"}):(0,eh.jsx)(f.cC,{id:"TMYPtj"}),(0,eh.jsx)(oX.L,{}),(0,eh.jsx)(sR.C,{colorScheme:"green",ml:2,children:(0,eh.jsx)(f.cC,{id:"YBt9YP"})})]}),t&&i&&(0,eh.jsx)(s6,{doc:t,isOpen:i,onClose:o})]})},s9=t(42048),s7=t(65903),ce=t.n(s7),cn=t(98649),ct=function(e){var n=(0,Q.CG)(X.e_),t=(0,Q.TL)(),r=(0,y.useCallback)(function(e){t((0,X.Qt)({docAttrs:{format:e}}))},[t]);return(0,eh.jsx)(n4.h,{size:"sm",isAttached:!0,my:2,children:cn.n.map(function(e){return(0,eh.jsx)(ef.z,{isActive:e.key===n.key,onClick:function(){return r(e.key)},children:ce()(e.label)},e.key)})})},cr=t(85147),ci=t(20387),co=function(){var e;return e={},(0,d.Z)(e,nZ.q.DOC_VIEW,{buttonLabel:(0,eh.jsx)(f.cC,{id:"eZb+lw"}),shortcutIcon:ci.zc,shortcutKeys:(0,g.cE)("Mod+Enter"),shortcutLabel:(0,eh.jsx)(f.cC,{id:"9vUn+H"})}),(0,d.Z)(e,nZ.q.SLIDE_VIEW,{buttonLabel:(0,eh.jsx)(f.cC,{id:"ydzS9x"}),shortcutIcon:cr.Bg,shortcutKeys:"Esc",shortcutLabel:(0,eh.jsx)(f.cC,{id:"5Rfo7J"})}),e},cs=t(8699),cc=t(47592),ca=t(59131),cl=(0,rT.ZP)("mod+Enter"),cd=(0,rT.ZP)("Esc"),cu=(0,rT.ZP)("mod+Esc"),cf=(0,rT.ZP)("shift+mod+Enter"),ch=function(e,n){var t=document.querySelector(n);if(t){var r=t.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(r.width/2,100),100)}},cp=function(e){var n=e.editorWrapperEl,t=e.scrollingParentSelector,r=(0,Q.TL)(),i=(0,y.useState)(!1),o=i[0],s=i[1],c=(0,y.useState)(!1),a=c[0],l=c[1],d=(0,nK._i)().editor,u=(0,Q.CG)(X.gh),f=(0,y.useRef)(u);(0,y.useEffect)(function(){f.current=u},[u]);var h=(0,Q.CG)(X.yq),p=(0,Q.CG)(X.JA),x=(0,Q.CG)(rG.C),m=(0,nD.z$)(),j=(0,y.useCallback)(function(e){d&&!d.isDestroyed&&(e===nZ.q.SLIDE_VIEW?((0,cc.E0)(d.state.doc,r),(0,rU.U6)(d,!1),d.commands.spotlightCurrentCard()):(d.commands.turnOffSpotlight(!0),ch(d,t)),r(function(n){n((0,X.Qx)({attached:!1})),n((0,X.PM)({mode:e}))}))},[r,d,t]),v=(0,y.useCallback)(function(){try{var e,n,t,r;if(null!==(e=document.body)&&void 0!==e&&e.requestFullscreen){null===(t=document.body)||void 0===t||t.requestFullscreen();return}null!==(n=document.body)&&void 0!==n&&n.webkitRequestFullscreen&&(null===(r=document.body)||void 0===r||r.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),g=(0,y.useCallback)(function(){try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),b=(0,is.ye)("realUserMetrics"),C=(0,cs.wK)(b),O=C.recordExitSlideModePerformance,w=C.recordEnterSlideModePerformance,k=(0,y.useCallback)(function(e){var n=e.fullscreen,t=void 0!==n&&n;f.current!==nZ.q.SLIDE_VIEW&&(j(nZ.q.SLIDE_VIEW),t&&v(),null==m||m.trackDocEvent(nD.AA.PRESENT_MODE_ENTERED),w({isFullscreen:t}),setTimeout(function(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[j,w,v,f,m]),S=(0,y.useCallback)(function(){f.current!==nZ.q.DOC_VIEW&&(j(nZ.q.DOC_VIEW),o&&g(),null==m||m.trackDocEvent(nD.AA.PRESENT_MODE_EXITED),O({isFullscreen:o}))},[j,o,g,O,f,m]);return(0,y.useEffect)(function(){var e=function(){null!==document.fullscreenElement||a||S(),null!==document.webkitCurrentFullScreenElement||a||S(),s(function(e){return!e}),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[a,S,g]),(0,rE.r)(function(){d&&!d.isDestroyed&&u===nZ.q.DOC_VIEW&&requestAnimationFrame(function(){var e=d.state.selection;e instanceof ca.c&&d.commands.command(function(n){return n.tr.setSelection(e.createSelectionNear()),!0})})},[d,u]),(0,y.useEffect)(function(){return r_.F7.on("keydown","PRESENT_BLOCK",function(e){var n,t,r,i=f.current===nZ.q.SLIDE_VIEW;if(!x){if(cl(e)){if(null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!1}),!0}if(cf(e)){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!0}),!0}if(cu(e)&&i)return S(),!0;if(cd(e)&&i&&!h&&!p){if(null!=e&&null!==(r=e.target)&&void 0!==r&&r.closest("[data-gamma-child-tiptap-editor]"))return;return S(),!0}}})},[k,S,v,h,p,n,x]),{enterSlideView:k,exitSlideView:S,enterFullscreen:v,exitFullscreen:g,exitedFullscreenByClick:a,isFullscreen:o,setIsFullscreen:s,setExitedFullscreenByClick:l}},cx=function(e){var n=e.editorWrapperEl,t=e.scrollingParentSelector,r=(0,Q.CG)(X.gh),i=(0,is.ye)("presentFullScreen"),o=co()[r],s=o.shortcutIcon,c=o.shortcutKeys,a=o.buttonLabel,l=cp({editorWrapperEl:n,scrollingParentSelector:t}),d=l.enterSlideView,u=l.exitSlideView;return(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:s,fixedWidth:!0}),command:c,onClick:function(){r===nZ.q.SLIDE_VIEW?u():d({fullscreen:i})},children:a})},cm=t(50376),cj=t(47090);function cv(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function cg(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?cv(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cv(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var cb=function(e){var n,t,r=e.doc,i=e.editorWrapperEl,o=e.scrollingParentSelector,s=(0,nB.SE)().user,c=(0,w.$gs)().isConnected,a=(0,rp.e)(),l=(0,nK._i)().editor,d=(0,se.$)(null==r?void 0:r.title),u=(null==r?void 0:r.createdTime)&&(0,sz.Z)((0,sL.Z)(r.createdTime),"PPP"),h=null==r?void 0:r.id,p=(0,tk.M)({id:"snapshotsDrawer"}),j=p.isOpen,b=p.onClose,C=p.onOpen,O=(0,tk.M)({id:"analyticsPanelDisclosure"}),k=O.isOpen,S=O.onClose,E=O.onOpen,I=(0,w.LT4)(),D=(0,P.Z)(I,1)[0],A=(0,w.iX9)(),T=(0,P.Z)(A,1)[0],_=(0,nD.z$)(),R=(0,nB.py)("view",r)&&!!s,z=(0,nB.py)("edit",r),L=(0,nB.py)("manage",r)&&!!s,M=(0,is.ye)("pageSetup")&&z,N=!!(s&&0!==s.workspaceMemberships.length),G=(0,is.ye)("publishing"),Z=(0,is.ye)("docFormats"),F=(0,Q.CG)(X.hN),U=(0,y.useCallback)(function(){null==_||_.track(nD.AA.DOC_ANALYTICS_VIEWED,{docId:h,source:"toolbar_doc_menu",type:"personal"}),E()},[_,h,E]),W=(0,y.useCallback)(function(e){return function(){if(h){var n={id:h};e?D({variables:n,optimisticResponse:{archiveDoc:cg(cg({},n),{},{archived:e,__typename:"Doc"})}}):T({variables:n,optimisticResponse:{unarchiveDoc:cg(cg({},n),{},{archived:e,__typename:"Doc"})}})}}},[D,h,T]),H=(0,y.useCallback)(function(){l&&l.commands.undo()},[l]),B=(0,tk.M)({id:"codeEditor"}),V=B.isOpen,q=B.onOpen,K=B.onClose,Y=(0,is.ye)("docCustomCode")&&z;return(0,eh.jsxs)(r$.v,{children:[(0,eh.jsx)(r0.j,{as:o4.r,borderRadius:"md",isDisabled:j,icon:(0,eh.jsx)(v.G,{icon:so.cN}),onMouseDown:nc.br,"data-testid":"doc-toolbar-menu-button"}),(0,eh.jsx)(eP.h,{children:r&&(0,eh.jsxs)(r1.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[(0,eh.jsxs)(m.xu,{px:4,py:2,maxW:"300px",children:[(0,eh.jsx)(x.x,{noOfLines:6,children:d}),(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,eh.jsx)(f.cC,{id:"jlWdji",values:{createdTime:u}})}),(0,eh.jsx)(g.kH,{label:null==r?void 0:null===(n=r.createdBy)||void 0===n?void 0:n.email,children:(0,eh.jsx)(x.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,eh.jsx)(f.cC,{id:"t490IT",values:{0:null==r?void 0:null===(t=r.createdBy)||void 0===t?void 0:t.displayName}})})}),Z&&(0,eh.jsx)(ct,{})]}),(0,eh.jsx)(r5.R,{}),(0,eh.jsx)(sM.V,{label:(0,eh.jsx)(f.cC,{id:"IdcoRx"}),isConnected:c,maxWidth:"300px"}),c&&(0,eh.jsxs)(eh.Fragment,{children:[!!s&&!L&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:o2.M,fixedWidth:!0}),onClick:U,children:(0,eh.jsx)(f.cC,{id:"ZlwDi6"})}),G&&L&&(0,eh.jsx)(s8,{doc:r}),(0,eh.jsx)(cx,{editorWrapperEl:i,scrollingParentSelector:o}),N&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:iK.kZ,fixedWidth:!0}),onClick:function(){l&&a({docId:h,initialContent:l.getJSON(),source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,tW.Q5)()})},children:(0,eh.jsx)(f.cC,{id:"euc6Ns"})}),R&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:s_.kw,fixedWidth:!0}),onClick:function(){o3.T.emit("openSharePanel",{view:"export"})},children:(0,eh.jsx)(f.cC,{id:"U8WPSi"})}),M&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:sT.gr,fixedWidth:!0}),onClick:function(){o3.T.emit("openPageSetup","cards")},children:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(f.cC,{id:"Kx2GmY"}),(0,eh.jsx)(oX.L,{}),(0,eh.jsx)(sR.C,{colorScheme:"green",ml:2,children:(0,eh.jsx)(f.cC,{id:"isRobC"})})]})}),Y&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:sA.dT,fixedWidth:!0}),onClick:q,children:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(f.cC,{id:"cnlGIm"}),(0,eh.jsx)(oX.L,{}),(0,eh.jsx)(sR.C,{colorScheme:"green",ml:2,children:(0,eh.jsx)(f.cC,{id:"YBt9YP"})})]})}),F&&(0,eh.jsx)(r5.R,{}),F&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:sD.faArrowRotateLeft,fixedWidth:!0}),onClick:H,command:(0,g.cE)("Mod+Z"),children:(0,eh.jsx)(f.cC,{id:"9uI/rE"})}),z&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:sP.SZ,fixedWidth:!0}),onClick:C,children:(0,eh.jsx)(f.cC,{id:"6Z5x06"})}),L&&(0,eh.jsx)(r5.R,{}),L?r.archived?(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:sI.Ze,fixedWidth:!0}),onClick:W(!1),children:(0,eh.jsx)(f.cC,{id:"yKu/3Y"})}):(0,eh.jsx)(iX.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,eh.jsx)(v.G,{icon:eM.$,fixedWidth:!0}),onClick:W(!0),children:(0,eh.jsx)(f.cC,{id:"1C/Yjq"})}):null]})]})}),r&&(0,eh.jsx)(cm.Z,{doc:r,isOpen:j,onClose:b}),r&&k&&(0,eh.jsx)(o5.r,{doc:r,isAnalyticsPanelOpen:k,onAnalyticsPanelClose:S,mode:"personal"}),Y&&(0,eh.jsx)(s9.B,{editor:l,isOpen:V,onClose:K}),M&&(0,eh.jsx)(cj.T,{editor:l})]})},cC=t(22595),cy=t(26886),cO=t(71528),cw=t(26384),ck=t(26673),cS=t(91930),cE=t(7328),cI=t(84807),cP=t(28165),cD=t(12221),cA=t(97442),cT={followOnStart:"follow_on_start",followingId:"following_id"},c_=function(e,n){var t=n.followOnStart,r=n.followingId,i=new URL(e);return r&&i.searchParams.append(cT.followingId,r),t&&i.searchParams.append(cT.followOnStart,"true"),i.toString()},cR=function(e){switch(e){case"edit":return h.ag._({id:"UZN1cZ"});case"comment":return h.ag._({id:"jFTs0A"});case"view":return h.ag._({id:"Ya6CJ0"});default:return h.ag._({id:"Txd1qM"})}},cz=function(e){var n,t,r=e.isOpen,i=e.onClose,o=e.accessLinkUrl,s=e.onPlayClick,c=(0,nB.SE)().user,a=(0,sf.useRouter)().replace,d={followOnStart:!0,followingId:null==c?void 0:c.id},u=(0,y.useState)(d),p=u[0];u[1];var j=c_(o,p),b=(0,nB.SE)(),C=b.user,O=b.color,w=(0,Q.CG)(nY.yx),k=null==w?void 0:null===(n=w.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,S=(0,cP.keyframes)(l||(l=(0,cE.Z)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "])));return(0,eh.jsx)(g.Wk,{isDark:!1,children:(0,eh.jsxs)(o6.u_,{isOpen:r,onClose:i,size:"lg",children:[(0,eh.jsx)(n0.Z,{}),(0,eh.jsxs)(o8.h,{children:[(0,eh.jsx)(o9.x,{children:(0,eh.jsx)(f.cC,{id:"88XnIQ"})}),(0,eh.jsx)(n2.o,{}),(0,eh.jsx)(eu.i,{}),(0,eh.jsx)(n5.f,{pt:"6",children:(0,eh.jsxs)(ea.K,{spacing:"4",children:[(0,eh.jsx)(x.x,{children:(0,eh.jsx)(f.cC,{id:"oYTLJe",values:{0:cR(k),GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc},components:{0:(0,eh.jsx)(x.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,eh.jsx)(g.kH,{label:h.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,eh.jsx)(m.xu,{mb:"2",children:(0,eh.jsx)(cA.I,{url:j,variant:"solid"})}),(0,eh.jsxs)(sq.b,{children:[(0,eh.jsx)(sK.z,{}),(0,eh.jsxs)(es.U,{flexBasis:"100%",alignItems:"top",children:[(0,eh.jsx)(x.x,{fontSize:"sm",width:"100%",children:(0,eh.jsx)(f.cC,{id:"EApNIe"})}),(0,eh.jsxs)(m.xu,{position:"relative",textShadow:"sm",children:[(0,eh.jsx)(cD.q,{animation:"".concat(S," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(O.value),shadow:"lg"}),(0,eh.jsx)(m.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,eh.jsx)(v.G,{icon:cI.q,fixedWidth:!0})})]})]})]})]})}),(0,eh.jsx)(n3.m,{children:(0,eh.jsxs)(n4.h,{children:[(0,eh.jsx)(ef.z,{variant:"ghost",colorScheme:"gray",onClick:function(){i()},children:(0,eh.jsx)(f.cC,{id:"DPfwMq"})}),(0,eh.jsx)(ef.z,{variant:"solid",onClick:function(){i(),s(),a(j,j,{shallow:!0})},leftIcon:(0,eh.jsx)(v.G,{icon:ci.zc}),children:(0,eh.jsx)(f.cC,{id:"tbDuNX"})})]})})]})]})})},cL=function(e){var n,t,r,i,o=e.doc,s=e.isStaticEditor,c=e.editorWrapperEl,a=e.scrollingParentSelector,l=(0,tk.M)({id:"meetModal"}),d=l.onOpen,u=l.onClose,j=l.isOpen,b=cp({editorWrapperEl:c,scrollingParentSelector:a}),C=b.enterSlideView,O=b.exitSlideView,w=b.setExitedFullscreenByClick,k=b.isFullscreen,S=b.enterFullscreen,E=b.exitFullscreen,I=(0,nB.SE)().user,P=(0,Q.CG)(X.gh),D=(0,y.useRef)(P);(0,y.useEffect)(function(){D.current=P},[P]);var A=co()[P],T=A.shortcutLabel,_=A.shortcutIcon,R=A.shortcutKeys,z=A.buttonLabel,L=null==o?void 0:null===(n=o.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,M=!!(null==o?void 0:null===(r=o.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),N=(0,nB.py)("manage",o||void 0),G=(0,is.ye)("presentFullScreen"),Z="present"===(0,Q.CG)(X.e_).primaryAction?"solid":"plain";return(0,eh.jsxs)(p.k,{children:[(0,eh.jsxs)(n4.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":P===nZ.q.SLIDE_VIEW?"slide":"doc",children:[(0,eh.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:T,shortcut:R,children:(0,eh.jsx)(o4.h,{fontWeight:"normal",size:"sm",variant:Z,onClick:function(){P===nZ.q.SLIDE_VIEW?O():C({fullscreen:G})},onMouseDown:nc.br,icon:(0,eh.jsx)(v.G,{icon:_}),"data-present-button":!0,children:z})}),(0,eh.jsxs)(r$.v,{children:[(0,eh.jsx)(r0.j,{variant:Z,as:o4.r,icon:(0,eh.jsx)(v.G,{icon:ck.pt})}),(0,eh.jsx)(eP.h,{children:(0,eh.jsxs)(r1.q,{zIndex:"popover",children:[P===nZ.q.DOC_VIEW&&(0,eh.jsxs)(cS.k,{title:h.ag._({id:"9vUn+H"}),children:[(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:s$.Rk,fixedWidth:!0}),command:(0,g.cE)("Mod+Enter"),onClick:function(){return C({fullscreen:!1})},children:(0,eh.jsx)(f.cC,{id:"LRFe2O"})}),(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:cw.tc,fixedWidth:!0}),command:(0,g.cE)("Mod+Shift+Enter"),onClick:function(){return C({fullscreen:!0})},children:(0,eh.jsx)(f.cC,{id:"OwIqiD"})})]}),P===nZ.q.SLIDE_VIEW&&(0,eh.jsx)(iX.s,{icon:(0,eh.jsx)(v.G,{icon:cr.Bg,fixedWidth:!0}),command:"ESC",onClick:O,children:(0,eh.jsx)(f.cC,{id:"5Rfo7J"})}),!s&&I&&N&&(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(r5.R,{}),(0,eh.jsx)(g.kH,{isDisabled:M,label:(0,eh.jsx)(f.cC,{id:"zk6wKo"}),children:(0,eh.jsx)(m.xu,{children:(0,eh.jsx)(iX.s,{onClick:function(){var e;null!=o&&null!==(e=o.accessLinks)&&void 0!==e&&e[0].permission&&d()},isDisabled:!M,icon:(0,eh.jsx)(v.G,{icon:cO.AS,fixedWidth:!0}),children:(0,eh.jsx)(ea.K,{spacing:"0",children:(0,eh.jsx)(f.cC,{id:"z7gRub",components:{0:(0,eh.jsx)(x.x,{}),1:(0,eh.jsx)(x.x,{fontSize:"sm",color:"gray.600"})}})})})})})]}),!s&&I&&L&&(0,eh.jsx)(cz,{isOpen:j,onClose:u,accessLinkUrl:L,onPlayClick:function(){C({fullscreen:!1})}})]})})]})]}),P===nZ.q.SLIDE_VIEW&&(0,eh.jsx)(p.k,{ml:P===nZ.q.SLIDE_VIEW?2:0,children:(0,eh.jsx)(g.kH,{label:k?"Exit full screen":"Enter full screen",children:(0,eh.jsx)(o4.r,{"aria-label":k?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,eh.jsx)(v.G,{icon:k?cy.Qj:cC.TL}),onClick:k?function(){w(!0),E()}:S})})})]})},cM=t(46231),cN=t(38621),cG=function(e){var n=e.spotlightingByBlock,t=(0,nK._i)().editor,r=(0,y.useCallback)(function(){n?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock()},[t,n]);return(0,eh.jsx)(p.k,{children:(0,eh.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,eh.jsxs)(x.x,{whiteSpace:"nowrap",children:[n?"Turn off spotlight":"Turn on spotlight",(0,eh.jsx)(x.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,eh.jsx)(o4.h,{colorScheme:"trueblue",variant:n?"solid":"plain",onClick:function(e){r(),e.target.blur()},icon:(0,eh.jsx)(v.G,{icon:cN.QM}),children:"Spotlight"})})})},cZ=t(18504),cF=t(78050),cU=t(4685),cW=t(18066),cH=(0,y.memo)(function(e){var n=e.isOpen,t=e.onClose,r=e.openThemeEditor,i=e.setDocTheme,o=(0,Q.CG)(X.Pu);return(0,eh.jsx)(g.Wk,{isDark:!1,children:(0,eh.jsxs)(n$.d,{returnFocusOnClose:!1,isOpen:n,placement:"right",onClose:t,size:"sm",children:[(0,eh.jsx)(n0.Z,{background:"none"}),(0,eh.jsxs)(n1.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,eh.jsx)(n2.o,{}),(0,eh.jsx)(o9.x,{children:(0,eh.jsx)(f.cC,{id:"FEr96N"})}),(0,eh.jsx)(n5.f,{overflowX:"hidden",children:(0,eh.jsx)(cW.y,{currentTheme:o,setTheme:i,openThemeEditor:r,onClose:t})}),(0,eh.jsx)(n3.m,{children:(0,eh.jsx)(ef.z,{w:"100%",variant:"solid",onClick:t,children:(0,eh.jsx)(f.cC,{id:"DPfwMq"})})})]})]})})});cH.displayName="DocThemeDrawer";var cB=(0,y.memo)(function(){var e,n=(0,eF.p)(),t=(0,w.$gs)().isConnected,r=(0,nK._i)(),i=r.docId,o=r.getCollaborativeEditorInstance,s=(0,tk.M)({id:"themeEditor"}),c=s.isOpen,a=s.onOpen,l=s.onClose,d=(0,tk.M)({id:"themeStyleDrawer"}),u=d.isOpen,j=d.onOpen,b=d.onClose,C=null===(e=o())||void 0===e?void 0:e.state.doc.toJSON(),O=(0,Q.CG)(X.Pu),k=(0,cU.g)(),S=(0,P.Z)(k,2),E=S[0],I=S[1],D=(0,y.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?n?I({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:e}}):I({type:"SET_THEME_EDITING",data:{theme:e}}):I({type:"NEW_BLANK_THEME"}),a()},[I,a]),A=o();(0,eS.bb)(A,D);var T=(0,nD.z$)(),_=(0,eS.vi)({docId:i,editor:A}).updateDocThemeWithAccentImages,R=(0,y.useCallback)(function(e){e.id!==O.id&&_(e.id).then(function(){null==T||T.track(nD.AA.DOC_THEME_UPDATED,{doc_id:i,theme_id:e.id})}).catch(function(e){console.error(e),n({title:(0,eh.jsx)(f.cC,{id:"Fulf8b",values:{0:e.message}}),position:"top",status:"error"})})},[T,O.id,i,n,_]);return(0,y.useEffect)(function(){var e=o3.T.on("toggleThemeBlock",j),n=sQ.pw.on(sQ.TI.OPEN_THEME_DRAWER,j);return function(){e(),n()}},[j]),(0,eh.jsxs)(p.k,{children:[(0,eh.jsx)(g.kH,{label:t?(0,eh.jsx)(f.cC,{id:"JkEyR8"}):(0,eh.jsx)(f.cC,{id:"GvC+mL",components:{0:(0,eh.jsx)(x.x,{}),1:(0,eh.jsx)(x.x,{color:"gray.300"})}}),"aria-label":h.ag._({id:"JkEyR8"}),children:(0,eh.jsx)(m.xu,{children:(0,eh.jsx)(o4.h,{"data-guider-highlight":"toolbar-theme-button",onClick:j,isDisabled:!t,icon:(0,eh.jsx)(v.G,{icon:cZ.q2}),"data-testid":"toolbar-theme-button",children:(0,eh.jsx)(f.cC,{id:"FEr96N"})})})}),(0,eh.jsx)(cH,{isOpen:u&&!c,onClose:b,openThemeEditor:D,setDocTheme:R}),(0,eh.jsx)(cF.z,{isOpen:c,onClose:l,state:E,dispatch:I,docContent:C,onThemeCreated:R,disableDrawerTransition:!0})]})});cB.displayName="ThemeBlock";var cV=t(31997),cq=t(74588),cK=t(95472),cY=[.5,.8,.9,1,1.1,1.2,1.5,2],cQ=function(e){return"".concat((100*e).toFixed(0),"%")},cX=function(){var e=(0,is.ye)("presentZoom"),n=(0,nK._i)().editor,t=(0,nD.z$)(),r=(0,O.I0)(),i=(0,Q.CG)(X.SU),o=(0,y.useCallback)(function(e){r((0,X.Ic)({zoomLevel:e})),r((0,X.fT)({enabled:!1})),null==t||t.track(nD.AA.DOC_ZOOMED,{direction:"set",level:e})},[r,t]),s=(0,y.useCallback)(function(){r((0,X.fT)({enabled:!0}))},[r]),c=(0,y.useCallback)(function(){var e=Math.min(ic.v4,i+.1);r((0,X.Ic)({zoomLevel:e})),r((0,X.fT)({enabled:!1})),null==t||t.track(nD.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,t,i]),a=(0,y.useCallback)(function(){var e=Math.max(ic.Ou,i-.1);r((0,X.Ic)({zoomLevel:e})),r((0,X.fT)({enabled:!1})),null==t||t.track(nD.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,t,i]),l=(0,y.useCallback)(function(){var e=ic.aX;r((0,X.Ic)({zoomLevel:e})),r((0,X.fT)({enabled:!1})),null==t||t.track(nD.AA.DOC_ZOOMED,{direction:"reset",level:e})},[r,t]),d=(0,Q.CG)(rG.C),u=(0,rR.rJ)();return((0,y.useEffect)(function(){if(e)return r_.F7.on("keydown","PRESENT_BLOCK",function(e){return!(d||!n||(0,cK.KB)(n)||(0,nG.Hx)(e.target))&&((0,rT.ZP)("=")(e)?(c(),e.preventDefault(),!0):(0,rT.ZP)("-")(e)?(a(),e.preventDefault(),!0):(0,rT.ZP)("0")(e)?(l(),e.preventDefault(),!0):!!(0,rT.ZP)("9")(e)&&(s(),e.preventDefault(),!0))})},[d,e,n,c,a,l,s]),e)?(0,eh.jsxs)(n4.h,{spacing:"0",size:"sm",variant:"plain",isAttached:!0,children:[(0,eh.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:h.ag._({id:"FjkaiT"}),children:(0,eh.jsx)(R.h,{"aria-label":h.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:a,icon:(0,eh.jsx)(v.G,{icon:cV.Kl})})}),(0,eh.jsxs)(r$.v,{closeOnSelect:!0,children:[(0,eh.jsx)(g.kH,{label:h.ag._({id:"VZ3UQG"}),children:(0,eh.jsx)(r0.j,{minW:20,as:ef.z,variant:"plain",size:"sm",rightIcon:(0,eh.jsx)(v.G,{icon:cq.eW}),children:u?(0,eh.jsx)(f.cC,{id:"R9Khdg"}):cQ(i)})}),(0,eh.jsxs)(r1.q,{maxW:"220px",children:[(0,eh.jsx)(r3._,{value:u?"auto":i.toString(),type:"radio",children:(0,eh.jsx)(r4.i,{value:"auto",onClick:s,children:(0,eh.jsxs)(es.U,{children:[(0,eh.jsxs)(x.x,{children:[(0,eh.jsx)(f.cC,{id:"R9Khdg"})," ",(0,eh.jsx)(x.x,{as:"span",color:"gray.500",children:(0,eh.jsx)(f.cC,{id:"P9Cyl9"})})]}),(0,eh.jsx)(oX.L,{}),(0,eh.jsx)(x.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,eh.jsx)(r5.R,{}),(0,eh.jsx)(r3._,{value:u?"auto":i.toString(),type:"radio",children:cY.map(function(e){return(0,eh.jsx)(r4.i,{value:(e/100).toString(),onClick:function(){o(e)},children:(0,eh.jsxs)(es.U,{children:[(0,eh.jsx)(x.x,{children:cQ(e)}),(0,eh.jsx)(oX.L,{}),e===ic.aX&&(0,eh.jsx)(x.x,{as:"span",opacity:"0.6",children:"0"})]})},e)})})]})]}),(0,eh.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:h.ag._({id:"AWOSPo"}),children:(0,eh.jsx)(R.h,{fontWeight:"normal","aria-label":h.ag._({id:"AWOSPo"}),onClick:c,icon:(0,eh.jsx)(v.G,{icon:t_.r8})})})]}):null};(0,eX.E)(m.xu);var cJ=(0,y.memo)(function(e){var n,r,i=e.scrollingParentSelector,o=e.toggleCommentsPanel,s=e.isCommentsPanelOpen,c=e.editorWrapperEl,a=e.docEditorType,l=(0,oQ.a)(["(max-width: 840px)","(min-width: 841px)"]),u=(0,P.Z)(l,1)[0],f=(0,ov.i)({base:!0,lg:!1}),h=(0,tH.LQ)(window.location.href),x=(0,Q.CG)(X.gh),m=(0,Q.CG)(nY.yx),j=(0,nK._i)().editor,v=(0,nB.py)("comment",m),g=(0,rF.g)(j).enabled;(0,Q.CG)(X.WI),(0,Q.CG)(X.yn);var b="SLIDE_VIEW"!==x,C=(0,Q.CG)(X.hN),O=a!==nq.Z.COLLABORATIVE,w=a===nq.Z.PUBLIC_STATIC,k=(0,Q.CG)(X.Tf),S=(0,is.ye)("aiChat");(0,is.ye)("pptExport")&&(window.exportToPptx=(n=(0,nQ.Z)(nJ().mark(function e(n){var r;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([t.e(9775),t.e(5743),t.e(3496)]).then(t.bind(t,13448));case 4:return r=e.sent.exportToPptx,e.abrupt("return",r(j,n));case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}));var E=Y((0,y.useCallback)(function(e){var n=I.current;return!!n&&(!!(n.querySelector("[data-active]")||n.querySelector('[aria-expanded="true"]'))||e.clientY<100)},[]),!k),I=(0,y.useRef)(null),D=!k||k&&E,A=!!(null==m?void 0:m.publishedSnapshotId),T=!(0,tW.s2)()&&!u&&!h;return(0,eh.jsxs)(p.k,{"data-editor-toolbar":!0,ref:I,bg:"linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.1) 100%)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"center",pr:6,marginTop:D?0:"-100%",pointerEvents:"none",sx:(r={},(0,d.Z)(r,"&:focus-within",{marginTop:0}),(0,d.Z)(r,"> *",{pointerEvents:"auto"}),(0,d.Z)(r,"> #toolbar-spacer",{pointerEvents:"none"}),r),transitionProperty:"margin-top",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,eh.jsx)(sE.a,{}),!w&&(0,eh.jsx)(es.U,{children:(0,eh.jsx)(sv,{doc:m})}),(0,eh.jsx)(oX.L,{pointerEvents:"none",id:"toolbar-spacer"}),(0,eh.jsxs)(es.U,{children:[!u&&(0,eh.jsx)(sw.D,{}),!u&&!b&&(0,eh.jsx)(cX,{}),!u&&!b&&(0,eh.jsx)(eh.Fragment,{children:(0,eh.jsx)(cG,{spotlightingByBlock:g})}),!u&&!O&&C&&(0,eh.jsx)(cB,{}),!u&&!O&&(0,eh.jsx)(cM.S,{doc:m}),T&&!A&&(0,eh.jsx)(cL,{doc:m,isStaticEditor:O,editorWrapperEl:c,scrollingParentSelector:i}),T&&A&&(0,eh.jsx)(o1,{doc:m}),!O&&v&&(0,eh.jsx)(sk.U,{doc:m,mode:x,isCommentsPanelOpen:s,toggleCommentsPanel:o}),!u&&f&&!O&&C&&S&&(0,eh.jsx)(sS.u,{}),!u&&!O&&(0,eh.jsx)(st,{doc:m}),!u&&!O&&(0,eh.jsx)(cb,{doc:m,editorWrapperEl:c,scrollingParentSelector:i}),!w&&(0,eh.jsx)(p.k,{children:(0,eh.jsx)(n9.DY,{showRing:!0})})]})]})}),c$=t(34684),c0=t(18751),c1=t(95993),c2=t(98013),c5=t(27483),c3=t(81891),c4=t(2702),c6=t(27809),c8=t(84991),c9=t(76451),c7=function(e){(0,Z.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,U.Z)(r);if(n){var i=(0,U.Z)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,F.Z)(this,e)});function r(e){var n;return(0,M.Z)(this,r),t.call(this,{transform:(n=(0,nQ.Z)(nJ().mark(function n(t,r){var i,o,s,c;return nJ().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!("data"!==t.event)){n.next=3;break}return r.enqueue(t),n.abrupt("return");case 3:s=(o=t.data.content).attrs.id,(c=o.content.find(function(e){return"cardAccentLayoutItem"===e.type}))&&(!c.attrs.background||(null===(i=c.attrs.background)||void 0===i?void 0:i.type)===c9.E.NONE)&&(c.attrs.background=(0,c8.Bv)(e,s),(0,c8.Tm)(o)),r.enqueue(t);case 8:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)})})}return(0,N.Z)(r)}(c1.GJ),ae=t(21365),an=t(60081),at=t(80591),ar=t(4038),ai=t(43862);function ao(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function as(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ao(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ao(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ac=(i=(0,nQ.Z)(nJ().mark(function e(n){var t,r,i,o,s,c,a;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.editor,r=n.chain,i=n.node,o=n.imageAttrs,s=n.pos,r.updateAttributesAtPos(s,(0,at.j6)(i,{uploadStatus:ai.D.Uploading})),c=o.tempUrl,a=o.src,(0,ar.WY)(a,t.storage.mediaUpload.orgId,{onUploadComplete:function(e){(0,at.Ns)(t,c,e)},onUploadFailed:function(e){(0,at.f8)(t,c,e,!0)}});case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),aa=(o=(0,nQ.Z)(nJ().mark(function e(n){var t,r,i,o,s,c;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.cardId,r=n.editor,console.debug("[AIStream uploadAIImages] for cardId: ",t),i=r.chain(),o=(0,nL.N2)(r.state.doc,function(e){return(0,nN.KH)(e)&&e.attrs.id===t})[0]){e.next=7;break}return console.error("[uploadAIImages] can not find card with id: ",t),e.abrupt("return");case 7:c=(s=o.pos)+o.node.nodeSize,r.state.doc.descendants(function(e,n){if(n<s||n>c)return!0;var t=(0,at.XU)(e);return!t||(t&&t.uploadStatus===ai.D.Queued&&(console.debug("[AIStream processAIImages]: ".concat(e.type.name," node with AI queries at pos ").concat(n,":"),t),ac({editor:r,chain:i,node:e,imageAttrs:t,pos:n})),!0)}),i.run();case 11:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),al=(s=(0,nQ.Z)(nJ().mark(function e(n){var t,r,i,o,s;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.lastCompletedCardId,r=n.editor,i=n.theme,t){e.next=3;break}return e.abrupt("return");case 3:if(console.debug("[AIStream refetchLazyImages] for cardId: ",t),o=(0,nL.N2)(r.state.doc,function(e){return(0,nN.KH)(e)&&e.attrs.id===t})[0]){e.next=8;break}return console.error("[refetchLazyImages] can not find card with id: ",t),e.abrupt("return");case 8:s=o.pos+o.node.nodeSize,r.state.doc.descendants(function(e,n){if(n<0||n>s)return!0;var t=(0,at.XU)(e);if(t&&"queued"===t.loadImageStatus&&t.loadImageId&&t.loadImageParams){var o=t.loadImageId,c=t.loadImageParams;return(0,an.B)({loadImageId:o,loadImageParams:c,context:{docId:r.gammaDocId,workspaceId:r.gammaOrgId}}).then(function(n){ad({editor:r,newAttrs:n,loadImageId:o,node:e,theme:i})}),!0}});case 11:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),ad=(c=(0,nQ.Z)(nJ().mark(function e(n){var t,r,i,o,s,c,a,l;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.editor,r=n.loadImageId,i=n.newAttrs,o=n.node,s=n.theme,c=n.cardId,a=(0,nL.N2)(t.state.doc,function(e){var n=(0,at.XU)(e);return!!n&&n.loadImageId===r})[0]){e.next=5;break}return console.error("[AIStream] could not find image in editor with loadImageId=".concat(r,"}")),e.abrupt("return");case 5:l="cardAccentLayoutItem"===o.type.name&&"error"===i.loadImageStatus?as(as({},a.node.attrs),{},{background:(0,c8.Bv)(s,c)}):(0,at.j6)(a.node,i),t.commands.updateAttributesAtPos(a.pos,l);case 7:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)});function au(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function af(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?au(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):au(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ah=function(e){(0,Z.Z)(i,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,U.Z)(i);if(n){var r=(0,U.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,F.Z)(this,e)});function i(e){var n,t,o=e.editor,s=e.theme;(0,M.Z)(this,i);var c=(n=(0,nQ.Z)(nJ().mark(function e(n,r){var i,c,a;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("data"!==n.event)){e.next=3;break}return r.enqueue(n),e.abrupt("return");case 3:c=(i=n.data).index,a=i.id,t.streamingCardIndex=c,(0,ae.N)(n.data.content,function(e){if("text"!==e.type){var n,r=n8.NB.fromJSON(o.schema,{type:e.type,attrs:e.attrs}),i=(0,at.XU)(r);if(i&&"queued"===i.loadImageStatus&&i.loadImageId&&i.loadImageParams){var l=i.loadImageId,d=i.loadImageParams;t.imageAttrs[l]||(t.imageAttrs[l]=r.attrs),t.loadImagePromises[l]||(t.loadImagePromises[l]=t.loadImage({editor:o,loadImageId:l,loadImageParams:d,cardIndex:c,cardId:a,theme:s,node:r})),e.attrs=null!==(n=t.loadedImageAttrs[l])&&void 0!==n?n:t.imageAttrs[l]}}}),n.data.cardComplete&&t.streamingCardIndex++,r.enqueue(n);case 8:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});return t=r.call(this,{transform:c}),(0,d.Z)((0,G.Z)(t),"streamingCardIndex",0),(0,d.Z)((0,G.Z)(t),"imageAttrs",{}),(0,d.Z)((0,G.Z)(t),"loadedImageAttrs",{}),(0,d.Z)((0,G.Z)(t),"loadImagePromises",{}),t}return(0,N.Z)(i,[{key:"loadImage",value:(t=(0,nQ.Z)(nJ().mark(function e(n){var t,r,i,o,s,c,a,l;return nJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.editor,r=n.loadImageId,i=n.loadImageParams,o=n.cardIndex,s=n.cardId,c=n.node,a=n.theme,e.next=3,(0,an.B)({loadImageId:r,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId}});case 3:if(l=e.sent,this.streamingCardIndex!==o){e.next=8;break}return this.loadedImageAttrs[r]=(0,at.j6)(c,l),"cardAccentLayoutItem"===c.type.name&&"error"===l.loadImageStatus&&(this.loadedImageAttrs[r]=af(af({},c.attrs),{},{background:(0,c8.Bv)(a,s)})),e.abrupt("return");case 8:requestAnimationFrame(function(){ad({editor:t,loadImageId:r,newAttrs:l,node:c,theme:a,cardId:s})});case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),i}(c1.GJ),ap=t(91760),ax=nJ().mark(aC);function am(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return aj(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aj(e,n)}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw o}}}}function aj(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function av(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ag(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?av(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):av(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ab=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===n.length)throw Error("Cannot have empty path");for(var i=(0,ij.Z)(n),o=ag({},e),s=o,c=0;n.length>0;){if(!s.content)throw Error("Can't surround a node with children");var a=i.shift();if(0===i.length){var l=s.content.slice(0,a);l.push(t),s.content=l;break}if(c<r){var d=s.content.slice(0);d.splice(a,1,ag({},d[a])),s.content=d,s=s.content[a]}else{var u=s.content.slice(0,a+1);u.splice(a,1,ag({},u[a])),s.content=u,s=s.content[a]}c++}return o};function aC(e){var n,t,r,i,o,s,c,a,l,d,u,f,h,p,x=arguments;return nJ().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:0,t=x.length>2&&void 0!==x[2]?x[2]:e,r=x.length>3&&void 0!==x[3]?x[3]:[],"text"!==e.type){m.next=14;break}i=e.text.split(" "),o=0;case 6:if(!(o<i.length)){m.next=13;break}return s={type:"text",text:i.slice(0,o+1).join(" ")},m.next=10,ab(t,r,s,n);case 10:o++,m.next=6;break;case 13:case 17:return m.abrupt("return");case 14:if(e.content){m.next=18;break}return m.next=17,ab(t,r,e,n);case 18:c=0,a=am(e.content),m.prev=20,a.s();case 22:if((l=a.n()).done){m.next=45;break}d=l.value,u=[].concat((0,ij.Z)(r),[c]),f=am(aC(d,n,t,u)),m.prev=26,f.s();case 28:if((h=f.n()).done){m.next=34;break}return p=h.value,m.next=32,p;case 32:m.next=28;break;case 34:m.next=39;break;case 36:m.prev=36,m.t0=m.catch(26),f.e(m.t0);case 39:return m.prev=39,f.f(),m.finish(39);case 42:c++;case 43:m.next=22;break;case 45:m.next=50;break;case 47:m.prev=47,m.t1=m.catch(20),a.e(m.t1);case 50:return m.prev=50,a.f(),m.finish(50);case 53:case"end":return m.stop()}},ax,null,[[20,47,50,53],[26,36,39,42]])}function ay(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aO(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ay(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ay(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function aw(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ak=function(e){(0,Z.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,U.Z)(r);if(n){var i=(0,U.Z)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,F.Z)(this,e)});function r(e){(0,M.Z)(this,r);var n,i,o=(n=(0,nQ.Z)(nJ().mark(function n(t,r){var i,o,s,c,a,l;return nJ().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!("done"===t.event||"cancel"===t.event)){n.next=3;break}return r.enqueue(t),n.abrupt("return");case 3:i=(0,Q.bh)(),o=null,s=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return aw(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aw(e,n)}}(e))){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw o}}}}(aC(t.data.content,1)),n.prev=6,s.s();case 8:if((c=s.n()).done){n.next=19;break}if(a=c.value){n.next=12;break}return n.abrupt("continue",17);case 12:return o&&r.enqueue(o),o={id:t.id,event:"data",data:aO(aO({},t.data),{},{content:a,cardComplete:!1})},l=(0,tG.qn)(e)(i.getState()),n.next=17,aS(l);case 17:n.next=8;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(6),s.e(n.t0);case 24:return n.prev=24,s.f(),n.finish(24);case 27:o&&r.enqueue(aO(aO({},o),{},{data:aO(aO({},o.data),{},{cardComplete:!0})}));case 28:case"end":return n.stop()}},n,null,[[6,21,24,27]])})),function(e,t){return n.apply(this,arguments)});return i=t.call(this,{transform:o}),(0,d.Z)((0,G.Z)(i),"index",0),(0,d.Z)((0,G.Z)(i),"startTime",performance.now()),i}return(0,N.Z)(r)}(c1.GJ),aS=function(e){return new Promise(function(n){return ap.iK(n,e)})},aE=t(54113),aI=t(51663),aP=t(73593),aD=t(51180),aA=t(34768),aT=["latency"];function a_(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aR(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a_(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var az="[CONTENT_FILTER]",aL=function(){return(0,eh.jsxs)(sq.b,{status:"error",variant:"solid",children:[(0,eh.jsx)(sK.z,{}),(0,eh.jsx)(c0.X,{children:(0,eh.jsxs)(ea.K,{children:[(0,eh.jsx)("strong",{children:(0,eh.jsx)(f.cC,{id:"7g5s/N"})}),(0,eh.jsx)(x.x,{children:(0,eh.jsx)(f.cC,{id:"Xp43Ei"})})]})})]})},aM=function(e){var n=e.editor,t=e.content,r=e.cardId,i=e.cardIndex,o=e.cardComplete,s=(0,nL.N2)(n.state.doc,function(e){return(0,oO.KH)(e)})[0],c=(0,nL.N2)(n.state.doc,function(e){return(0,oO.KH)(e)&&e.attrs.id===r})[0];if(!s)throw Error("Doc does not have a first card");var a=c?{from:c.pos,to:c.pos+c.node.nodeSize}:0===i?{from:s.pos,to:s.pos+s.node.nodeSize}:n.state.doc.nodeSize-3;try{if(n.commands.insertContentAt(a,t,{updateSelection:0===i}),o&&0===i){var l=(0,i6.t)(n.state.doc.resolve(s.pos));l&&n.commands.command(function(e){return e.tr.setSelection(l),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},aN=function(e){var n=e.docId,t=e.store,r=e.generateInfo,i=e.editor,o=e.lazyImages;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(n,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}c3.a.trackRequestSent(t,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});var s=(0,c5.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}).stream;return(0,c2.Nl)({stream:s,docId:n,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:{lazyImages:o,imageOptions:r.imageOptions,docFormatKey:(0,aP.hx)((0,aP.VA)(i)).key},store:t})},aG=function(e,n){var t,r=(0,Q.CG)(X.Pu),i=(0,Q.qr)(),o=(0,Q.TL)(),s=(0,Q.CG)(X.KV),c=(0,is.ye)("streamResumingEnabled"),a=(0,is.ye)("generatorLazyImages"),l=(0,y.useRef)(!1),d=aZ({docId:e}),u=d.isStreaming,f=d.onStreamData,h=d.onStreamDone,p=d.onStreamError,x=d.onStreamStart,m=d.onAbortStream,j=aU(u),v=(0,y.useCallback)((t=(0,nQ.Z)(nJ().mark(function t(o){var s,c,a;return nJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:x({editor:n}),c=aF({streamResponse:o,editor:n,store:i,theme:r,docId:e}).getReader(),t.prev=5;case 6:return t.next=8,c.read();case 8:if((s=t.sent).done){t.next=18;break}if(s.value){t.next=11;break}return t.abrupt("continue",6);case 11:if(!l.current){t.next=14;break}return console.log("[AIStream] has aborted -- no longer reading stream"),t.abrupt("break",18);case 14:"data"===(a=s.value).event&&(f({value:a.data,editor:n,streamResponse:o}),j()),t.next=6;break;case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(5),p({err:t.t0,streamResponse:o,editor:n}),t.abrupt("return");case 24:if(!l.current){t.next=26;break}return t.abrupt("return");case 26:a&&"done"!==a.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:a}),h({editor:n,streamResponse:o});case 28:case"end":return t.stop()}},t,null,[[5,20]])})),function(e){return t.apply(this,arguments)}),[e,n,f,h,p,x,j,i,r]);(0,aA.v)(function(){if(n&&s&&!u){var t=(0,tG.oH)(e)(i.getState()),r=(0,tG.nl)(i.getState());if(t){"running"===t.status&&v(t);return}if(c&&!r){var o=(0,aP.VA)(n),l=o.generateInfo;if("streaming"!==o.generateStatus){if(new URLSearchParams(window.location.search).get("restream")){var d=aN({docId:e,generateInfo:aR(aR({},{interactionId:l.interactionId,streamId:l.streamId}),{},{lastEventId:"0",lastCompletedCardId:null,imageOptions:l.imageOptions||{provider:"aiGenerated"},lastCompletedCardIndex:null}),editor:n,store:i,lazyImages:a});d&&v(d)}return}var f=(0,X.yx)(i.getState());if((null==f?void 0:f.createdTime)&&Date.now()-new Date(f.createdTime).getTime()>36e5){n.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}var h=aN({docId:e,generateInfo:l,editor:n,store:i,lazyImages:a});h&&v(h)}}},[e,n,i,s,x,p,f,h,c,v,u,a],[n,s]),(0,y.useEffect)(function(){return function(){var t=(0,tG.oH)(e)(i.getState());n&&t&&"running"===t.status&&(l.current=!0,m({editor:n,streamResponse:t}))}},[o,e,m,n,i])},aZ=function(e){var n=e.docId,t=(0,eF.p)(),r=(0,Q.TL)(),i=(0,Q.qr)(),o=(0,is.ye)("aiWizardUploadImages"),s=(0,y.useState)(!1),c=s[0],a=s[1],l=(0,is.ye)("debugLogging"),d=(0,y.useRef)(null);(0,y.useEffect)(function(){return function(){d.current&&(t.close(d.current),d.current=null)}},[t]);var u=(0,y.useCallback)(function(){d.current||(d.current=t({id:"ai-generating-toast",isClosable:!1,render:function(){return(0,eh.jsxs)(sq.b,{variant:"light",children:[(0,eh.jsx)(tm.$,{size:"sm",mr:2}),(0,eh.jsxs)(c0.X,{children:[(0,eh.jsx)("strong",{children:(0,eh.jsx)(f.cC,{id:"n2cF1o"})})," ",(0,eh.jsx)(f.cC,{id:"BFGwQA"})]})]})},position:"top",duration:null}))},[t]),h=(0,y.useCallback)(function(e){var n=e.editor;n&&(a(!0),n.commands.setAIGenerationRunning(!0),u())},[u]),p=(0,y.useCallback)(function(e){var n=e.editor,t=e.value;if(e.streamResponse&&n){var r=t.id,i=t.cardComplete,s=t.index;aM({editor:n,content:t.content,cardId:r,cardIndex:s,cardComplete:i}),i&&o&&aa({editor:n,cardId:r})}},[o]),x=(0,y.useCallback)(function(e){var n,o,s=e.editor,c=e.streamResponse;if(s&&c){var u=c.id,h=(0,aP.hx)((0,aP.VA)(s)),p=(0,aP.VA)(s).generateInfo;a(!1),s.commands.setAIGenerationRunning(!1),s.commands.updateAttributesAtPos(0,{generateStatus:"done"});var x=(0,c6.NV)(),m=x.debugInfo();l&&console.log("[AIStream] ImageStore DEBUG",{imageStore:x,debug:m}),(0,c6.Uu)(),r((0,tG.G0)({id:u,status:"complete"}));var j=(0,aD.R)(s),v=new TextEncoder().encode(JSON.stringify(s.state.doc.toJSON())),g=j?j/v.byteLength:void 0;c3.a.trackStreamComplete(i,u,{imageProvider:null===(n=p.imageOptions)||void 0===n?void 0:n.provider,numImageSearches:m.requests.length,imageSearches:m.requests,ydocToJsonRatio:g});var b=(0,X.yx)(i.getState());b&&null!==(o=b.docGenerateInput)&&void 0!==o&&o.id?(0,aE.d)("generateV2"):(0,aE.d)("wizardCreation"),d.current&&t.update(d.current,{title:(0,eh.jsx)(f.cC,{id:"2/LpWt",values:{0:h.generationLabel||h.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})}},[r,l,i,t]);return{isStreaming:c,onStreamStart:h,onStreamData:p,onStreamError:(0,y.useCallback)(function(e){var o=e.err,s=e.editor,c=e.streamResponse,u=c.id,h=(0,c4.uS)(o),p=h.errorMessage,x=h.errorCode;console.error("StreamError: ",{interactionId:u,errorMessage:p,errorCode:x,stack:o.stack}),l&&console.log("StreamError: (".concat(x,") - ").concat(p),o.stack),a(!1),s.commands.setAIGenerationRunning(!1),s.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,c6.Uu)(),r((0,tG.G0)({id:u,status:"error"}));var m=(0,tG.Sn)(u)(i.getState());if(m){var j=m.latency,v=(0,eA.Z)(m,aT);(0,t0.pQ)(aR(aR({},v),{},{errorName:"StreamError",errorMessage:p,errorCode:x,outputMessage:"",latency:j||performance.now()-v.startTime,isResuming:c.isResuming,docId:n}))}d.current&&(p===az?t.update(d.current,{render:aL,position:"top",duration:null,isClosable:!0}):t.update(d.current,{title:(0,eh.jsx)(f.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[r,n,l,i,t]),onStreamDone:x,onAbortStream:(0,y.useCallback)(function(e){var n=e.editor,t=e.streamResponse.id;a(!1),n.commands.setAIGenerationRunning(!1),c3.a.trackStreamAbort(i,{interactionId:t,abortReason:"leave-editor"}),r((0,tG.Of)({id:t}))},[r,i])}},aF=function(e){var n=e.streamResponse,t=e.editor,r=e.store,i=e.docId,o=e.theme,s=n.id,c=n.stream,a=!0;return c.pipeThrough(new c7(o)).pipeThrough(new ak(n.id)).pipeThrough(new ah({editor:t,theme:o})).pipeThrough(new c1.GJ({transform:function(e,n){if("done"===e.event&&"content_filter"===e.finishReason){n.error(Error(az));return}n.enqueue(e)}})).pipeThrough((0,c2.c1)(function(e){a&&"data"===e.event&&(c3.a.trackStreamStart(r,{interactionId:s,docId:i}),n.isResuming&&(t.commands.deleteCardsAfter(n.lastCompletedCardId||null),n.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",n.lastCompletedCardId),al({editor:t,lastCompletedCardId:n.lastCompletedCardId,theme:o}))),a=!1),"data"===e.event&&e.data.cardComplete&&t.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},aU=function(e){var n=(0,aI.As)("editor"),t=(0,y.useRef)(!0);(0,y.useEffect)(function(){if(e){var r=n.scroller;if(r){var i=function(){n.isAtBottom(40)?t.current=!0:t.current=!1},o=function(){t.current=!1};return r.addEventListener("wheel",i,{passive:!0}),r.addEventListener("touchend",i,{passive:!0}),r.addEventListener("touchstart",o,{passive:!0}),r.addEventListener("touchmove",o,{passive:!0}),function(){r.removeEventListener("wheel",i),r.removeEventListener("touchend",i),r.removeEventListener("touchstart",o),r.removeEventListener("touchmove",o)}}}},[n,e]);var r=(0,y.useCallback)(function(){if(t.current){var e;null===(e=n.scroller)||void 0===e||e.scrollTo({top:n.scroller.scrollHeight,behavior:"auto"})}},[n]);return(0,oS.Z_)(r,100)},aW=t(14198),aH=function(e){var n=e.toggleToCPanel,t=e.initializeToCPanel,r=e.isToCPanelOpen,i=(0,aW.F)().breakpoints.xl,o=(0,Q.CG)(X.gh),s=(0,y.useState)(o!==nZ.q.SLIDE_VIEW),c=s[0],a=s[1],l=(0,y.useState)(!1),d=l[0];l[1];var u=(0,O.I0)();(0,tc.vm)(function(){t()},[i,n,t,u],[]),(0,tc.vm)(function(){o===nZ.q.SLIDE_VIEW?(a(r),n({disableTransition:!1,override:"closed"})):d&&o===nZ.q.DOC_VIEW&&n({disableTransition:!1,override:c?"open":"closed"})},[n,r,c,o,d],[o])};function aB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aV(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aB(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aq="doc_archived_warning",aK=function(e,n){var t=(0,eF.p)(),r=(0,w.iX9)(),i=(0,P.Z)(r,1)[0];(0,y.useEffect)(function(){return function(){t.close(aq)}},[]),(0,y.useEffect)(function(){e&&n===nq.Z.COLLABORATIVE&&(e.archived&&!t.isActive(aq)?t({id:aq,title:(0,eh.jsxs)(x.x,{"data-testid":"trash-confirmation-toast",children:[(0,eh.jsx)(f.cC,{id:"fkHPZu"})," ",(0,eh.jsx)(eU.r,{textDecoration:"underline",onClick:function(){var n={id:e.id};i({variables:n,optimisticResponse:{unarchiveDoc:aV(aV({},n),{},{archived:!0,__typename:"Doc"})}})},children:(0,eh.jsx)(f.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null}):!e.archived&&t.isActive(aq)&&t.close(aq))},[e,n,t,i])},aY=function(){var e=(0,is.ye)("filmstrip"),n=(0,Q.CG)(nY.fh),t=(0,iI.Br)("comment"),r=(0,Q.CG)(X.gh);return e&&n===nq.Z.COLLABORATIVE&&t&&r===nZ.q.DOC_VIEW&&!(0,tW.s2)()},aQ=t(20372),aX=t(27910),aJ=t(80102),a$=t(50350),a0=function(){var e=(0,eC.nO)(),n=(0,eC.UV)(),t=(0,ov.i)({base:!1,lg:!0,"2xl":!1}),r=(0,Q.CG)(X.Hl),i=(0,Q.CG)(iN.GX),o=aY(),s=(0,aX.k)(),c=(0,aQ.S)((0,d.Z)({base:"0px"},aJ.K0,a$.bk))||"0px",a=og().width;return(0,y.useMemo)(function(){return{"--doc-padding-left":i&&o&&t?"".concat(a,"px"):"0px","--doc-padding-right":r?c:s?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(n,"px"),"--comment-slide-margin":c}},[a,i,e,r,n,s,t,c,o])},a1=t(28615),a2=t(93665),a5=t(85422),a3=t(95896),a4=function(e){var n=e.onClose;return(0,eh.jsxs)(p.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,eh.jsx)(t4.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,eh.jsx)(v.G,{icon:a2.xH,size:"2x"}),(0,eh.jsxs)(p.k,{direction:"column",ml:3,children:[(0,eh.jsx)(m.xu,{children:(0,eh.jsx)(x.x,{lineHeight:6,fontSize:"sm",children:(0,eh.jsx)(f.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc},components:{0:(0,eh.jsx)("b",{})}})})}),(0,eh.jsx)(x.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,eh.jsx)(f.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc},components:{0:(0,eh.jsx)(ef.z,{as:eU.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:function(){(0,a5.pU)()},colorScheme:"white"})}})})]})]})},a6="no-snapshot-warning",a8=function(e,n){var t=(0,eF.p)(),r=(0,a3.z$)(),i=null==e?void 0:e.id,o=n===nq.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,y.useEffect)(function(){!o||t.isActive(a6)||(t({id:a6,render:a4,duration:null,position:"top",isClosable:!0}),null==r||r.track(nD.xW.NO_CURRENT_SNAPSHOT,{docId:i}))},[r,i,o,t])},a9=function(e){var n=(0,Q.TL)(),t=(0,Q.CG)(iN.GX),r=(0,y.useRef)(!1);(0,y.useEffect)(function(){!e||r.current||t||(r.current=!0,n((0,iN.dQ)({isOpen:!0})))},[n,t,e])},a7=t(56675),le=t(65185);function ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function lt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ln(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var lr=function(e){var n=(0,a7.x)(),t=(0,Q.CG)(le.cn);(0,y.useEffect)(function(){t&&n.cache.updateQuery({query:sN.yE1,variables:{id:e}},function(e){if(!(null!=e&&e.doc))return e;var n=e.doc;return n.titleEdited?e:{doc:lt(lt({},n),{},{title:t})}})},[t,n,e])},li=t(47947),lo=t(46732),ls=function(e,n){var t=(0,lo._)().isUnauthorized;(0,nD.If)(function(r){!0!==t&&void 0!==t&&(r.track(nD.AA.DOC_VIEWED,{doc_id:e}),n===nq.Z.EXAMPLE_STATIC&&r.track(nD.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,n,t]),(0,li.d)();var r=(0,is.ye)("realUserMetrics"),i=n===nq.Z.COLLABORATIVE&&r,o=(0,is.ye)("rumKeystrokeSampleRate");(0,cs.lh)(i,o)},lc=function(e){var n=(0,O.I0)(),t=(0,nD.z$)();(0,y.useEffect)(function(){var r,i=function(){var i=(0,Q.bh)().getState();r=(0,X.Q5)(i),(0,cc.I7)(e),n((0,X.lx)({isEditingDisabled:!0})),null==t||t.trackDocEvent(nD.AA.DOC_PRINTED)},o=function(){n((0,X.lx)({isEditingDisabled:!1})),n((0,X.xn)({expandedCardsMap:r}))};return window.addEventListener("beforeprint",i),window.addEventListener("afterprint",o),function(){window.removeEventListener("beforeprint",i),window.removeEventListener("afterprint",o)}},[n,e,t])};function la(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ll(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?la(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):la(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ld="doc-root",lu=function(e){var n=e.isConnected;return(0,eh.jsx)(p.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:n?(0,eh.jsx)(f.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}):(0,eh.jsxs)(p.k,{m:8,alignItems:"center",direction:"row",children:[(0,eh.jsx)(v.G,{icon:u.bK,size:"4x"}),(0,eh.jsx)(x.x,{ml:8,children:(0,eh.jsx)(f.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc},components:{0:(0,eh.jsx)("strong",{})}})})]})})},lf=function(e){var n=e.doc,t=e.user,r=e.docEditorType,i=(0,k.$m)(n,t),o=(0,O.v9)(X.gh),s=r===nq.Z.COLLABORATIVE&&!i,c=s&&o===nZ.q.SLIDE_VIEW;return r!==nq.Z.COLLABORATIVE||t?c?(0,eh.jsx)(ev,{}):s?(0,eh.jsx)(I.C,{showTourReplay:!0}):null:(0,eh.jsx)(rg.m,{docWorkspace:null==n?void 0:n.organization})},lh=(0,nK.eT)(function(e){var n=e.docEditorType,t=(0,nK._i)(),r=t.docId,i=t.isUnauthorized,o=t.setCollaborativeEditorInstance,s=t.editor,c=(0,Q.CG)(nY.yx),a=(0,w.$gs)().isConnected,l=(0,nB.SE)().user;(0,S.F3)(),aK(c,n),a8(c,n),aG(r,s),lr(r),ls(r,n),(0,a1.j)(),(0,c$.P)(),(0,c$.J)(),(0,rO.Zd)(s,".".concat(ld)),rA(s),(0,nV.V)(),lc(s),(0,k.DD)(c,n===nq.Z.COLLABORATIVE);var d=(0,y.useRef)(null),u=(0,Q.TL)(),f=(0,eS.Yy)(),x=(0,y.useMemo)(function(){return(0,nI.vu)(f)},[f]),v=aY();a9(v);var b=a0(),O=(0,y.useMemo)(function(){return ll(ll({},x),b)},[x,b]);console.debug("%c[DocEditorComponent] RENDER - ".concat(r),"background-color: gold");var I=(0,eC.Pp)(oY.Q),P=I.togglePanel,D=I.isPanelOpen,A=I.initPanel,T=(0,eC.Pp)(tD.s),_=T.togglePanel,R=T.isPanelOpen,z=(0,eC.Pp)(tA.Rr),L=z.togglePanel,M=z.isPanelOpen;(0,tA.QK)({toggleDesignPartnerPanel:L,isDesignPartnerPanelOpen:M,editor:s}),aH({toggleToCPanel:P,isToCPanelOpen:D,initializeToCPanel:A}),(0,y.useEffect)(function(){return function(){u((0,ew.qo)())}},[u]);var N=(0,y.useCallback)(function(){return!!(s&&s.state.selection.empty)},[s]),G=(0,eC.Xy)(),Z=G.leftPanelLifecycle,F=G.rightPanelLifecycle,U=G.globalPanelLifecycle,W=(0,eb.dU)(null==c?void 0:c.organization),H=(0,E.U)(null==c?void 0:c.title,W),B=h.ag._({id:"X6YCwz"}),V=h.ag._({id:"abr3hR"});return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,eh.jsx)(C(),{children:(0,eh.jsx)("title",{children:H})}),(0,eh.jsx)(tI,{doc:c,editor:s}),(0,eh.jsx)(ek.H9,{isEnabledFn:N}),i?(0,eh.jsx)(lu,{isConnected:a}):(0,eh.jsxs)(p.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,children:[(0,eh.jsx)(ey.Av,{panelLifecycle:Z}),(0,eh.jsxs)(p.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[(0,eh.jsx)(g.Wk,{isDark:f,children:(0,eh.jsx)(cJ,{scrollingParentSelector:".".concat(ld),editorWrapperEl:d.current,docEditorType:n,isToCPanelOpen:D,toggleToCPanel:P,isCommentsPanelOpen:R,toggleCommentsPanel:_})}),(0,eh.jsxs)(m.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:(0,j.cx)(ld,M&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(B,"'"),"--ai-generating-label":"'".concat(V,"'")},sx:O,children:[n===nq.Z.PUBLIC_STATIC?(0,eh.jsx)(rS,{docId:r,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ld),onCreate:o}):n===nq.Z.EXAMPLE_STATIC?(0,eh.jsx)(ry,{docId:r,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ld),onCreate:o}):(0,eh.jsxs)(eO.Mn.Provider,{value:U,children:[(0,eh.jsx)(eE.Ge,{doc:c,docId:r,readOnly:null==c?void 0:c.archived,onCreate:o,scrollingParentSelector:".".concat(ld)}),s&&(0,eh.jsx)(nH,{editor:s})]}),(0,eh.jsx)(ru,{editor:s}),(0,eh.jsx)(iw,{editor:s})]})]}),(0,eh.jsx)(ey.U8,{panelLifecycle:F}),(0,eh.jsx)(nP.a,{editorId:"main",children:(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(nE,{editor:s}),(0,eh.jsx)(lf,{doc:c,user:l,docEditorType:n}),v&&(0,eh.jsx)(oK,{})]})})]})]})}),lp=t(56768),lx=t(93031),lm=t(59195),lj=t(92488),lv=t(38717),lg=t(21496),lb=function(e){var n=e.theme,t=e.onClick,r=e.isChecked,i=e.index,o=e.startIndex;return(0,eh.jsxs)(m.xu,{gridColumnStart:i+1-o,display:o>i?"none":"block",gridRow:1,as:lv.f,p:2,transition:"all 0.2s ease-in-out",bgColor:r?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:r?void 0:"outline"},outline:"none",onClick:t,_hover:{bgColor:r?"trueblue.100":"gray.100"},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&t()},"data-theme-id":n.id,"data-testid":r?"current-theme-preview":void 0,cursor:"pointer",children:[(0,eh.jsx)(lg.n,{theme:n}),(0,eh.jsxs)(ea.K,{direction:"row",spacing:1,pt:1,children:[r&&(0,eh.jsx)(tp.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,eh.jsx)(x.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:r?"trueblue.700":void 0,children:n.name})]})]})};lb.displayName="DemoDocThemePreview";var lC="linen.50",ly=function(e){var n=e.templateTheme,r=e.setTheme,i=e.currentThemeId,o=(0,O.v9)(X.gh)===nZ.q.SLIDE_VIEW,s=(0,y.useState)([]),c=s[0],a=s[1],l=(0,y.useState)(!1),d=l[0],u=l[1],h=(0,y.useState)(0),x=h[0],m=h[1],j=(0,ov.i)({base:3,md:4,lg:5})||3;(0,y.useEffect)(function(){t.e(3541).then(t.bind(t,33541)).then(function(e){a(e.GLOBAL_THEMES)})},[]);var g=[].concat((0,ij.Z)(n?[n]:[]),(0,ij.Z)(c.filter(function(e){return e.id!==(null==n?void 0:n.id)}))),b=(0,y.useCallback)(function(e){1===e?m(function(e){return e+1}):m(function(e){return e-1})},[]);return o?(0,eh.jsx)(eh.Fragment,{}):(0,eh.jsx)(eP.h,{children:(0,eh.jsxs)(p.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:lC,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,eh.jsx)(p.k,{alignItems:"flex-end",justify:"flex-end",children:(0,eh.jsx)(ef.z,{variant:"ghost",size:"sm",rightIcon:(0,eh.jsx)(v.G,{icon:d?lj.gc:lm.on}),onClick:function(){return u(function(e){return!e})},children:d?(0,eh.jsx)(f.cC,{id:"yz7wBu"}):(0,eh.jsx)(f.cC,{id:"x6tIe+"})})}),(0,eh.jsx)(p.k,{justify:"flex-start",align:"flex-start",bgColor:lC,w:"100%",children:d&&(0,eh.jsxs)(ea.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,eh.jsx)(R.h,{"aria-label":"Left",onClick:function(){return b(-1)},variant:"ghost",isDisabled:0===x,icon:(0,eh.jsx)(v.G,{icon:lx.Ey})}),(0,eh.jsx)(rL.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(j,", calc(100% / ").concat(j," - 1em))")],gap:"0 1em",bgColor:lC,children:g.map(function(e,n){return(0,eh.jsx)(lb,{index:n,startIndex:x,isChecked:e.id===i,theme:e,onClick:function(){r(e)}},e.id)})}),(0,eh.jsx)(R.h,{"aria-label":"Right",variant:"ghost",isDisabled:x+j>g.length,onClick:function(){return b(1)},icon:(0,eh.jsx)(v.G,{icon:lp.yO})})]})})]})})},lO=t(53589),lw=t(68690),lk=t(10344),lS=t(70091),lE=t(88963),lI=[{description:(0,eh.jsx)(f.cC,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,eh.jsx)(f.cC,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,eh.jsx)(f.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,eh.jsx)(f.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,eh.jsx)(f.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,eh.jsx)(f.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,eh.jsx)(f.cC,{id:"K0Oq/D"}),shortcut:"R"}],lP=function(e){var n=cp({editorWrapperEl:e.editorWrapperEl,scrollingParentSelector:e.scrollingParentSelector}),t=n.enterSlideView,r=n.exitSlideView,i=n.setExitedFullscreenByClick,o=n.isFullscreen,s=n.enterFullscreen,c=n.exitFullscreen,a=(0,Q.CG)(X.gh),l=(0,y.useRef)(a);return(0,y.useEffect)(function(){l.current=a},[a]),(0,eh.jsxs)(es.U,{children:[(0,eh.jsxs)(n4.h,{isAttached:!0,size:"sm",children:[(0,eh.jsx)(g.kH,{label:a===nZ.q.DOC_VIEW?(0,eh.jsx)(f.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}):(0,eh.jsx)(f.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}),children:(0,eh.jsx)(ef.z,{variant:a===nZ.q.DOC_VIEW?"solid":"plain",cursor:a===nZ.q.SLIDE_VIEW?"pointer":"auto",onClick:function(){a===nZ.q.SLIDE_VIEW&&r()},leftIcon:(0,eh.jsx)(v.G,{icon:lw.cw}),children:(0,eh.jsx)(f.cC,{id:"7Zdnlq"})})}),(0,eh.jsx)(g.kH,{label:a===nZ.q.SLIDE_VIEW?(0,eh.jsx)(f.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}):(0,eh.jsx)(f.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:eg.Yc}}),children:(0,eh.jsx)(ef.z,{variant:a===nZ.q.SLIDE_VIEW?"solid":"plain",cursor:a===nZ.q.DOC_VIEW?"pointer":"auto",onClick:function(){a===nZ.q.DOC_VIEW&&t({fullscreen:!1})},leftIcon:(0,eh.jsx)(v.G,{icon:lO.bg}),children:(0,eh.jsx)(f.cC,{id:"FOoDGS"})})})]}),a===nZ.q.SLIDE_VIEW&&(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(eu.i,{orientation:"vertical"}),(0,eh.jsx)(g.kH,{label:o?(0,eh.jsx)(f.cC,{id:"IkOhTI"}):(0,eh.jsx)(f.cC,{id:"q8ARHN"}),children:(0,eh.jsx)(R.h,{size:"sm","aria-label":o?h.ag._({id:"IkOhTI"}):h.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,eh.jsx)(v.G,{icon:o?cy.Qj:cC.TL}),onClick:o?function(){i(!0),c()}:s})}),(0,eh.jsxs)(T.J,{children:[(0,eh.jsx)(_.x,{children:(0,eh.jsx)(ef.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,eh.jsx)(f.cC,{id:"77Emn0"})})}),(0,eh.jsxs)(z.y,{border:"1px solid #eee !important",children:[(0,eh.jsx)(lk.Q,{}),(0,eh.jsx)(lS.u,{}),(0,eh.jsx)(L.b,{children:(0,eh.jsx)(lE.A,{list:lI})})]})]})]})]})},lD=(0,y.memo)(function(e){var n=e.scrollingParentSelector,t=e.editorWrapperEl;(0,Q.CG)(nY.yx);var r=(0,y.useRef)(null);return(0,eh.jsx)(p.k,{ref:r,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,eh.jsx)(p.k,{direction:"column",w:"100%",children:(0,eh.jsx)(lP,{editorWrapperEl:t,scrollingParentSelector:n})})})}),lA="doc-root",lT=(0,nK.eT)(function(e){var n,t=e.docEditorType,r=void 0===t?nq.Z.COLLABORATIVE:t,i=(0,nK._i)(),o=i.docId,s=i.setCollaborativeEditorInstance,c=i.editor,a=(0,Q.CG)(nY.yx);ls(o,r),(0,a1.j)(),(0,c$.P)(),(0,c$.J)(),(0,rO.Zd)(c,".".concat(lA)),rA(c),(0,nV.V)(),lc(c),(0,k.DD)(a,r===nq.Z.COLLABORATIVE);var l=(0,y.useRef)(null),d=null==a?void 0:a.theme,u=(0,y.useState)(function(){return d}),f=u[0],h=u[1],x=(0,Q.TL)(),j=(0,y.useRef)(!1),v=(0,w.EDv)({variables:{docId:o,snapshotId:null==a?void 0:a.currentSnapshotId},skip:!(null!=a&&a.currentSnapshotId)}).data,g=null==v?void 0:null===(n=v.snapshot)||void 0===n?void 0:n.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(o),"background-color: gold"),(0,y.useEffect)(function(){d&&!j.current&&(h(d),j.current=!0)},[d]),(0,y.useEffect)(function(){if(c){var e=null==f?void 0:f.config.accentBackgrounds;if(!e||0===e.length){g&&c.commands.setContent(g);return}c.commands.updateThemeAccentImages(e)}},[c,f,g]);var b=(0,eC.Pp)(oY.Q);aH({toggleToCPanel:b.togglePanel,isToCPanelOpen:b.isPanelOpen,initializeToCPanel:b.initPanel}),(0,y.useEffect)(function(){return function(){x((0,ew.qo)())}},[x]);var O=(0,eC.Xy)(),S=O.leftPanelLifecycle;return O.globalPanelLifecycle,(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,eh.jsx)(C(),{children:(0,eh.jsxs)("title",{children:["".concat(a?(0,se.$)(a.title)+" | ":""),"Gamma"]})}),(0,eh.jsxs)(p.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,eh.jsx)(ey.Av,{panelLifecycle:S}),(0,eh.jsxs)(p.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[c&&(0,eh.jsx)(lD,{scrollingParentSelector:".".concat(lA),editorWrapperEl:l.current,setTheme:h,currentThemeId:(null==f?void 0:f.id)||(null==d?void 0:d.id),templateTheme:d}),(0,eh.jsxs)(m.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:lA,children:[(0,eh.jsx)(rS,{docId:o,snapshotId:null==a?void 0:a.currentSnapshotId,scrollingParentSelector:".".concat(lA),onCreate:s,theme:f,hideMadeWithGammaBadge:!0}),(0,eh.jsx)(iw,{editor:c,showNavigationControls:!0})]})]}),(0,eh.jsx)(nE,{editor:c}),(0,eh.jsx)(ly,{setTheme:h,currentThemeId:(null==f?void 0:f.id)||(null==d?void 0:d.id),templateTheme:d})]})]})}),l_=t(1005),lR=t(86633),lz="body",lL=t(56648),lM=t(60670),lN=function(e){var n=(0,aI.As)(e),t=(0,y.useState)("up"),r=t[0],i=t[1];return(0,y.useEffect)(function(){var e=document.querySelector(n.scrollSelector);if(e){var t=(null==e?void 0:e.scrollTop)||0,r=function(){var n=(null==e?void 0:e.scrollTop)||0;Math.abs(n-t)>0&&(i(!(n>t)||t>0&&0===n||n>0&&0===t?"up":"down"),t=n>0?n:0)},o=V()(function(){return window.requestAnimationFrame(r)},500,{leading:!0});return null==e||e.addEventListener("scroll",o),function(){return null==e?void 0:e.removeEventListener("scroll",o)}}},[n.scrollSelector]),r},lG=t(26806);function lZ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function lF(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?lZ(Object(t),!0).forEach(function(n){(0,d.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lZ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var lU=function(e){var n,t,r,i=e.doc,o=e.onCommentFeedOpen,s=e.onTocOpen,c=e.commentsEnabled,a=(0,sp.X)($.H.lastHomeUrl,"/"),l=(0,P.Z)(a,1)[0],d=(0,nB.SE)().user,u=(null==i?void 0:null===(n=i.comments)||void 0===n?void 0:n.filter(function(e){return e.status===w.Ux9.Open}).length)||0,f=lN("editor"),h=(0,O.v9)(X.Pu),p=(0,lG.Jh)(h),m=null!==(t=h.config.bodyColor)&&void 0!==t?t:(0,te.wj)(h)?"white":"gray.800",j=null!==(r=h.accentColor)&&void 0!==r?r:(0,te.wj)(h)?"trueblue.300":"trueblue.700";return(0,eh.jsxs)(es.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==f?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==f?1:0,zIndex:"sticky",sx:lF(lF({},(0,lG.Oj)(p,h,!0)),{},{border:"none",filter:"none",borderRadius:0}),color:m,children:[d&&(0,eh.jsx)(tN(),{href:l,passHref:!0,legacyBehavior:!0,children:(0,eh.jsx)(R.h,{as:eU.r,"aria-label":"Home",color:m,_hover:{bg:"transparent",color:j},icon:(0,eh.jsx)(v.G,{icon:sr.J9,size:"1x"}),variant:"ghost"})}),(0,eh.jsx)(x.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:m,children:null==i?void 0:i.title}),(0,eh.jsxs)(n4.h,{variant:"ghost",children:[(void 0===c||c)&&(0,eh.jsx)(ef.z,{color:m,_hover:{bg:"transparent",color:j},fontSize:"sm",onClick:o,leftIcon:(0,eh.jsx)(v.G,{icon:lM.Mz}),children:u}),(0,eh.jsx)(R.h,{color:m,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:j},onClick:s,icon:(0,eh.jsx)(v.G,{icon:lL.xi})})]})]})},lW=function(e){var n=e.doc,t=e.docEditorType,r=e.commentsEnabled,i=void 0===r||r,o=(0,nK._i)(),s=o.docId,c=o.setCollaborativeEditorInstance,a=o.editor,l=(0,A.q)({id:"mobile-comment-feed-panel-drawer"}),d=l.isOpen,u=l.onOpen,f=l.onClose,h=(0,A.q)({id:"mobile-toc-drawer"}),x=h.isOpen,m=h.onOpen,j=h.onClose,v=(0,y.useState)(null),b=v[0],C=v[1];return console.debug("%c[MobileEditorWrapper] RENDER - ".concat(s),"background-color: gold"),(0,eh.jsxs)(p.k,{ref:(0,y.useCallback)(function(e){return C(e)},[]),direction:"column",flex:1,children:[(0,eh.jsx)(lU,{doc:n,onCommentFeedOpen:u,onTocOpen:m,commentsEnabled:i}),t===nq.Z.PUBLIC_STATIC?(0,eh.jsx)(rS,{docId:s,snapshotId:null==n?void 0:n.currentSnapshotId,scrollingParentSelector:lz,onCreate:c}):t===nq.Z.EXAMPLE_STATIC?(0,eh.jsx)(ry,{docId:s,snapshotId:null==n?void 0:n.currentSnapshotId,scrollingParentSelector:lz,onCreate:c}):(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsx)(eE.Ge,{doc:n,docId:s,readOnly:!0,onCreate:c,scrollingParentSelector:lz}),a&&(0,eh.jsx)(nH,{editor:a})]}),i&&d&&(0,eh.jsx)(g.Aj,{isOpen:d,onClose:f,drawerProps:{autoFocus:!1},children:(0,eh.jsx)(l_.m,{onClose:f,editor:a})}),x&&(0,eh.jsx)(g.Aj,{isOpen:x,onClose:j,children:(0,eh.jsx)(lR.o,{rootElement:b,handleClose:j})}),(0,eh.jsx)(nP.a,{children:(0,eh.jsx)(ru,{editor:a})})]})},lH=(0,nK.eT)(function(e){var n=e.docEditorType,t=(0,nK._i)(),r=t.docId,i=t.isUnauthorized,o=t.editor;ls(r,n),aG(r,o),(0,a1.j)();var s=(0,y.useRef)(null),c=(0,O.v9)(nY.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(r),"background-color: gold");var a=n===nq.Z.COLLABORATIVE;return(0,eh.jsxs)(eh.Fragment,{children:[(0,eh.jsxs)(C(),{children:[(0,eh.jsxs)("title",{children:["".concat(c?(0,se.$)(c.title)+" | ":""),"Gamma"]}),(0,eh.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,eh.jsx)(cP.Global,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),i?(0,eh.jsxs)(p.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",eg.Yc,"."]}):(0,eh.jsx)(p.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:s,flex:"1",children:(0,eh.jsx)(lW,{doc:c,docEditorType:n,commentsEnabled:a})})]})})},47827:function(e,n,t){t.d(n,{AA:function(){return p},DN:function(){return f},mb:function(){return h}});var r=t(20406),i=t(28526),o=t.n(i),s=t(5632),c=t(2784),a=t(46358),l=t(42879),d=t(62141),u=t(6985),f=(0,c.createContext)({openPageSetup:function(e,n){},openSharePanel:function(e,n){}}),h=function(e,n){var t=(0,s.useRouter)().push,i=(0,a.qr)();return(0,c.useMemo)(function(){var s,c;return{openPageSetup:(s=(0,r.Z)(o().mark(function r(s,c){var a,f;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:if(a=function(){return u.T.emit("openPageSetup",c)},!(s!==e)){r.next=9;break}return r.next=6,t((0,l.as)(n,s));case 6:f=i.subscribe(function(){(0,d.ke)(i.getState())===s&&(a(),f())}),r.next=10;break;case 9:a();case 10:case"end":return r.stop()}},r)})),function(e,n){return s.apply(this,arguments)}),openSharePanel:(c=(0,r.Z)(o().mark(function r(s,c){var a,f;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:if(a=function(){return u.T.emit("openSharePanel",c)},!(s!==e)){r.next=9;break}return r.next=6,t((0,l.as)(n,s));case 6:f=i.subscribe(function(){(0,d.ke)(i.getState())===s&&(a(),f())}),r.next=10;break;case 9:a();case 10:case"end":return r.stop()}},r)})),function(e,n){return c.apply(this,arguments)})}},[e,t,n,i])},p=function(){return(0,c.useContext)(f)}},28916:function(e,n,t){t.d(n,{V:function(){return o}});var r=t(2784),i="drag-in-progress",o=function(){(0,r.useEffect)(function(){var e=function(){document.body.classList.add(i)},n=function(){document.body.classList.remove(i)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",n,!0),document.body.addEventListener("drop",n,!0),document.body.addEventListener("mouseup",n,!0),function(){document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",n,!0),document.body.removeEventListener("drop",n,!0),document.body.removeEventListener("mouseup",n,!0)}},[])}}}]);
//# sourceMappingURL=6738-d196aa5c350abea9.js.map